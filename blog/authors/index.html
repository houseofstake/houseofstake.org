<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"10a7bd58e93f958d63af5c3dbcdc2b23503596fe369003315d4af95fc83ed6a0056a66e0c2f144cd2d1a88bce7c930aa9294604d5fab242b5683e858572a5448a292a221874542361ca8511fbefccb69d6b0eb29629d4e264fb3705e2dce4f27cceafc5c753b7cd3ece4f1ac1309ec63699c7a2d0b9e63f7d6232a2b640e1040f79a6f19aa1cf6b6f1388344a6fcee4ecfda2b038efa76286fe723f6d15ed6cc574f170362c48143f17c2744b0a013a22b520db45a8d1885a4e5e7edbaf0f159c76ce8f6852c9c883cfe9092a50675a1a60c2653a7b41f5c25149154478eaf367a74f48ff98abdeb5a0bdbe30d198de694f308e03c5e0b1e12aa8289d128967c70ad707bb6ba842f8db831a61056865eceaaea9758bf5eaa603251cd6d69a0ad3a60f86c878eebc84eccbaf18905feedc0cfc44e6771e586028f45018d867c2bf9a334cd60e94ddb21128d181af2d3c2581fab7bc6dff19c0ae38d4c5cd98274de166b85001638dfd17682f936b9c7534ed32a238f252d9c445bf1473e4e2145af24099c5858bc8788bfe4f1cca3d17ce9d1c2d758b01c297302fcf0d36882c1da76286fdc53d18a7e892bfc95f18bd08caa5a02b522f9c2be48bbea3a4aa779c2261aa28aee54b567591030c6fc33ea1ede62a47e0f6152ff6815da94ee26bbd77b595ee559bc371e74ab3012041c1d8c6df815e453d3273ba21a1ecf6923ef504db9667f231978402a74ee45732434a1ddf48b03a1b30099963517941f8c1de7d8f6abe6276d6fc5a0ce0facfe01f7f4ccfa0b08fa93922c92cc0985278228a2118701950b5be8e0b29949246ca0c2f65fa47b91c95dbb9eec39a8f79bc041d784d18865c9a6980ec88ef10a4763e78e2f6544762435c97c12f76288a1bef930f631091491387af2addda275d527503e7bacf678d975b08ed77e21bb37ab060f6a925c2758e19c7c35e54f3f7c250331b499489952ff933d96f48c37852a9145e529945c0cf14bdc6b2d912992a58c72495b56f73d5ba7d52cc3256822385eb1b9b1354fad67457ac4e3278ce456c25170825bfc07ff3821cc7d6c96c3c1a4107f796c6435f4066e0c10757361a3461bd121c3e74d5b62ba127f355c43a730dbbe1340d085b2ba57e90d1fca2a93ab7729b99962b9e583b7d1bf546ea2f83dad899c92155d666fa73b149a44ed8fd243fc5eb1ec1e058e7d9386731a00e74387d48c8c9975e9e5f89f4d16d7c825195c1bc95211e85f6b6aad6bcbed3bb06fc366c89b7fdac1387bf985e5ed93bc8e784704b24101beaeab67ebb3a6c0bed6e1da75397109feec9b90496760ffc2f0ddc7233301b3c7d13dad3cba1f58d03b8386af4b588c95be5d92d383d38ec659a2f880ea5e33be78d1e4e23373e8db30cbf4c339b1f9413bb6e219cfce93fc55204932f8f3cce2d1f566d2b8bfdf4ffbd9b91dee3e9712434827aae24fb53063e22708b9ae8ba807dd97b63e453595d43e3dea78b569dc355f5f97c9c631506f3be90f6fd6d71be8b7c7bb627b87a40ac72a96edfcb52f08ccb22b0a9d9cb1a5212dd1ed4ace67d23ecfabe64644c5b3218a18f935ba27ee94f11881406421eb63a7e40c907680b12a87918717eabd2232e5084dc456652a554d5bdeb49196cd797f1e2aca2fded7a2898a3e34caa65de7df7789933fd0e21bb4679a15080e00e23a14e4b7404563dd6d7c0f42ca9a489301e999d81cf38b05399d526159ac8f2533317f37a487b1393a0c3e4cf03f39e23a7f3e93ecff6a98ee0f728bc31cbad337ed79d6a3d996e17d4468beabc0c66de850ab18ab8dab19336acdd305c8b2185236eac79f9b2f35795d70a50e432c4348c7bd0f2b2ed6d324d2487bbb9f88938b4e612cec288a4464010ce9c5a39579e3c3ab3baebb9b0f6c3fdb4ac5591f3c68744581f2cc024224a805a94eeb63d2db216e754623ae47bdbb5ff05101033944e3f3885158463e343c1871614388486c74e56c90898dbd73af6656791c13ccd649eab634a8f51e7f5aed927eb5b8ded1fa53ac5044238ac31ea313b13d27b475f56f9bf2d1fcead37726034459bb204dd39f7495722525063a76c3afd3c6ec21151785ff9117adf560002902587e762d4650fae06dc3b92e33d427170f3ed7245e72f4cf72c30ae900a12b070400a6fbc3e44be569b54da55256389e2b68ba5a57defd3ec2dee3c9771251a7b97ebad1fd57a25504f107ec383d8274079c8047b237146eb8b3b21a80726cf36240d515cebc292f2cd0fd07b9e8483c2f6e87d2d82201bc27a33b3047751edca5552d049ca0fc0f3624649cbaaebc8474dffb87499ca563e2c620471100af0d83c50d5b43ace8e84847ef9d2a1c07759fa1cfd6797acbc993d909fba8a714e54974d37a81a8a05418b3fda0b166db9af36f3876763fa1b797039011a3f08cdff9170761a7bc47c98913327677c454b586830f528eade7851a8a33c20e353f33cc3163d1fc111620eb2ee58533c6c1e79981f5c2d47a8c5974f6b523b6a032a1c540ad8bb7d9d4762f31e264016dfbf1d5ffc926610dc30d4a7205634a5ceb497acdeb49326cd78c66a46b6545e43fe10d84897faccd7b5539a3b40e326f086570245425f1d516460c7d2faab245904ed0ae1462327b5a91bf144b072cedf4732b4657454e2a097b8039752ecab30ef729de5ce1253d14bbabff271f3b6d690d23fc1bdc36893c9d323ae346fd8efccb6609aca473c6d3504b6be963a5bab0e050f9e91230cbbdc946fad07dee38dcb27e3914fc209214e61a3ab54fa66f2242cda7bf8244cd817781641bad1269091cc9745f445fe1133aa76b2c7a7083b7b73562de3b4d5fa8f9f3cc3e5d994418935c3dc11c3c55b3a77d763bf62dc40eb40b101817cd5f946c8787dbf12edbbe81c203bcdd94ddfd4db1882a9957e8cf55a5fcdf1092cf2b14d2969c785a15f42cfb4293cf646a0ce7466e0d029945df901d94b83c1dc281db743996e5954327468ac9cbfe63e7f9c562422650a2f02fa397c19ee075364f81ed2bdd18c089d13047c2bc2a71b8bcff791e8d6cd45fc9d8ee5593b3962bab1c7c117f4cfc567689875da6803febac804389470272206e9378d501e0322d1e39e6b3cb53c4cfc350d677cd1cd770f0cd4066341cdd033e1a350c04337fc7c054519c536dc5ca5e73a170d22d4a7a4893c59b60558016ad9c6a0615cea2156737aaa89a153835e8cd15f376afd78c88aea0b05a34be4a0c2d868748c35fc98ebd2d62411b02f14ceef23bd8ecc972875d2094e449871904f3d491cfb82df1d5ae89302fa6e2c8c5999fb3528664bfa9a512571b7387b3ef51b29cb9a44f4a708e427b37b07a0db442fe022cd29fa9aaf785ef15a8d4d3986c43bd5d1df3bebb36d2dfe1fd53973c10b919762c9f3c5da07a40afff7f910f660b0a1d350a677941c78af6c334e91758dcf55328324e2cf3ab14e2e1a0660acb9813b86284c03a51391ff8a7507b1233deab692a1397eb0bc8798ada68853cdc65bbaf979a898a3a3d5e897dfec03d7b518ef359c3793ae7d1cd2206147db73c8f63d3beb80dd7af865968e9220134149d5a1aa26c4db3834255ca2fc69f00a263d174ef37770a8b0a3f67fdcad4b3ead647a638ed90cf8a9c7f984566fbcef50fd6474bc6328e997e218732b8469055b9be2b6512442727d6549489429b315f95dbcf5af278d298752c717cfaacdf1d1ea47d193af9727eb4f396ebfc9fa187f52aa1203c6bc865a9a9926ab5ae7dd08caac492f8d594e1dd6e2dd3c3ea9f75475194e272f7b795c93ac80b70452a7524c959780611a2f3b9e0a17327a2e5cee065e9c1bfe0ae100c03714f085eafb6a6f40607fa06f984f9dbf7346138e776cd0db80def355f0c8c544b40d6467ae412d89b85fe00b7775b64f8faaee52748c2a09e688cbc4268d70fea147f54e010e9d0c4c8e70ed81d1e37990bb1615d389527efbcdf97964f7f6d9d5f604880eeead11dad9571a37fe864605ee3adefa2cc3dec354a76c18d0184a819380bba3886403d08f4b9c4928c9c245f818be7379d032c7e59693bbf538daddad13d8c27c9c4bb791493feb821ad236072e23c4fccd25869c99c22d13ed6a66aa80a56e5bb7c704c646ad79ca411a4df03b7b0057de1150c71037092a6be93a47885ab805e3a2a05e3688dd91364192103b0442ab887354e50a7fcf3a48f6fc4d4b5462729a51fa346bf357b0aad09b935207723c9e25a57aade767f9fe156a5c9aaac18e6973d92fa598fe5497a07810465975d413fdd9c7853ee175a3950a98c9fd453621d44a8ff99000baabdcd32804bdca5c5d01172e218ea37b16ad2c596e9bdbdf187a27fc4d59981a108921ae0096be036bf0071cf4539c6c075072ef45e6fd519d31ddea7088bdd64952ce4353b635b5d8c7f09f8da46726eaeed723065bd55c80f386fe60ee493a494df2411553f752cfccc13446407bbce9cedc2c54ffa394de9108fb4c2af0c8fc7483861aad78896071da588487db1c2380647375f60b44697e7a0ab9f6f98247c15e66273a0567c663c49be03d94e5d602234295bcb69f67b5e0b663b217c5dc8a54c06a88f8ad8c1a6e1ce7ba94707ddd58103aab3f4cb683ec93e8f215cc1ff09817000ffe003a8ed7a012c1eadd07538c32153cb098f11fdc5fb781692c47549da63941719ecd389327e685c98ae843e36c95572aacf4b3a7658d484633af18e8273f587ed6ad677946dde4fef3cc1171760dfac17ed7458de54d631d2108e5993efc206d2583cdac7df52159aec7bf61802371bccdc7b1b772af414eb9572febd4f89d9c7355efa73ecdfede0a9bf5a9007dfc4559a5ab44b37d5f8858c8c02cd6f24b3f4ea05d144bb8d2a7a48430f30dbc95b12a998273c1dbc3891edc503db1d92598a0664f1ed484d4006da65e79023b45088cb312f68b4b299c9be202ea708ee5e6e633483a111f57332807d4be55bde7e8db23672e237e9bcdd9fc8f157d0520fa4840f80bf929b62be747758216a58a372106b221c9361877b198a830d152af32a4f39f438013b7c0814f3bfdd873dcc52ff2f7e287035c16a0fa44eb127f08342520835950606e81675f3f3dd52c1dc0201551e5ec2d9590d4854bf34359af0da6b498a5dd8c92a6b0543a544da1bc55fc110599c2754998fdc760cf6b3d3d8c25b5dffa896fe48bb2e6bfcbd3076bda2e071fd26bd5d1b97c3ffa404d90ced5bd20a93b40eea29aeda568ea4b2ae5cbf34d9e5ced1064ec7ea03c02b4ec08426ad8c39bd94b19290ae2f15b5e4a824ba4ea350f3b806a41f61edad9fe92dc5ab8c571a1affe96fd2b15091fcd411fe9111ac61c9dcd91e06ef58e0d81030407430e45b1512e8a4c03f7212740aa97f0fbba92648f965b96eb39a87c4e861291c805b2ad4558175832b069bde3b6c769d20d9cdfbfd67a175d166ba854b70443122cac9050f2755502fe65ae041a1a0ed3bbb99cd1221ff36bd1dfc98e94a3a414f27e48d4ced2a1b4015e1547536ea9788ab12b063b39309fa26356a97f7a613d153fa8bca3af617f0f5721832861aef8c44e781993d37b49e3ad74c951a48fc9bb49b1f1bb31a5d5651a69f0a8062ba0c9da2c689dc77511dbf37f423ada37d5d87cf194455d5f385b90cff33c5b518b4832d255b18869be0b545ec8f39020a1915bcde0095219759e125dfc1b00d24051e41bf7595f87430f49e6c2e4d1627e835d4574cc6f92db898271494f10c2f66d96c08f35aa0032a87ff73fa22113913c6e2b9423f7d425451815de3dfdf317be72ccae291edbb5900c2b6e8c873830a12a0967f043337e5c93aa892b56792170b3df4e17d1007e2c2252128d25b7ce8123dd419f53a143a0cd84f0ca3dbb66d14c6cd9bf71cea04f8bdc38b85fd84d721cce1af37fb7ac81c86f45d27b1e3a59d8ea600f868bdc0817a4b20d045da78f53e7a1fa9bc79e09094809ff6bcf6c3b38f7b294c81dda9e53408e17dfe7acddffb7f5bcbb28280fa323cc5b0a86d845f810a2564773e94fa49ecf447045e7c26b890a12731884695d3518efded4602c026fffdda8c7c4b769086193225322ebe55a2f20b93d28c78a59640ff117e82c5c31df948629dc005a0d55b10581a5436a4c5062e2601628419321eb916b3b5ce762f4ca7e0116b4874827bf8ab7ff8b6d5bf18ee5cfaf559ca7a569ecbf254c23f3d0f81fee93cc3c133757a6f2f0f5561a5b5549f017cfa9eba6784543217a8a73fff1571f946b0f02ae20aae166cd43b2ff5cd5012dad693469209f5ebb771379862b68ce91da93d27ab0728d37cf7f18ebfb993d7fd7cd05ce961b752045fe3b6765571e0e9f5b156a90b50f4dae9ecf0e144e189ef574dce9d9fb1f7f538802383db29fb3ba324870c831fe0f65cd03b3df99292e760714c9a123cebfdf1ac9e9ac8eaa4cf0621e13475d6e894a79e0cf8feff85200cbcf03aac7f3df6a5dc5ec7f0fb4d936bb2e41e0e01051698296a31e322c59ab3e69475e9bdbfd592831415cd7a0067ed3ac5c26b56dec3912328a4254a53ab8f052fc7ad22fd2bddd31ca645a25fd87307efda94b8ec95bda66655c09b68f7348045bce9ff712504ebaa80c6016e6b26ec9f2afb918bf94ad3e918e3160475523de95b5cb8d6e9fc4e846763c81cbb127bb2276c9c63e8f3bf3cfe042aaa4bbca79ad724a51953dc2d9001090d015fb174eda34facb65be88cefac6d7903eda76d2d57efb3be5a97a6e33f4e802ada0f606d585acd0b24322b9b2e610fae5d7e0e124d1d162bdb7bea5a53d7dcf2a4b6287f66106f42e33e06c9bc48b7e73c14c990653d10d85b18b630c8f147b30364d1468d47a29d56403529c0412acb0c53d8637a68b47ecad46378a90635561aa062fed0b07992fcfe43108961845c3e6287a664285a931502dbe9bc84fbb5fdf19900089659f1f804fbca8a4c74633f85ae88f1c26f4531bde08a915c9d8989aec123659bfa6ec7474ae96b91b0f3b00d728c4240cd82099f2852219e53f86fa45cbce3959ed9f6aea4b4d7be5b28129528f15bcb857a86290039848227449deb1572fd1c3f8722055882463d5e7eba3a98cce77b02d1a668bd691aa72c41a815f6faeb1d4e83eb632b58057ac95f8e908ab8bc08962d6ce572bc0a3334523686979b8122736ea8011b4cb1183959d61f82bbb13fe5df7090cdfb63ab3dfe1adb8055bf13a6eceb626fc8cd0f2eb2f4de42a261a5dc68a5d43017bcbaa14db86212e60aeedbce40874327ea8bc0159ad58731e65b1293be98bcb604bd5bff4aeca0b847776a4c9cae063409d251a2a1ee03757f5936290d70da1d6cfbab993c09b6430f4f9e2ebcc3e5cf08c2394466106270375d364aef9bf99f9aa53ab02b13ec5177f2267acd919965299d855cd6cb813da6bcb0042176e13d1654cd1036a2b71c2cd498795bb7100866f80a6688bf3a12baef1c94f00ef385f66ec1f8f6b295422a0365e2491d771516cef87fa5c1c5f85d3f893f1161f64a63388b94380631aaa9f001ab572810540b7292582d4e49f015cd66d53fce7e6925afcd1ccc409436fa1bc92875ac98edf5aee37c9c59e744ab575d11800e21e0cbba3e62cb84640ec9777161692357b1edae68fa9ed12bd8481d23469714c189ef0b1d611135b42ab3ab9710baa496b9bcaf796fa27b538c07e0ad057edd5a11281711931c99784ac563cbeb0241682bc204c53984f84e300391859471aca6a7a5dde512b1051e99a4f85dc1e5a1ead80f43a2be7e15f1d14d67ac6d6422f539e988075647af0b6cba309050aea3ae9095e3d60f7b0a302278def1e7665a6fd8869502eb44249b002e6a2d20500eb05b85ef12dc005524e14b236fb9bf3da16a64fc99e4293c6cc0a9745477012d5eefafe7f65f6d24befe2f14959e9ff79fd93f7e860244edd439b7c730ac65d54a566c053b23fe7bbf0e5214ed566a0cd4166bf541dd7f9a7fafa17b01d00675e335aea3e65962b801043cb7f01dfdf41dbe017f5285085064adbbc8c14be947bf630d070253a382427616bd5d2b8af4b4a7643be9faff70ceaf1d6c713482d78c67f9c374195fe743bb1a179ea89d4d0027f77fc3ed44e9e766d69587f68f30e6bd13178401302100ca7c5bfb3d4d28f066a31ab6b6eae4bb756c426335f701f4debd57bbe762f13f5e69d5a568c17fc79643838746b933587d29ea1bd6880f91bf85f8e5eaaae3012d3e80ef0d0bd99e7fced22934a2a40096a5679bfa8463384f18173401ebe0ec63c3618256141f61844b26a0dd6f7880f9b8b22629b0dd3ae98e2c1d428b379eefbe9ce38354fbb91b9d06f01eb748f47e2f7b7c7bd01a3a4f8d9886d82661bed409e8a48b14ec27014cf574a4857006e506cf90a0712aa0e52f71a2c73efeda1209dce87da544fc964ca7e9af8c2087205eb06fce07fdcc4d4090367711465e907c0f079a617a58ff13e160b5670a35bcb845d637c3dc8d240a88d5c387443916f0f18e888c1fc3ecc5b84de4a998e0c727190c9fcc89566a85752c0883d07e677f50e0d8a04582b8583b3e78d63fe8d99b7f1f2fd4076c433980af9005497d63e6ab5d52245864f95c53ee674f8b742ca1d4c0a0acd4206a9d521503343d102a0c595616e7157feaaa8f3a4177c0190000a2dc6578fa9a0a524c0b038f34d64db57c7242ace2a9a944367caeff527f12c47d3b39e25e6b5c5916d0de7bbf7300ca915fc2585cf640c450139e03529db5b3efcf7cf18f7768d501e240bbfca9feb26ee8a4873bad79779e535b4231d2fc5e291af654bf7639cbfa59982939837e38cd7f16efa72f4e89e73ef094a766dd24f28562a082a302dad210da7758ced7f6a0752ea82a73dc995fedb688812bac9553d8bac3e4a8aadb742e44d9a32ef6911923a4ce3f7472c1013643e64d48b25cd095bd3b6a09f03a0c5bbe362d579ce20b31892a5ef6fa4b96b503951cdd7d58f874eef43ce0cfa197e4a7a46c398661287dc04b5286546efc9024bec13524faa3770330b514324b4b4586f3449697b4b4cdc085f542df432f9d34ae0b30262ea8de751e59dba27301abd97e5f79b78505cc2a5d34e5e35c1a95421195e9021e87d94dd96a59543f04fb20008a6b38c3056e552b70db8c11aeb00c764a9a7c221ac3e5d2878855de83aa757bb664d23dda70dd1b353954bebe40b745d63aef27d6bd616072ba1d2bd797708f9fcfa9e8adef4b7746295aab25ef92c54072c557062b5eb8cb3353a95207ace9a32e090e47294ca10732a91c428f26c52dbbb24e6a6fd7ae491129aef17f1559e8df515981ab5216b0032362cac3aadd3d3b7ad0418fac7ea56fa8ebd19599971258495b93b388d77e54f451e471667bca8688f615a6a16ce62026fbcf338e1735592ef6897c58d79bcc6d55ac86d2ec02996d1c2148a25d77c3fa1043e3926bfc33e2abb4c85802c5f7b2bc48324e09d848288c8182d55beabec5df5460662a5da28e7da07c13110db80d15fd69e9371d554b3d5ea8d091fd37d0d1091b165b07509f14d80d037039d4633b70d36d8532917e582eed498d079a234fd06da1be87e94c935915b76e5745d6d5d43584b87e0f3aadefd328ac18e30a3c066f988643b4a9e3df4f7f6f65ac32a7817234da5ed3765027d741bb1317577036a38bc1636ece71aeb8f80ff4aa928e17123149e622a2648a64df1899918b952ca63df0dc7ab7820e65b6634fd12ec64320b4b3025fb13d28908845fc6badb71cd13cfd267e2560f31e7a302f54098a6f9437dd52948d710eea54b01869c291b9334f9bb2780d5f5f30b9e9fbcd30948749d9f6d4163cb738fbfb74ad20237b5f95f48a9e4d9096499d3648bdd7deb7cfa2a888907d571354a84222e4c5ad2e48c3c09b64d363cb6e7bf0e98cb6bed48a42e0d57031e0731c5e9086341f9e971ba9a0cee47561c69437628029a649c670c39037757dbdf188976f2ff31b5585e76adff73f539b18cb849a8240d4b54ec5ffd7907e8bf689bd9723f7aa6e571b09f4763a71397187c69d9bcd3c7ff709105331743ce91c1e0247aa7e428c2386fde274cb5b886deb363b2fbef7e50823764015122879385dbd0f4dbdc7bfe4294aaa7ac82a76f412f2c889926277d17c624f3f9d41ae0240f9ee37ffec324a22dc00a91539319e624a8e185f72329a26e09658ab5ad76207e697a9a4d3f75efb688cce78a26d817fb79b87512609b2238de1bb5ab933e647be6875f56aa0c83d3fd653df40a5fae2a8abc6e0a01a2864328ef09c1a474e3a90b02ee2937d8179970e7cc1ff82ed8a652c4ce4cad461ec05ce0f9be093b733ae29a9dd8e26cb823724cde1cdab50039fca5a75be87a400aaa343bd7398647d5591a3f0be8518d47c4a0d5c25d57468270ea55ab9236e2e476ade8d438b215f6f9b5f243151e72be9fe705bbc50c7c7b9afbaf1d3e54afc1d2bcdfaf6377968bc61880173793e83bf5750281324967315a702369b440b1eb4a4e758b47e9871c1fc61b73b624cdec76123027e14a1488255695d0e53cb7759f1478cdadc59e8e5d02239d331dcf017100766187b5e47141f915c776654c7dc7dee93e87a853b9e066fed06002febc474700e51188f1cb8555c3f5899d4a649dce43c663d514202d4f8f8c13363aa3776cac38a6767d1556260e146322c8a4fb4fe101380357ad814a5cd4e7c7beb399e0e2eb4142309cf572fdcd8c4e684b9df5bc06b05914e9147c33a66b724fe88809187b2b558074f01afb4c976c98e32d445d7ec92a1dc782a558a5cc67c1b4d01b8e19e52c954d0f78a7756ad70bd62cbbc411b3b011cedb5a551bf7198da3f2490c6b8a873e7be6fe3f0ce5ffb81f80d6951cfdf191718a8b242ddfef2d487ac9f4cf0727b2310ed0f679277520924d1f544851ca9ea174efd58bddff8b9de9b53f8c145469b73fe676b283a28026bcae1b2c81b811b7374587b3967d4a64af2bbfcf62df8de90184a7c03a353f1dc2d958d22592abf755e312ee27accf09c68e96c49860b7d1ac85e8c7d22944992e6cc68f42f24882250e5e6c985eefce44e7bc5c4d73b42f43e866641b8ab6291ff80bb14c8949509df0098c2d6e2fc241e82eda82b27ad4ed8124715579702ac09a4d4cef96760b7614a4092addd1d07a579cbda7ade138bc7a81b9e1c17dd986dcd41652e5163822d14c874d9f230e6efd9c2a3f3d1bae15a3a6f63516c6a6b8a306ea284efd34ae823f0a624d1c119cada934e64e1a4462e37ff91c3c8463bebc5c6616582f420f401f7032c7514f964ea885b029dd8b8fc1af20a433831f42aae9f6e7f1bc6a3e9aeb37d2232d042cdc52645e4f157a334205b9605b620e95d74f7126ca7be2a8a83dc06dcd18fc9db32c80dfb15c5ee8d08c5e2b430447279a578c236b7a778b5ab4fac7bec4110927332ddddd469af53427ba7c2076cdc0ce4e02611cd65a1585de588b5356dd1fc5910a87030e51034b9a42e2d72f3c32bf795f52b5c86b5d1bcbcc3cd48bd5065ca20b373e07da3d48cde1a4241f415307d6c32d48981af7815ee2db587042a1d6e4b9eee8c072cfda11d4743fd673a1bef3659522de909b9b4718b65d2ad4ed9b9bc935e2de3cb7228775629192c7302129b679a8cc685ece584939dfd7bc82acf07bfd79245e70f0f113313478fccaaeff65ec0cb795cb0b783692d07aa46e992fe86e8fe52d4f4d215f6d2d927f3c26a27fa3bf5e13e75cb649dcdb73e27cbf53f44333e2d1246657deb5b7cb39c13128339f7540b6d72f5c77f33fbdd28c1a388c1f4a0c113f95f38438b681ba2f80cb45dc63010ef5412b107601739ab97840f005214e1e24a0a49e5c2c15c6f34baaa6503825bb170bb049c7e19795434c979edaf6505e02ae06d0208e172e55d4e00dba0fddf1c916b0c9158401335d1eafb7c0b6d82491271b0f7c0830afdf0dec7153e92c0142292c5fe9fc3716da54773572c53075d5b0dcddbf7e85f283137870b353d74484e35b393b4d65e7fceb120b08a28314f5c17ec424d20b7b23055593f949a4a4609c82a513513b50302bacec7b2404268778a697f34c2da0e4c32c72ef3430bdea3b54046a76414f71a2db198dcee45fe38eb93171134a161807f751084384a89abbbd6c51a0c6914142c3ca7c1dfa268cae5056cd76aeb1bc6f9da8998a9d772aff8a5c939939d48d8cc93d9dc831bc1f48b81b27edeb07b85233b33e7d82ae13c52afe36e2b43318e2e598ac84dc3a8bc0614d1112da27223435e1b41b5d6a051336a7cf87edbd84711b1b2d3eb4a36668ae3c45e390360002edb8ede95659206508fcc837c2f1a139621dacfbd547d689f4aa829abf5b06aaa717d602d9ad7fb9fd06bcf6f5b4f7e317e827e49c133994dbeaa7395e0738d162a944904b9d245e87adb3f4ea7657f968f972d59f062197df230951ec5f03e5ae1a2ef97548e850ce9a3e14f1c12603bcdcd24895c95c0349aa35a1803b9a4127f192ad1ce07629ec3416184adf4f36d3575ef5c70a390cddf9c8227f1795d3a0688e2349c9afaf06368b578ef41ce2588c16ff5aec81656894db1b2ac427125553ae59069e9b69ca9bd91e4ecf991c6b754694351df0ae8f39474e51ee32acb15f794c5a8e6842d87f271c5de7f91a1af8cc9768b5f2ef78df4377d6d419f1e49d6e8373e166865fda33234d8139bb27ae5d31be3d0359266fbd4a3932817b81b1418f08a95a919bafeac4af37da344604f5de800f7e76163325933a9361c6de8b93c1a78eadb9d0624e0cb6bea7de61a8d35f082f1ab64e9bbd1c9a2af8e7ead330915e04dc01001511ce68378e57934d7a4cbb477044b07c146bde787300d72d84f91dda61035f6917c7c99590102d6adb82bdc6ee3bd396ff02725a079624190d35c53578d2925a4e801583d26144b953f4765187a81aeda0db6010bcea580b2f12423180f467bfccfb0d64c9f581b7b77914ba19a9be4e9d1c15499b41931762ddffcc6fb3e1edcee1c8faa5d7c4f6e9aca042180e572e8a4084f7bc3101b212c8bb123b0469d61adf4bbb74c4f23cb6453897fac3c88b52aa470fd619330de46925cb4d8d04792fb2123bf2c91d43583c5e57bd52a59dcf7310740885096711393bb81977da609adc26ab61917bca261ed6a6deaf97780f6b880735a540447cce01b3ac92fb24db1f3c00bab40a6fe550a60bc480f8b092c8ff174b1f8a2175debc656920cc57c83dcca7d2cb279513a0d2b527f62b418407e9d46b7cd0044d1cf230da68a3d70974d021571d3e025f57c051737ac5a524bca9ec129ae0441317b442c5e5d1f6beaa6bbc5528b80feb3ade5c513ff48853947e02fc6b26edf1c86a05e1514bf55c2e41846c00d440322ebd9f31d2c3f7a4ff262520a30342dd9e5c479e1cff020f7872518e9d4d30c89d60ef5a1f5835e5bf8e9c5bb668b3b47290a7b35d460004feca755eaf28c93d01075d23ef6e0279ba03798f578280f05003e599eae4d551d2a604193f00c66e57649cd7715d347a2c70c91f8d5cb44d4b188a4b49a322f16404cf4e20d16a11012af18a1b84cf78d96725f9a28c3a0210a7eb311edb1ce47efeb00339a897e25df40087fab1d728d2fcdfdb3da78d1458db65982c3bef6d874f6835c67577787a1c8d70ecf425c4516d5e73f1c55a5af155b6d26bc6fbe38bdfb8b0c1bba4dc1f0c0a435499341846a801b8c85e8174317fe97a48af3313d37af974adbddde92a347e2d5e88757b103bbc1100493c10109774e381eaeeaa1aa7996fe2a5a1fe287f8cd926f5e03c808063fef09539703e69830c6042e5fb2df324df3eb1c121405b36bb400462f9e4603a74df3aa43099a06d556822370cf1739e184c1d480aeb725624bb5a4f6c46239f41ac0378a8fd521d8930517ecd3930d64f12a1bad6c33170c6d7ad575ed05856f4face84334617088f8277f8a62929ea909f5fc01d85e79ff199f886a70633652748c30d4c0cb4e050a0f6fcb82c3c7a6c2fefcbacf4f1afa016bec9e9ba4a587ca2dee1776a7b849b51fe2b0b29b5941c832620732766d9b706c927d7debb735958b5145722e6843eb96f409fe350345a4f29e944cdd1645f580a534496afeab6c5eba092b7266f5ba586610e226ba14669037020074e56d146c6f8c4ddafb8bcdb77f8215654c34c50549f1b3db077052509c558fba99fe881030df0306ee05c0e71887ae2fa381e44ee0263027c222d230a7f1c2585fcab24301dbf398506d9741f6c7f7126bf84b934dfdc5a7f789a012d590b65bdfd729f25672dfdec668830dd1419ebea7d9a46be8800df1fab457032ee4af571ac2c1c66e754f526721886210f8a29344ec110f10740a6e0eb363513b144fd17fb4e1661d4329440b8d584f6bcacaacd4a35e4a11cf458cee8edda70d1ad4dde325e93dcb5a584e7f08b2f05818568e703093b6b0487112a35d1ff6a55adc42908ea3e5002c00c53f5d9d58272bb1abb5810d7ca4158445cc63c43bbc096d4383af16545870dc88d753fafbc10876b103c3cafe63abd61de16d3ffa04d81ae63d3a608ce2764b8eb0c2152c5b38598fb7c9571e9857a6e6fe6c49e6f9c4be8594552472f010affbec0e1b9ce2c0e97b08ff4ad321cc1c5eba85e03d1ef7d162703bc6500d57ff180a99a911ed2a16f7b71e3e956b4959c5a99bb4c6fb5fe669919ea1682b6e11bc39f26e9ea5f7558796fb4b800b43a63f71ab5c0c6953da92828a5ff6ba70ae72acb5a71b73638ff04df820c689854d7c057b0534653376f7a6cc94579ae27cf46310a15d3c52b4d4136d2f70d786e3cde8e38820c6cc924e463cbcf4d8d03f953725b9c8669df8913eac698d827dc105150c869a55ee85cc3b993f10cedb065905cc7d10eacc9b1244323357c67d522c17fe82bb1602e1e65455fe4b82018138dfa4aab5dda427858f51ebe156ad1efef2d31ce94f3a311e6101af0f807a9b8b7d1a5057b16d6fd7b8cd21118a3217d68efa690668856ec2482a18e11cf4a953174a064622fd0c90b567453d2141a6349b93fcec41fbdebd1113a7e8546cc3dc4a7250061e5d3a682a603f8903ecacc7e6e8881356ed16f9fdaab33d6233f23722979c1528585986e08ace267ee66de1c8baee80eda2349a7421a49d80bb7874297f12da64249df45e7a4c10ab9176f31fc23502f13e361f48886a210e35c1d0c9e349863aaff428006d2224d9e27ae2163e87aeb48333ff7ce839cf49dc7f0b935244dcf47812f2021065d8ad9a81ebe47ef52e254c81905e662b632419c0922248234d389af9a2a1daa5a36a0949e83e5e3967f4101e324f53c16558506cb7628393ffc1a4d2d61bbb9dacd6199ee53e0e41faba8572eb97a48834d8cf185bd72cd63bdd32218313872c6402e808a67f5b0b0ed14d7f87a7bb7ff688ddcfe316dc97555ca5467918c5c4bbe259da4eeed522b998c555c02fbe77c38083d5ccd29b51582ce3d696b043cacecd8ef661739bae50251e14ccc1fdd5dca1227560a782b969850f4d9c9ebff6faaa154c70876443191209478461ffd787d4563f370f19a647fa608aa58bae84b822eb5611fd291e16010504ed6ee8529616483d23f3f3d63fcdc479604f12f4e3c0bef92abb03bb5f1520a4605747b84d9ec7b2ba8e318f723ea450fa67a5816b6799dcdb7af535b038c42b96b75e4a434b7668ccc75017bc678150203ff33278c777c03fa26b12a875123b17da8029520a440bf74d8ee2a5fe78a1347a4e1bc518529533ded6b7a1d1df1eddbdd6059e70951b2cf22ab72c9d21c946ae173641318b3a4958e12a954c60766f5ba740c19773afc47876999e0ce00d84b94fecd118ffc9958eb62bc834122ae1520d607e071690b855f930bb1d309cae2a04ec964e1f2e8e4a5e823bef44fc19cfc1d66eaf8d48917f82ed03cb64c5e06c49ea563419d538cf559abce427a093855b3951766ebb17c179364cc75fa9af40053e1638ebcaead601c0c53a1503fa270b700bc28f1e4147deda651c134c86fdfe4b91c8b6923460405876d3959f6eae037d0d7829ec6978077adad18a5f1d84608df3d85f4f4c676ea0ad6e2fbd70e3fbf1106938cc08f2f3f1b3881666f579da9186f9678339e8f7ebd7bdefbb39fc09e5a105213e5bdc2bd9a8bcc2c3a109b17bd041b4486cf845f5bcf8c6949b45181a73cd52c03cdbfa6993a5c57714818fe5ec5987c0a778f6eb4105653af7f38cef999bade7a552a3c9ae3a619d1f148815490b3e8169cce8043d17aed8c7b940178209ade6505da938eefbac419a04883da30b2812b75a1058ffc9cd59942a92e7af8d6d8c74c94be2ae0c3f6df8709458adb2ca4d8c9e94c6ab83c25ca3ad8c28774af3a1ed42b94651bf297cac1313a313428fc6bcd275d43c5972888824b53e7bccf0e1f1bea3cb0c646dc9532bcf2444f387d8adcbfaa7728f720283183452da939a4757c76a20f069e5d1f0bb30dad9f9d57a6a7594e6b2df3cb2dab1801d3f7efb22002a3bfd3271e4bdeb6b7291c7f4ad6d95be4c23a5f8e4c4cfe3bc0f9f7337a1d71cebb52ed06a3a2333825b31b94cc96dc008bbcb7a3bb689f9896bca85eaf70fead7b5c49767c5827c34e8ea906bc43fd181abe72912c433266b6562698a164169fbe8ae80f3521b34373f92b2b0737f06320f3f78cf3b97166c680402ff36c90a91b0a838c371d873a81cb318309e64c04e986b3e3def6f303522593d8c71669e54e148a3a297f05472c0b240a6585c6f42dcdcc40c107eb6c2cfecb76fe5b8b0eba1ffb7492f64e8c50bafc65a3d42283d45abcd949c1d39ca18ba99401585880ba44064f966439cfd704670f7b0a7f607c652d1c3f2e1477ae4b23983619f20b358d0b931f98e224b08914e8318bc7c13466224c76e0f0c1bab7c359ae70999b26af885db6e738dcb8ef78dccaec5066ea10ea43ca5f51b224acd9a153be1def8bf95fb16500e4954da90009cb0dc064780bff2a304c5f50a52e54cd09de5302b367fda308f04ee22caceb4e84ea79f69c64d21643a35eee0c5dfba694b47347a1d45b7365107471648751eadb34080d05b0c5647c9788f285ead54ddd6740efbdddb39dd94b3717d284a759e35a219a1146158fca9a0939da3ba03ba0367c50f24a973cbb826a4e1738eb0617323d040057fa2166183bdee0d333fe951fd9bb4a8971f326336a05a1be2670322e29fa395d260c94700e6ed49073278f45fd838117f35675c2549a2f0f1b7989a19b695e0cd92b871b117d83b9f1f82f60765087debcb6ac0ba742e0674dc14c280a2b8b7350ce06cfeb21438f69ece791621ee6474649308e16de6e94070effd755920d8325205109801d2ab3d0acd41966cb280e371950d38fe7b92d9a7a099c0204be32c194764dfb1b617c862f7bcd79993e3470a77328052dba3b4e8f115e75fa90770b921ddca2f3284089f04ca403cd18a0772fe4b03e96773672947d6b2661ecd0ff48688fc15cdffce9639a592d77e23e6463ddcbe0db532ea12f4c8e51a84617ee1a9aef8bb3cb193bf8cf1bb9ad7a93d84446c352abd31f9ea60196d4ac1d3cc71fcc406626fddaff7a12c742f23da3592e8eb0f9bda3d874c887dc334f2e858fb126e57faefc2f198c4d5aa29c2fc5f468b18f73f17656efd6332039b29cd752a572260e175d24f2cd1965b6f6d54cde32b5f2d616b3323a0d41e9dca4057d8edd34d90e333a9bf19ca56ed242689673e249508c28796e0cc068ec872e9c72eed1edeb80f1ee792ff45f13f93d250cd9e95af9cffe4fc5172dfcd74684588c5e5135545d61f5afab3c3d5dc0577ae1562c3f5c4d8e302b9b56d87ab1f1593bc592762af8dd57921129eee981174520e4bc06983bb1d54986749ce927f9927cdc610fae996d10c1d131ad62d6610828d5ff2fcb18a6d22342f797871789a3b3022eb990bf080d3f54733a2a6dae0a93ed1adfd48b80021e0d875691833435a1a4c17d984fa3b26e67176119f8bcc73be47f859b2c103ab837027c87d3f4d19f90416dceb7a7ff13e1f46bcfa09be4fda62d7e63bca6f23963a22ed91049f17711f0cc39bb2cf4c701695e2e32ac359412cd0e265115a723339793655b02b733d3e0b2c8b1243788384638f50bdb8b82781f0221bc81ca5e01dd3b76a23a49e2e8fed9cd58bd3591ece039bea1065f2eb1cd5418ce26b29070a8f97fe6001151bb150b15cb25561abdffb126bed6ca3c940f3e84467c14d8b57a9b94d1759ed8f54f11958c5d43a29faabba162263e05f7014e45eb20b33165a5855d5c9d38fa548790566ebf6d71ab8797494489d1b243838db80f844fced40c1542dbb30cd20bc5a53260e7edbaa5748a749ce3983e3b66e0cb111f78d406835337d8412980757799f442859127db385c3629448a69b0349aeb8d9fefd54ae7ea3a22a765922f4907ab1fc68fdf68f031044afb2b7fef3fbfb520418ad0c33cbcfe3eaeed093c6f56512ee6d159e57a9bbd4ad9d36acc4c7519315ea5c6b1f2d90c8b2b3a7a12330f0558769fa04b9cd116dd915d0d90a736edc34f534da7a46963e2af93dbcbd511cec7e13acfb355fb2a53a833a6e0f4440eaf29546ebed92868ff923e4a383cb46991ec54595d0babbf1885814ea89436ff80ff856478e0ce377b5e1e505d4f9cd2fdfd7805ba46264e0ba6b8491402135f7c21f7ee1c1f03421c1036e4702f01dffc3a82c04be1ff36708a5923b365f42806f9c555c7ddaa1511532b7904d73f5a5197f0ec40f5e42b1b67e9b21ac4a4611802bde9e96e39a9d40e447245195b964caeefc7b929de9839566a46a94cfcfc8656620d47021587b9d29dcd0819cfdafcd5ffa2cb4419c9e7ad171e4623cc024916ef9a41d3d2ae31a3fd490a9fc8ca81e49f8e7cd176b9a8d975b5e150e7bacf2ec50f4dbb4d7c125020581f8f74e91bf4f1cbfcd6e99e0c77caf9618e21214f336174ed2a4c42b4438347a12244ddbaffebad9bce897c57ea3125ce252a1dc018f924808a5af0c16293ec58a8922916d04dec91152fff66e8243e06cee3c716d2b9b0e2a17e46bd0d584a3b4b24a7bfa38d51e1554d2975f2f2dc41854a7d3c6bcb8c76bf5241bfc904740eab61face07d97266d833941e7cb0bcf32c738d4bf4ee0cf1ec82bbc97cdd882078d1d632f43fc20b63d72fc0294626babed59111a9946126e06c7d7824ca1ea728abea2e8cf041ac803fcdbab4c62258ee51a3ae2ad27c2601479d06242620271c5eaf9b39e13a49ee5078fab658d80521f8d057367f7eced68ae45e5230d597e0f2d1fd15cea6b7008015ca80c668f3715bd552f447ce9c1383fa5c9f4975a6287cb49145ce1dd1ec97309e17e1c3c5948e826df369cccf597df6fd2faaff530c02a4cdb6fcdd73cc95d9aa3ad57cb745ec41c577de177b556b874796180bbafa57a5c47625348ea152b78518266cf2f81c38ea31d50446c90fc75ad3fb920068020c24bc3569d7828384a6d447c1fe4ee523d644bf08dd8dc55edfdbb89a8784277fb0401e3ba2976e6d76491f16c8ce560c1e69f55bfaad4581f164c9f1082b702e6379f6b89b92f9eb06d639624db0df664e0c1015ec9f77bcbc178209a4e0beabc8efc3c6382c9db9240fc025f89e6e690d97c07436a8d05fb70adeb67559a563f3cdd0b4d5dfc237c9b3f893c1b70f69cee5e4d8886732306bec54e9aafe6470740c6eac3d0e193eacdc9bbc4eef10ee0f6287feb8b104aa84ab48ab6b69ce074de07d7ca882a6965f9e082b0d4d609da096e5f882aac44f45249458e310c78706cac31c12559d85efbec78581c9a906797a64c25c3389322041b10401a52a690eadb27fa2700894c69d9793cd91894191ccdc63e73e688d4231b852d39675b7bf679a6ee0e6e9cc6920b5495b51cd0dc1027ec0d2536a7928f540e2e74a325cdf6dba675952253b0f9664edf2c9eb9f301f5c10520cb199921e02f808e2cdfc741d3d8dcbb434299fdada438c870e3d84419b58b303bc5259d3a1f9fa2582fa4c2667bfd096030b593002ac8a5cd2d31cdd6860cd0e3f7bc4b09807b2a879e8c3dc1a8b2ce2f64903df984a4b3788ba54f223db73ca02a72ae011714bf93cf5b241ce06f94bd5eb84017227029c66137201a9302adbe0cacdb22ad3b075cbaa8f2e974ef8c5e6d3c3c3ab453fcb635dc34955506e6191beaa4281bcbd1aee61f66c3d4983cb1a2c2e95ee7ed155e3dd95c059e74da14e16e9406da7df12353d9e239eb6441db535776c3de5d4364cb0dd07b97145062c403fd71326e8e4524726f07932323b042acd1feca6f410d54f04da93cdd2e849a0fba1c7fa1b9182adbdf2ec5aa4d1644b68e52aa377e3a99e51d9bd4cae55ee789a2c0c467282ef5e6baeeed5726ee3fa8ee6e51ac20086d769fb183860c4870bcd50466aa431676ccb7b47aeac2c7ff040cc3ae14b28ebcb10d4f8e9ed7a110e8ff990306f1d8a3b26470e3388d51d6c8e67408a32b683ed31491a9fe3544450a74dc8651fdb7ef3a2fd6bd03428f2c7514632f626ef2873f77a2f6afc5696aa153ffe45f3a5354c51831ba466a0bbee46fd70b837c860e09e15a51f1f956ea6dba1b46441775cc28b74a6cdaf785051e862074aa946e472b8ae443e2ec2df89491fb1117a7b4bba92235231e0ef00e17c75ae9420b84c2b114e08821772dd11ae6649fb63065045b79e6c4cc27235cdc421b97ccbbe3ef2359cad670270e4313218e65e7281d157a74cc99787ee27623054c5f7f384b139eb7062eb565e9","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"2b16f9e9479bcd8e2eed943fd9984c29"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
