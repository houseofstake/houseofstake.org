<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2c5511252a25c1d80886a493cae3bfc3aa4bb97dbbcfb3675d3c7f489ff19ad28dc35073cafec853ab040994ff803fc9e693a0f6565e1beed09a474bfacdceb0e0467abdb0258e6263bf625a0ce53ffd8ee10fb8c1c20932089d30637497e66e3f42de27ce9758790886571ae36287416d549227d3d2adca837e42fae646a62522c216e34540cc1563f0ed8f683706ed7a72450800bf8d7f02ac2ce96699848b9411e4ef188de5f8032a66ff2b5ea45cba0ed191431f7bb8a0e5d211cad70a2627737cc72e64cd034db791e9da76aa8c2e8659be87dfd157a013bb058ee2bade74b46fdf568d737f79c3d982842823dc768e916c120f8374437fa43973d83cdbba12a9e9bddbe2fe05871c8173056f97601cd6154971d19e75c686fa480f259179f0cad01cbc99a09680fd6e5ee1834a6f4b45c64fc0b0b6494f034fe6a58fe3b1e427dda6ea76e6d84fcd52f60a3155b6276b5be1119e3a889b745edd7065c83baaa6fff2a13ea24daa2bb232bdd1fd90de4b7ae2c85d55d2cb6f275130d2ef3be347a78f1affbf3800c320f761e83ef5e25d9143687d130481e6fbd27107ea2df62a0bd099c5d7aa2a965794e4ded997256079a78c2d9edecfa78dbcb86180d35fd4abce9da47811046a7654036285615b792100459da8e6b176546380e933dc25e1b2b36d3af658ff7806d48f7745785e09e3294f4c4bc26cb90012f5e5ed488d066f1b4f9c71947a4ffb11f8c74d90cc92c3b35f98af45225d9c3242c75a319eb630a1d86e6c4c3771a921caced0037a5434a5e623bf1caa8c0b147d8564dd301540a29db6e3c2c6c0dcb5020a41111dab0c0e46a11e44fd6cc2702fddf6e2f2eeb5660099b052ab7bc5fa9773e91e0a81519979f174b65ba867ad841cef7ed16cf4aed3b89a80acaa0771841dc6c39b68c0cf24b3f6cb9cb1e820cc2acf7b5cc81da102a28953eff0fcf34d3f8c093771dfde699d74b27b56d09de6efef9d5a79fa3a6c736d76cdbe3a7329d05e1943cf82c3dedc7442f5205a29621283661b0dae4af6a9bce6284f8e7f2aead39e4ce527baaf34b080b3a34936172e2a7ceab52cad7154d33e7a586a51e752855fdd4ea6492e8bdee62f65352796e9c48a627cbae46c99f0769a6a257ba98f1afbccf26081b774c973280a6142f29347fb12609fdc15a7c270f53810f555a4d85de061306f43654083528022e714dffb0f15eb523a2241140a7ea891dc73e9d4f3030fa3adc5c6540c35696ac3c4259ffd502b65572c99d5013befddbe6093cd011a7e5688ebf308383ca58e2fe3a6fd770432afc883877acb2920485f95adbc8fe22fa6438aaac32b974deddc6f5c93e473a15918b01199f17d79c3cb383f4f09997a24281e2535ab7c1474817ac8552fc9027d6663fbc266e0eadb17f467217af40dd1117b2e37e840e13ca776fc4823351beb44d3517c432965345922771f242b6a55c42d53f019ae51a093e4d22e0d54b300d94c7a9f4db40d782a27801e20ffbf2d5b654fefe3d548aa34a918a252c7ee627d2ac5e30c0b8bf15af99e1cde9a687e900fb6cdc184497cff21903d36dac7f4409e68c862ab49282430cb6c1bce458e4fede664ba43cdb2a29d34be76bca1e0dabf7f6a98107e273fe34164e41cc6c8ed785e8b5020195215026cf1b3e09ae24442e2b950d0b0c73a9a0d04077e89d22ca4d0b471022be7b976e5419f23bac8ee79db1b20443a2ef99478cfa48f0a4d1c11ced62c27819dd2786d00d38191eb5a5faab7d0d8814d67d71f9b65114c888d1182ce15a0c3b71276426fa2301fa73e0aaa8711ec44e04cbd25f74b8740c368fce76b97b6c6991ab38b7a45868a38000b732a4c3933f1237c2e5e33e83292397d1e7370fdb89ee3399c9fab965a1297dd71600b8996ab77b98c0123c4665745afe3b4c906504a0be12ac363ff4d6e67715ed651fc95853545a09154bd35596286cfa6bfc6a7c98c3b19db8df63798b9b165a15635bfe621b17ef129104f9cb1a660edf49843f63960e780f448fa1ba8224b02890eddff540ac2a9c6699f7e4a99ba105dcd5ace69d5021f3b8a1c6c58b1c4259823ff05f7b88e58f80148017b70fe2f52eaf2cf6e2472a2aa4bf858cfa57afeed733a32835dbcbd7f4ee19e9baf30bc50d35d51c08c5ffaace9370d8290335f604e98ddbe0ed1973bbc0ad6b1bb7ebba5a1f3dd889007e3b8b522d3eda3d8572cd46d769b709340dbfd3f6d3e2cd4296d050e0f18b7c8d17930498763476aeb8db2a02fc3d181058b401877f5f2fcfd2855b71f613498b2f34242c4259fbc2bbc7cafd83bff0d4ecfcd17da76ef71fe8c538ef6aef85e66908893d85105250c729e96c17bce56562fe5adee1fcd459c282a5641122fd12d011583c5638c65d8bde121422140b6f674420979ccd860081680a772dd89e9feed29db22f62ea91d6817afafbb8e877bf25f3a090531e4d0f465d44cfcdf1ff54c80b5d5e2a41d34d88ec71d02ffc60227d60860e256bdd891a33a72e26207e5a77e4462914f276a313443f136bfda90e3d55a2d1ccf2cf5f6ac3d9b5acea8c8efd5fdbe30f2eaff365bcc938870d00d0ddbd9519a2db67b0a91459eeb4d9753423d9198203464c258fc92d3dfc0478f88836a45410c606322cf3c899525bf65c575f23864191c15e70c9fdc112519551196a64c27cc7ae7e1eaca67a41d0205af3916ac9a63fde898c054438785ec820eafc1cd1aac322969a6621db8db5803c12fd25bc8b607227fecab94aa2a2b8140a7c6fde86cdb07a26dc9ed1b82fce7ab0144a7d2c3c806d6660fc23f5e1066260442646a04b9aaa2f4383b65cbbc5e27a16e5f7173b849549921fb6f8b39253522b5474bbe20f951f5ac9726f94302d9eac631466ca6d7ba979477f66289672940ea6594b7c8b2c32b575abca69161971e5e3d7749d72577f980e55db56ef4e833ed9f1384305cff4a058b423905605425dca29630bea853f0d7194341db07bd70d54cf405101a4f93a2de4dee10c6f6c31d905ea73aa249f1ce8d51a0abec5d70453e117115fe041932938f31cd07bd93416ae0b120d46e4515f1832badfd9d5bab2062ccff98898eed8b17af9e527e9fb16591c429d1103cdf592dd3700038812c288ae83f2b8e1cee7c3fd2346dbd60a6d6196b1a521b5e900c2605ff2019a42c0f931c6b5359763c976ae7f79118952563ea57e3d91baca62874b1190329a7e6823a3897df4edbff964f577bd3619a884deb0786ef3f05c7a1d1d004d668d5e9fefa57d85c0594d70dab151f8f948e260d50038234ee0c193a0e2f37655eb6bfe259a5de477275ef70e51423572637f177d8711d1b9f46c64c3118d76d2d3ab3218adcb23ad7e1ca1961b6f2eda3fccae6232396208cdd9207f0684f30ac916d2e0d3c434e66cd80a92ee866080aec43b002fe2141a87a0e3bb2136a72ddadf7418326d3fc926817eebfad51fca00251794e9cba028c37b6b08cef9aeb8256cbefb7d8277a4c1c19f73525eb9ab22ce9cc5a1c476cb7fc7562ab9878684dc78259bf3bf968afd9fd99d6932e8269a36809ad8b90739d03410effcd1bf2cadc67fbab62c42dc3cbbb25aa45df114056d7ae389c0e894a0fae10f3809fc35f47b709ccd88c2302891e7f40fe247805417a960eacd6b653c8aa99c001539f56cf96f87870ada26be1f88bad1d6c44e74e435204d4d0c0a99de829ef9ba593fe57ce51955d04ecfb51d09b0c6b1ef9b295e92a6beec97c0e676d7413d95c6bad9418613aba09083c9ce8d867561c9753221e6d5e8414dd82c5f1b585a8b35a5a58153dd011f2a3502f4577039f9d60b80f0902374da22da021c5698cf96da965432e783a69112699110b6eb4c9092813191189b68cf7f998e5a39eb39373d3d3516a9f22346ef53c1ee5fcb585ec48c8be061a243dfa758ee8df8c7d7a298037083716d6cee360dfad5e1a20e55480be59987dca0888d78e97227767ad33c8c56863f6a77525567c0a66a7ef32aa487e4c61c2b0aa85ced8536797909038261d9c1f5f4ad45182c0b398de6e023441480d124ab90e3f2452726e2d0b17bb5965d6be2fd3ded80b15132fafb9db331d19ecfb1aca2c5cb70b58322f1e06764a800a3917602b95bf7b5691bae3d9f3cf5aa5b8e4a3a5789599c43b79519b178ef69f4caa7bf12b08d5f4229aa4be75a3b4d150a1fbf52ba38f4264b8b79b1a0bd4b0e2902ffda71a5389b8b48ffecfcdd3dcad18ba2bd52e5d06d4d171b283a7527b5975efb73f15ea67e11922f67d6fe3efc9a6c17d353b49642bf99f5500b48be999aaf1e3bfaf392065c86be5f0f7fc6747d12961d75f0b578042ea74f1ef76a384912fe34300e922802d1fd55b9a48c582d05b483c35efe2b150a1ccb8b4c9a91c25daf2eec99cc4465aa5158de89514b400bcb1305523db08a765ebe6fd576d7827290971b117218a62b4919ffbabdef012bc3484fcd52472205629f928200618b8f34f9eb9db75305f8e7e3cc1bd7aa37d5fbfcc048b175f8848466e451cc6f70b0039e575ac4579510af2c8336431be1f72f6a96572f64d2d909067ee79cb5306d398016b3dcc9ebe77fa311ce6535d5596ad8b2cb4d54101e85253b4f904b6b4de7d8be5db75716d410abe0592795afb443e8795d7f66bde4132d3d0f23dc023f9beb6d29920812cf8fac3b9a8b5e5f2b5355a5654ef35bb95f6e1f5c90fc166142d95c2ba1b3d0bf764997149475b4f48457e73614ff83938e546f0918b14426846dcc2444c96684be722d5c81985cf14d5d3907755427b190409e76377a4bc6cab4abb94c32de28187fe1a791edfdee83e47e2930903291d6ad5b8ef6f1be464762ae5646728bfab0d65337d272db946afcf174ce3fbc40d9a53d91873e78ce02802a36a3dbce0635dccba975f314cb3fd66bab322ebdf14c4f2a1cad98cab51af5432d72a3b10a504364c6d1df08e865e3aa37788c6889e32ac5b6704e779a5a10a64fbdfaec88092fbf2224c3fb9e868b16d6f78c879ddc44f5e1362e018eb6f5614e7bcbe628f157372f7fe1575320c0578576b4d912661a4def3ad6197eaeb9da970d909216f8b170c0d2bf057d93a4210e22b6532e3f1da41029aa7dd50dc71bf7c177ede7e13483d2788ffcc8c1b3055183db4936d2d39900f6acecf8e6bd99fa9cc9f059d7373800a1ed3fadc21038b93cc2f8090fc9088309120ff3401f3ac11e9384867a651c13534d965041d1a402d4219dcb6ffa3e4b14f79ce2ecec0645e112789403662c169cc8e105322caef0bfd519afb70c19631cbf8744a61aa3480ce99192113beba722fc329c7d8421dde7dfc96427daf94912fe9c560e99f933f7a82bf7ef66bffcd304c18fcfbdb0a92caf5850ee1b5a9909c11be337d118f9633edf5b5fda5c04fd244b6cd0d01bfebf7e07a15678ed0870097a653aaa29f024b3e22b3a7b66d9fcbaaef752dc2a2a1623963ba8ea5856df511eb830a869937db6869ec140cbfff68216f93d27efc1641dbe64d28411709ed91a0774dcf487d901901c30f9e7eefedcf9b67519bb6fc2953199fd573fb9cc3be7cd506066d411ceb4cd327310b3470e33b0382ea764918d6b29ae4a8bc08a6376baf4773a0bac819e6fa2ead4401fdcf8c7693f4e47ded4524afc2cac3be9e664b04185c86ab0580977d3f048cf2748d428ac045b2b5e67ec81648d460d470dbbe90bd7578a218bffb0f9edee797c997175ff061cdc271ee7b42179a0afe77e2bbb9ef3d432e9f8d7fac0e90ec6d2d36c076d983d9afaa12fd996f4d38687d3ec1a03c11aa6e2a63d10eee2ae0f311d833d327e267c7567fa45c34c0970e8067386b8e965a7cd836e4c4258689da0201f6a0b3f02d00a6238066aedddd50c797dded4794ed71b2951d43c8b88f52cc8ca35945d9bcf533610dedcf2bc7f57a4ab36a54566506983902f69139eee0255abe19a34e2b856d0962109fdc9c69775f5894861c30987a40ac804450da1c70834cbdf51c618b12842be3354a3202f47d7b2aa4a58aa75c0cdfd9b019d0a3d9b705952b2169dd8bda3ca0071f31d012d6775ce2eb1406246d3a3200bdecdfb1202ab9ef216e1824bc03d18a84ad6e5c24d295c96e93ecdcbc9f2719cf94109822aae431932b3a5d81adb5283a7f4d4b6d54046d8b5ec5fc46d2a1e6fe7368142cc389ef1d332f0103b88031631f5ee99f31d0afc47d12c3399af8076bf92e4511294ccde6c0758dd8fb93cf6f83682795b72688d567dcb5d880d6b877709cd79e8792f7dc0b8258d7b7d5b838dcad2e64b0717abb7e9492c0cf9c9c3edab2216993a6b6dcd4e88e382d0df69a44c28a0fc99a3f95e3dca419d8b67c77bc7153461927c6ac32a44b489488eb3ecde27320b1deff32b87e6833172de9b8b8d3145bb1d050e0701417d3dd3466096868a729f6abd851536eb3c87d355389b61f80eff07cea163e962ae8fce2212da7766ca42f8266d802dea8f1ee08464d2e242a3a8a21be00975c61ecd87c2548ae42e03f9ea014623ae27fa38f590215b005c0488a183beb0f3a41ef9d2f1c2d610566d0af8b3fac1d869d9cfe03c269f9d07c0653766d5b5a85c5f946ec99a7db18f5a79ffc9aa980131c2266a60afdccbe94f55e21c58035c31cc6f17dab341c7555a54955c5a09a7f5d02a72fbde7ef1dc3c2fb4d8d8f1a52624460787fb17697a62494ebdfb96a9308678999bce383524c5e8c4a9dd30dd64061184dc2b77edef3a6cd2afde71ef775e922285a809a97b72e0dada6e84bccedd8161a92b27ec51e6d6fdb928169e52c58d30adb01129fbef10c8065dc0b08a62fdd5410731ef7fd297d710eb52c366f885ab0bd28014e0ca69fa6fcddf6bd1d1d3694b78afdbf93870ff33d14b84d8898da109aeba7915243d65551effb8cebe14804b8bc84af600dca24550506697510bb55edea246f03af60ac6f36b70abbafb1c03d13dbf5de1e3b9c7c8256253756712d95ff7f0453ce3e184a35022f23da75fe8b06e0760236949c4b9f4e793f8891651fa67bfa08efb32576ee50ba8b675ecb85dbec0cf2114d5e2637af836eecacfdd19760883d53fc01f5f27e2e6004f4e99320f58cd194bccd082f8d01796220e1d839a0a278b376bcbd4dfcafdab5ae9fbad3aa9daafce5e5e69344e706a69f2343c010b2ffbf2b14393f8497e083123e5d0e3945d14aaebc5e764614230a3b936da95b05274a7fbd212df901d8acfa051a71fea6a0c797142aa19b53b7b7baf02191002f59136d2660493ac4fdd94f08935a8d1f4c708539c5b8a7bae4b97e8bbc4adfaf5d9ca7c0f17e024d05b071024d1c754487ba1f22d6f6862da7eb708c705525cb23d1e770b98cf37194bed83314a13532f897c419ca8af8715d4bf109d46748c73b25389c4b59e0d3c8d6ceba18e7537215a4a424268fbb63d3f6d1a473684d55ab1cd65d7aa72ce60fd36cf031451ac21c07182ede8788ce75ab3ac8c698a95b8752f485c54367ae4b6e2941bd1b29f112e5910027c7b5b00a43b482e8b4755155403fdb8f782ad6ebc0860313aa211ad22a6d71f3ff23146a5e50beef1f34b8cd109761b6630e501be42afa455bb40e89758f2e8fd45a96480fd96ac0d0d89b8bf7905397d80bb4871c9a30881f9b669394e079cc658487aac5dd3ef58a089fc61c64b47391d4d90c4f15c05787024def8be808d36308b96f2e30b0bc2f366e5f0a911b976bf218d7ad32610b5cc04b1a06c04c5b511a4402e5b7c44a9533336b52061c39028927847279a2e2ddf967fd2d5ecd1bf8c0cd3152060b20e75bf04ff1311ade7e1bacdc9b8ad66a031f6b620125b423ef31d9bb37e2117ba8bc753a755f88a120c0e06441c2cb786c85bd5571e247db83f1ad4bbfdfff2f015b35280faa5072db05e8259358f2a7ef415b737d70b6cf518b2fe64fa91c40a95461b70690576d7355fdf28bf46a116a26ea9abd6f8c51b8e612e2d0d31878b4b7c1b10c3fc6bce9ee3ae57e53eee39b6e811acb320c510d927ee72d04fb8eec2169cf24a324dee816a72ffbcd7d26879cbfac07a7348f027936bfaaa0de263dfa88ddf226f3b395798d77986462fa14a34d69e47f3525db8b5496fa43b0c449831c1224360e1049740d0426c2e60010af8f67327ab777a32b252990bccfd63ed227b3082aa67941932b140f416b7486f5aefef0145759e5d4053ebb70063e6c2d2667a713ca536bdb42b2df1ca49cc8fbcc71e8a564e7e2d8b35cf76b3782a0b79d9556069b8228598181935024c18a10c1ba55b01d21af7bc6b1340f64b7fabd445de09dccba12670f6c3e72fdbd7dcb6312e624c3fc56340abf8577806821336b0d57f86786ddebb4ee50bde7e55fab6cfc5b810d0c6ed0cb6d35124e6ed15f5fde908a8c3633644479f20c9c4bf6eaa5885ec8e1e3faeb227a4ccd9681e65efdad94968190def0338caa0332b2592a1719377abb2e3e049b686ddc3e7a860b4a5f69dc286bf2ccd1cb0f42c6749efcbe516f5016ce1b1c6d9eff5cc9beb9bf2b938c9dd72c30b240b9973ea0316d98036a97cfb0f303b1a9aec96d50b4923d4ef1e246e7aab4641fc8332eee2c4298885aecc6da5ca990fd6b13ad26945bc2745711c7e96acd1e3074c4664a98562cd2fad2a58de7f8114099ab133b7e9b89b2c68559863bc7b1dac31eeea505d79ac405d9080134899e2cf70e7e5aa1f9fdfc8f0f4797a08abca310fb5d2847a1ab643a96dbb0b6e1ae8aeb821934b9401191439b75888f05cc955faff1a3ed3d24afe37937d00220e97841eec0d874a10d1012f35bfb1b830d59a2e07003f0debb79923187a9bf47b91fc05c64bc751e5467ca12ccdccf72ad1449279ac42b56d0d1c03bbdf08c62c289eff15de8396f5c93e3ddb18ebc311eda056b31686fb55c4ca1e0bde28b1e86aa88a57c0209b5446c6c066fd64b514722c053f28e652878172fab41da5f49669ebac2abc2910493e66fda57113b181b029006e6adae2fb180b20ae99c036ed97e98fd9a4dbcd54e9c6d6220dfc4e40465805e411d923bba028b3e9d11a9022e4f6355fc369983eaa0f5cae1813d060c298287fa36efe81fb308f96ea6e904f38cacc070c67bf1e8eb75d6db8dcf283ad273571eb9b361969251d8dcbafe7cf28857a55c9c41bfe670141548ef016b47a03ebae9f8a8ce18c7814b6aea6d20c5ba22d89fd4967f686a5e15c86c4640edf790ffff1bd63cf1d19ebda6201a5939080e04e3b8fea4f446e1a55dd5501eeb82ea694aec34d2ac14033582a5c6d8fe43ca43b5e0c73bc6f00775f153d35dbca00bff4ce8eef9129feeebcfd77ea82fe8b08ed1967b64835d5bd162c3e1358e471c1b2f5884c0e77ef75e77a0cd1de0e3f5e4845f72bd9551397932777ae46b022258251d4e3f783673a5a1f2e6832e2bd77474077c7b8fd1c482430920e4b850f6e19b9bd030126f279c9bf8e582d0dc8b690f848f88985c10c8d12a04bdacffc216adf4f4e9d2dc12ede8d65de75bd506b3de53411b152232a5a46d6aa4d66e2be3c58b1cbc4ec1be05e586af7c31e54ea35f01c9b4968269689ceeb40f33c66fcfe697f6be6269c3b697c447b5998a861105a98d3f46cdf64420429dfafef3129058aeef4c3bab8635a0656f457685ffee7134e0ab120191ee67271439351ba069cca3df3427449ba0e8eb45046b95855ede7c4f8043314c9ed9621af08b2a1b16adf5b62f4f8e0019938fbf2b5d0eb52b00145121fece2f96cac80b9697a309eced78303e03bad3d035837ee317b672bf6fd864cf4403b5ffd00ea78e81b53397cff53a9a1ff96d5fe3d7c9b8b6d39dcf3b3d47cabd0511675f94d6637ead434ab123a3875fecf69e4058faf1d5cd9e9d879443f1cec191c9c6ef0212615fbbd0776160f8a1cde34d0669e07b7e4a1649bbc8a3927c5179311d96da4d67abaa5d9fa61b50955f39303b1dddbd3b0f01b4fe28bb7a7523255520c3641b88d721b7271b96d5361a57d65cabf5e428e80a098a242ebffe1a67f4a7fd54516a29513a9c22ebb4edb1001aef8ad02b37f72ffde8030b7f63918937a582a7115b134a640b30c09f85b87013823a3414f8932c30f0178c96153abfbced7dd3db9484f70be57829f396d5620b6a7f633282026c0d04e9a6b38fb7c636c6ef6742c79bcd4e6d0cd039e778faf83c89fb007e2a72eb447c5e13589fac00969a5a2ec43649302be1e7976577b391c5b4547cb7e2e27cb29b5f77763bdbeae24c9d22e279559ce1375bfe8dbfac00e8ac5f23a7cf6c1b554af62a17dda2f336ca3528d1bcc10d74d0ff030b98774dbf8bb904ba1b3d8ef46967bb3f5e48fa17609360301973884425980d9aca4fec032f89a61caccdda8a1af40e20413f6b543557eb358d91d2cd4cd74af84cca30c1ee145622e8e6f1550859e7619cd92230a35c5d265e5c80e39ed5f0b045abe7dbd3a64e920ebbad09f6995533fc5a73b23fac280f9b1bad9045804fec2e2bb274667ec326661f3e676bf2ef6cbe3e79e96a2be8478c07d3f36c1041bc0143399f4a5a3ecfcc297f3658510dbc8e2b6a5bb57df887718efaaeed81979622dee9f4dde0918e15210a4b609e26b399b42b9f5b7a2af52248bb19279f022b98905c83d7d3d7b3ada062adc1c0c3b5f6b014e8b40ca661548de207e9bfb1cabb5183cdd3876912fd03323eac6fcfdf1b0974d7823a90546dd9afbf8f97e15901492a7966fe525b844f9c67c91620d595b55031412f286eb85e562ec524ab8126e49966a0fe908afb4c9c99bcec236150aedc9d539dee0649cd6e64700378ae54dc82bcf2c9d4017fb309554a7a8f61dc1e999e101ae89160a3636f4fcb5aae049b2ad88c1b12a717b64006683767c9ce967649511fe5a53e88820bae3346188e6b07aa4d95ab96882560b0fe51d57af5638cc8dd4b69b853a95dcb18252c541778d4810fb277c01357998158b6375f8c6a71c0e2a39f79198eb65fcc8cdb79a5e1d5dca09b509b323876dfd1cb31de7c8bddf09ae58443a93f2031f54a63a94ce7b2273ccba74117ce62a4eb4ae841dec29f8539322763f490c1022f5be646e96c3b448ecde8bc8ec1e99a88f9c825fcaedb49cfe69d976a7813ff0bc1e6fb314fa2c5b807a4e3bd7b73ae4f1c9db7a43855a6ff91bdb4be55b76dc220d89df844ece8778087ed2bed2c6465272cb65fe7da02bd2de6242b63802161808cce9cca1de804523019279a8365bee3670ad4049eca53ec478911e29e55df03e5ebc96f30ff3741f168428aae7c44c85b0a84da42920207a2784c6f84deaf90bbfb989c10854fe5dea4a2d4ec62c012c1de08a0a132d766793ed76669af17a7c01cb495dab8ca66aa69275b25e9996e0c9c35e981b9528021bae5a24e4019301e75df076b48e85b13cb34d29d58854cc9ed5636b0dd0d9404d926cbed6fce0746aaa38c8f50c478dd25377f48018b4d7b9e8b4aec247e7ab0d9449f6599c9b12b7ea8c614e9af48213b369c45c2d3ad049a78d6a72cb96282cb80a1e2f2fb9534f3d6ab9c02a5183f23534f67e9e7d8057743e47fa0d5d177890782213f6637d92660a90c2abf30473925c1e2d420f95050de8590de068fcd3cb4e76b1ce3bf42a69ffe4e33e89c14d03fb818a3dfcf9646be546dea638666849c84a0ae8615d936afb9d93771b05632bb5b626b615fc57dda9352bac3372532568575c608a15a58eba4035e787db267f6440222f3c27e882f88b89b846d169e48912ec8447c8b028fd5316c79eaf2b0a1d42bf68784a2953013a268794ea2bdc383feaa86dde20f78056279001046fff70f0196feefdde79c082c4e9bfd345aaa2c62d54c045f3fb64d8092a130b378d4082a05b2e3be9a1ebfa8fbb8d8d70292455d983a6e3405cb770bab7dfdf88c4732c6d83503c1831bad16f8e7e0a42779a656abcd5dfe209ca83e91e97334501e4a7db0001794d31c15b4d905296d7f4d289c8202aa300231bc811ea31a8836e94ad04b13f72da97c9986efed55ea4ed29a71511100c0ecf8fedcbb5e3c109d83622b3dcd889619c87f98cf7497646f3effb21a67c3d24c6035cff2059d7cf28e985558d11f0630487f422ae489d6be9a5adf3073b641a984c697cd4c18d6a00e86e7eb9764b32fb3d89d7164b697c054e8e37e7862b8fb5c154f7bf555ecd49aca23cd0198614dddf0db10a8e685f64c1cab13dee8670146fe314b92ff411a7936e705e8ce76d5e2a7f5d1d00a4568ff7e692e716236810048f43caf93f43dfc26d2b5c327fe4836e1c71eb39c8c5d33aecc768c472174b66b7766552a52aa1dd3680a30c5f6659a6a5b555a711c91e85afe4ae9bc3da1d0cfca0698f99cffef885979ddafccdbf1db618c8ec7f435275e6a917a3eb59b1c3a4f998366315b4e851de2d89f1c900e1e1aed51914522a271521e1711312611c7686f8c35991b7f6b3373914978000c6f7f4c4ed252c64f9379ff451a8f8b7fe1bf4c9f78e3208ce748702e41ad61aa7abfd1e5dbf5b8dfd37ad4630cef9f695712fe1144208dcd5700cf665a4354c1d88f85fcc18cf3337530bb9503d6559724a423069e778fc3abcb941732cb23007000d9f2def19b33bb5ceed1c10b89f0f28bbeeac1761ce85eb0b2db4db5b1d6d0842fc897977b8e6f4e8888d0101bf22cc3c107040ad01ceb7edc3332dfbddd78bea4c9938c9377e8fd8cbf811777dbf86bb1db3f813ef963431047d1be0284207651f3fa96da0351e94d926166bc6aa3ee38cd311aae5dc4374e7c248d239398f339cfd58ff85557d0dd371ad4773ab6b15299c1ad0edd22a447bd10a133d1bfad065d11df2033e7fa6770ffe8469d66da03082b2ffaf85b6aa864625276a2bbaa28d20d176eb3f5010f2e8e8a2f0d344f87229820ae63e0370beffcb66b894ee64d3a19725784f8893267a47bf8637540338e17f80899eca0350bfb021f241c4b7afcfb0692db88a77ee2e495d9090bf8fb8cb5aee9920951957e6b4cf5602b24c85129743dd18d46519cc0eaac4731d6c94def7fb30e345e421c616bfe590e81080cccf43a060a125d94bf35ecd2499442943850202dec3712218d4e934a3748b2672d72f04fc51d3b92ba5e2313385b93452844bd0cd317ff3d572c52e70bc7fece86d176066d89329bae3abfd201412c5dcdafef9bf39fe27b31b6d865ee0c0fc53f51c77e880622b76d1ab399cbfd52f4af619adb23336b1a1e6a0e5536d5fee6d35c83dfb188db1236783576b628c8f6eb361438732214c35e059d1ae5e8f93106c369a0a307a2657b8494ab14af4ae281d0b9528507fe31781f1233efee02c7e8393473272bff996982ca7ddd26b807bb0dedef7e048c165fca51f3775385722a049e75e32f4737b844764ee62a046f76c077627ba2aca67ee54c648e910aa565eaf30e11f4d9a62ca673f3ab007d37fd88a750a1414b9558897e3fcbcaea7d0eff63ee248f578931d9b644e8f5e3402a46a8a8ea66511738655305a3162c9623b909930db8d9a8e1369e61fb3a259ecb1a1c04dd27495a0280da003db3327896b0aa4daa23d35422acbef2b9d94c6d376034e20944a164c3c24c3c92cd5e20dff6e7513237ff5e110486e3b726ac5465b6d47bc8af3fe8870977cf0835839a6a424311c914f55e38011f72ac7c17a9f024fbf55d41e6b76da277ebe65fcebdd4ab93cebe646a7842c5db748df1f56f728c4969f81a2f839d74f36377acb4ee3b92f9147078ab1e476b76af7e76d1f4348cf4349cc4c9de546ea39c295b9790280464403a4288258d69ec55bcd4c5d57524907cbe772e5fe82c029359e4b155a047dda0756f750854d0926d365ce3ad83692c27292c19070a261243ecde4cfe33447121f33dfd8dd74bec8abe7bc886841b299aa9c35419db9a0f29141aac13afb6fc1b6ab34713a053023c6527ddc986cf8679b5e8205205426261673b75e665fe83d058c7225b4ca1957ba2f0ee085951ecbd99e39b0ad5ca89421504e720228350e0fded739eb531358e3629c87626a4e0e8345ac34cca9bebba471f2ce6d16b053fb2a17fbc9d37b7e7ae399b778e811c98171ed30a25fb319830e85b6b3bde92b28ad10bd8f837bbbe838792b630de5bb12bf0a55ae0c6680b344febb7abe95d92a2d4657d021fc5fecc006363230d1cb87e758f9d8d88f14f4e767f10931b9551078ce4b8d2394d71ac5c0f7ef17902c19f9609533610e2ba643bda366de9d1106f45f07144b9c5f63e133c57a5cc1b7c9fa9d4ae676c3b99b5715a0fdbbd809936680e5a3c619fd8f41f92180522750832d0ba2018c9257c52282e646285b51232a693931bb0aa273b6517704ce094f88bdccbe7c0b9bb1235487aff56c997209d24c9459b9c16b26802e3ce08383bf0dad8faaa1efad9c4fba789b509bb0a929e12078eff43bb996ae722b14796a071972033a341bde5d4d7dde2306271a9cc1460f6546231222d4b9e4c69f3d11cb62cceb3869f1a0f4b33073614d298585e02d90c2c9e9ab3f454571a873dddc22b19129a7dcd750791d6e726a346b5fa3ad15c4764357c6b559bab7580cc66186b848a0d887fa41749bdee6354ffbad478bc4e4a88a603f97ee555a2ca5a7ed93f9d11d5dd010b62c77e3c0792faffcf30ff2eb2d0e451fb56af1d95cc24da764ae31fcf9c0ee03874788d77060744155766b2c7711135605bda055bcee5024570cf25e9e42b602663c3be1792b1cbddcfa47c5a9fd1d16e4932e9e0cf65ac235bee1442ca0ccdb399f34e20e8fb5d61825a40620d27c81c8360cefe8062d67a1a3a3ba5083da08ed76fffd47bb4acb9f5e762ce245caab160106bb10a923990676ef12fa4fc7cd44c67da63c542536d740dd689c8eaac3cbd2a1a0940eddcd92f42e1d34519356ccfd2acfd4a7e5413a23a19d413b9832e5323867aaab93d5174e366b7d4ea2323de1301f4c7791e368ef4e93b1b63dc179a852f799d7d5e96ec53d94d7f61d5de22921db0da73c136dffbf49ea9e3fbef6e1e53d4cae7d700908c522770278228c61e88acd7594ddba99becff899f13f5644dc46a5f135fc174c379e12793b49144c917fc773edc0a7b219efa82db4e5b9818f605334bc6b1d7456cf8e5135f05606aa98de19f685c6e68b8da692ec73801088b05d767d3df97ae08f3e814e2f0c5ee0e8fa47ccaf652800dc345b90b810a722d0f50ab0b0cfdd39179106444d96406f7cb8db2e084d636287d506d26542c6f80f7f279416822ab8f364709f6431968e8f672cc88a7f9a841268e9d642af9ff444a16e677ffeaa0f76319dbe15c605938a1ebda316fccba64b43b893731f8cadb158c0b1c38e10930e55629389f0daecdae72047fd3fce6e7bea40001e87653d8dfdfc1864c4cb8df4f3d6cdfa15fc69fe2e8defab0c9b85ab23d8a381535db3a6af159ab4e17b6248b650c4d0a004e7a4a0fbaa5822c9946547402a2d67f46d45be7ced9922f98bd587bc4e192996936d51c352dfd7374f963e5e39b9e1b331c8bd52f2cbd55d38501e662f46c6477eae963eebb1ced728e1253505f3ed72513ba5557ed3910c91799f805e86eecabce0c36ecb614842b860cf115422b60a1b08fc2b4200561a8c1a7d16d85ef88e04d260bdbe1567bc164493888cbfc675113fe3d767d71960c4b1da1c73a074d15f6640d5b8b81bdf901c90d2016cf0d87d779144c1c6dab4db3f1b28e3c1e55cd0ff3c0a60e05addce561a879ea9b0d3839aa7f36a30fe3ca2fca0433d983c1262cb7054fd3aa6a28c0d4c036af921eb5fbbfc305875f24153eb407e5f6be02f29d528631227753a9008cd35857fb","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5197399655f0ba2e7412d816aca469c2"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
