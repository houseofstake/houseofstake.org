<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fbdb69e63504f53e779bf02e6f162ebeb929a85ef511b33be7b6962fa42a7d339559f67453b7f8334f4e799c1cd9f6475d504794c7b6e18c633d391a54cd274724f859b97a2532c2f5cce639e1112e89eae5bdae0fe691819cc8547a2776fce3c1632b77312b43f921f4272a178e9dfff61ec328f1f2d21e892c202fa8080e27683b99bef4be49eca968edfac6e552326d18a16580ddf588c96c37c6d807c6bbbb01592cca424d52dfd39ba57d7e66ee37e5e39d87c9c23ebbad62b5fc145e200752c7de26c7c97e966f4d828396afd6227b453530352bb7f4b2dc966f4dddbcf0ac9546a6f76b31772a3090caac42e8af97060196d623b9183d33d3f19bec1e7cdda7c83c8e54675186e411dae7daef466ef76538b8f56cc80fefd287466fcfd69993ac9e247e47642ad96bdca17e2ebfb319480da6615e6c5c08670d9f93c389c0951d069006c7b50cfa92956a5c6986519e3380a4dc3b648412fbf74ea1f85c293fe53825955cfc8e22e5b16c022770953d1e48222900cff8fe90a97c764a83aee8298de1ff1c3594eb8f567367dbc88df3395c020d64035e957caf32345524af4a5d87dea40fadd0c9291af5160ea883682daaa764608e8cd885837b5bed1409a65b2f8a6c82120c9e4ec52a100d0e746e744997ce0eea47499c36797eb2c8d410af5a76dec2ade573fd453ebf610c6c7e102a00eba677268bfdac949ada091d3d5dc3020b7052792e307716476e6237eddf8de94697a830f11b31029a63e31ed6c8689a0a1d120db37c16f1abaad9a11e87f5db7c20359223b7c5f2ad96b12e205476cb3bc9c0dba8be3fbbac0a458a5c68787cd85803db967a014a67d0fc2adb7f182e4ad4b41d26c736d9d5a73a61070859186a4d0f62ef9df51ed0f7dbe92f1a78de6814afecd0d21f4bacceb0e9b559a018780e2094adc16824a8f086752e0290df1c6ca0619ebf76e446ea86b90c77c76cf8bcc2cdc2bf6086113b0756da24fa9b977527e228b254fa0ffba4ec0f47b281f539e0e50d2abcba74d3875f16821e1a1af04d5185096d2d8bd9366e8a77e8d6f78be3aae852b8a045447615542b8e52b324a0710f89de20a032431ac70bac53deb95073bc1b6c24fc403677f029e6e5449b3bf1c83aaa17d2ced32ea0f7a463db6e8f18de36d78868a47ca81ddd65c74652b01047898dcd9488cdf9624f3b6da2669a1746921d1a9d8fb6b6f6a675914ea5b3c5c090884b978a20272bf382c18b7a0769b14a7fcbfcd64a63685555af828cc425a0927bced37a24b3e565a0f5f60f501df1c22e7f4962d04fdbc2b7223f80e856894625dfc8ea46518f680c51742c10795a0e3cdabc97e5e35db06da3672cd13706d3346695804e4b4ec35f7df6b98821e6eeb1151c9dca7219403b41829b6878f29945c9856cb2e7f634883707d8e806b249d525f47b16983ee7ff61505fad5e76f456af73b48cfcf94fbb1df5a89fc1d5552277b328b4d28afca76b99fd96a78d7c3c65c3787dcf51e12bb6916cf3b5c3d0a9f5b6b049932dbdb075bbb541bc9f46a09a7a5d92414c8ac58fce4e21709e7df54b53b305994ac7b19a95fcd6f47c04accebd233655176f4079faa5136bf154ebe49d23e243a3d9e4e89a3da6e2c536f2f76aa384bbfd896bb5be2b1437252282b339c7ac2dd75c77eb0fc492340420b5a79aec752d03f543c202438ab58fd12229e1b33066a991097757a163ed07df040107a9566da637f57f3947d283844f31b882a9ba0f0f969d73aa64c840c52c557fe5e98b6f5fbddfcd9f69731622b08612836dc120e3461431f0cbe21214aba95fd92ff6b8e18944fa6272cb75bb5161ef5b8cb934637fc8036083cbaf92b307ec06edbba19caec74a9a32c3cc0a69a970970b717998b33479d6f3f2f177215795ec0208281eb7262568d92677339919dddf156a98a1176060b12736d2c817c2c0d83c5d2102a4cdd42ad8facaf9bdaaa3c1d3fafe7babcb89612c88fae15e28977fbe163b327abf9064cae8c6ccdfe88d54e1a8ab5cbf3a1605c034850a0f47d76d3a38bf1dddb140fb186bba6364d7703e141bb7dd083a2d44554a7497e5c56502ed5e10e1723e8b87af97c5613d561283d24ff088eed56a0e120656f263542a95442ca2b4eb5ea7b2992229ff17500f841b9b9325912c29d6f219992e5db56dfd344566fc71d2a96c950a83b278e877303e1ea2415c3fc83fb896380afe57df5dc9756f47a267c77e1db5a0973afd629f2686c4992f4abea2384f952b24ca20c6f3335f413dc80d014c68539153135402e5ad78d93f20c93fd66c1ae00e08d425bf1b871a3af88c2ad91387639072ea9d98fe5c04ed90f59a330ae5299789fbc97637c8ef927673becbb363687e17faf7655089a24af0155e18ff1992699abed261f79696c7f381d396048e62081585998f6a640a047423679352167a8d6f5110a37b8fbd20ae503d0f6d664cf4bfd7b2abdd463396bdbb330dca04a87c4aaa578119dc2772c9458ebe19d992ee51bb2d5a566952d51f78fc7feedbb246b194903ee2bd3abb99b39bc3362e0282eb2bb97d8c2023bc3334c17f0bd6fd434c23d53c8607df824b8325abbd013c5a4fe744904e38421d1e7ade50d310c7f12231f6012f387aa0713a3de6535149d0d8c8f512862c915d453f3b2c023fd26ead688c7e6a494e0625d7f19819168f9bf345148ae3d6b743281542b43cef2f3d88848d069747049570bce05f30a2d924102311662182eecbbc11d47c326b6ce150900611ed14d0de284760efc07aaf82b1d701aeff6c1d6e7b57d8eaf1912dc8d2020786f236897e6963a365b33cefdacc6f7ce72b676f1acc05613b463cb97824bc347e46b1af5c0725b45cce25e9977e27b08aeb3a41c9f81e0cd5ac0d45f5e2e0412f773df9e5564b38a24e8aa3bafb03dfc89190cf9d813ca1e11b9f1d99460a5a84bed34f205138807b58577abf7607ce427bfe7aa5a56e0657a098f5fa9a2899abe39b61482cd4d33671a5b91a083c0aa91fa762b093c0e322ba31b11a893858ee8b691db862fff348ce8888c502a5265da815fd40784e8895c6dbd6ae16388009a32160b92498dfb24803879ccbdbc17896468d0fbd42b79527a81f373aa0d843a7f75704cae4f40277be4ca6c58951b346d142f655dffafc70e423b33ed9348aee17d7dc20afb872bacfc5cdab8270b1976283efcbd728c96eeb7a1aee3fb251ae85aef584ae0b2ce7d02c292d945676a9019236b197a19a94c14d4c9744cf0c1b494820d146a5d7a3057daf48deb453eaefeb49df6344613e744bc36ae25bbc89bdf7d1808fe3975ac46c811e2f0e54e1479212b4ad02da140a5f78b7c9eb3f12e51892a84f02c9471f503e18e4b1be9e3b99421261f097bcb829d3895dd1599ba09bc93bb8cd412a490d5e7121523e371bdd2c810b2adee82c16256f7a1d6fb9a0431f1d464f966f4d0d0134487bae67f6d3602316d54fa88e29d832c134f69852c05e265b860037b5aae90b1ab8f08e1cee40d204ddcdf16bfc52707246c7ec6294f783ad72244b56878d2cbf0e0f2c75b54fb2a844bb000ac577db232447e3383da2ada3daac4043b70d5350b0a369c5822b8d6a2b9e30d9c27417825404b4744d7d2453181ff1b4dc8012efe01f169376709e4b29db6ef3faa87e6747f1416a2a54674d4502d8ca38820c3b29fe8ccdf8ec952c57bef737871a9767a724e9e1c94fc712107c415a67cd43b7a10c0bcd8a0c28cee003a19fdf9ceac42a7eed9c050c91dc674295251cb4aa3402e2b4f462f387b1133a8cffd1b00a378f99025142ca223321fc8bd9abdb4d7903bc484ccbf2bb72528ddd40b80d3a45482ea4f32aa3e05c8e73006aa1eb60ebe0bdebe88ca03bd04c67ecacde33cce1a4f3214401cecdf5d8961e891b5267d9bb64a50b87a618d373bd8db68127f11dcbbef9f2afcc79d3d0b26d1d64e1d525f9eddb87aa33cefe3a654d2fb1662e0a8779994a6ce64684bc9fb1f58f7391490d8ed6fc155e2086d35776dac86dd9c0703a27cf9dbb5d7ab006e524f601d0f2183920cb172449223027ef6c47c6c38b74d2b7329a0502fdf462c365d07437f51650fdad03bcafb85ec0fef118ddf2445ab082e47ec848fab0fd9a0a300b5c426793284faec5873459b73da46a5cbb08b42d8db9277a8b724647817b7270d5223f20ad0dd3cf7f4c8914b84fd6ad1af7e3b2124b105baa3ceee8bd8d6ea354167e4a45a33b308c3fc31b70e9cd0affd17a14e568628d3a8a7f5ae6e353480319f945f1d5df827cda338dc71176d797406560d8323f44190517b5157d3fddce44ae74afc21bd5463a08d6e9d72dffb1c4502eebc1b7360d064caf555b392a44633cbe0d09dd30f5e9ae955c70068bb0f171e4488bc9b5ef54b23d69f154b4e4590a21479c63e7ed33801758ff550193b20f0f7daa12c8387588f9c9b0548f25dc0d6f7aadf60a69eb8c35bd58aa055bc96343d570eab579ade7494b10729a30e73e19c641c204ca384a37eee0b2aa87da791c0674e2c0b0e509f2d35803059e0aeb90752ae4d32649d8cfd595ed446e65847c056a3b6ec8ce6f562156231b8e5d24437dec4a2443324c39695290f081dfdf7d17b0e74eef2de32e35dd6278e0b710eee8b5962a2e56bf24fb27a26093be0ef8a1ef586ed60052d851a2d0164b0afaa761be59cd458215e1fc4c4bda4aec68309ebfe1bb53b160314202d87792e1c12381b29b8aeaa0e06087922911442ebcaa7a37849f73e52dfd1d15343daee8bba42332fac21c1e92ed172f17f06bcd877f87fb156a744a842227c019e512c2a1c7c7bb2751c0802f5eda68eb96e0e7334732ceae15e3291e8569dc2b034c001ec602ca4b92ec857ebca2129b8e9e97cb64076c448c53e2d59201aba870cc2d3a1159fcb6542c5beb1c325d4b988b4fe1df7d5ca869952cd578d1db53065415104210021eb02bb32284dc248297e044fbd11f1db5a9d697795851ad65e8142a56b13390f37e9ead97ef338d966da0e0d87c35c3e5ff6454f5ab88119e67f8f6c824741ae69b39573e55f01a5711763c4c52175fb2eff3c33d201369887bbc82a38fe25a56928b8e46805a643d3aeeea2833ac386f7ac01ac1ee773530483d053a08d91d6aeaa02395adcd978973ee5a200ebf40e9e8c2d0f6e56ee86159def6d9eaed627f575281bd818d773670aae24861a974b16b7d71c25151c5fd0a07edc079aa764377e4cba684c0256d9e978e06bf39278c0fa77b317221843a904232251919f88c53a1cc6c07aedfb7faf666e2f05d8a56b9de539111d839d4781e5dd6193d42e497bd93bf7d5d3aa8b9bdb526be02ed6d64fb6ca344d051ae26960a48cbbba3c88c9d53756fe9a64999bec7667b5a9777b2fe60d8c81470ba948d180b23844122d4324fca5fe1de97a126c3b3cc6ca63f69dc22312bcd3337e19828d09ab1e54a83e541e36ada75192a5ee577ae5401fa10d47690112d95257e4d57741163790a48f0e01bda3097105d9b8c2fc834b3631eb4f1f48acd64568ccc6c4bc22d2bf8d485071477806a10709ff82056add933afdbb472228975e5466bccf2dc6f1560d19650d4d0616efaeb83db2b5ea98b7c5b5d81cbe79fee02b83d015da610d599c9d9011a8ac6b04f89296e84ff137dc0375235e3396818298b5ab8e2eb8929d9c6c9be87b1e6ad64979cdff81b89bb744b6102c32b56bdc5ca4dd469b4d83cd32f74a5a24566b8f2ca38def883ee6e888f895c854f6a8c411d99bf9988a61b75631e9d8630b1613825ad5257eb85ec7747f111426a052cd36023e0150d4ef6469fa21f872aceb70b791b24a7fe9148fcd2eb80eaa4e696fbea97338390919e6faa9e046df5fb32c7cc7dc3782469cd41c9fa7dfd1e42b4d156805276cedf7bf295f816dd701b43ee480f929fff2e0f6c35df9cfd9f7ea4ccb7da6bbaa3b8a4fa598332a35129568f2d46a19c49645165d85f77ad98263946610ea522e0527b68497374e6096e6336a965e913201a5fc82b2557749ad33c552828912584308fc99e6ba1da1db178e2b73840e021dc5afb34ce1d496ad7ecc1dc7f13dcd9f9c37ad3d20fd0ce9ed0ed2b93c5ff461fc359cce50a0da256cdac8526ff5a6435225a1cb2db1ec3af6e9344a1e21547cf5ef40606fa43ccdab5f77fff6d0a36fe7f30a748dc20ccff77defb7ae44df9dbcb34e2bd731fed4e8f4904cc813d9282363c96737b779ef487aeb518e5883542369a80aec91630490310ba36c452a23121760878d0a8ba3ad789641738429809d85f3e234f9ad3effd97cdffcbed34c8a8651e09368f5ec9df6e42e099f41939d4eadc025dd42d39de3b8294340db893c4f0e25cf533e56d773332f5c3601d68e07b80a485fd5483a9f717ee8718b9ae5ce5a1b7505d2c02a6a47518383ebc7163363b68ca666b07afb43641194615e7ddaa9bd8ee036f8209113040375dc7c61c021fb132ca83d0efb6c506f7566c21d513e543131fd5cfa122de759db43fecb9697cb8f69f05b10e71d21b9d10fe20dda3a0bd6879081623a97c33fafe431d5ae4bbea0f9c5253a8ab29d1bf35a023d4b6ffc07a21187a94e450e1c660cd63a2a5ac7695e62cfbd46acc6960697746942fe977e5df279aef99d00946294495ab76baa3a8bcf5d25ee782bf98fb0c72b30cf711d22de116f184bf4ae3f98125e537c05449cb97416123cbb41bdb3288d1383ae4dcc6aee200f44f3b213f789183d42bd7eebb8b5038adac3bf22c5425237dba7b5e7616af417405d01a279b2fcf19c8eebc6e9706a52aecb0e380fb25ba8a4a735aa214f23e426327767b7ad687108f4774f94961bc3f6a443081532c77cbc0eb3a56d95155c6765045a610dfa82cd6ee8e0e906c4167b60000ad75b9db8ec5533e2fd19f46f3bae07e0db2ac2fa486e5304e41856e50109948513a15e2af0b828771dc79fc2b565f97049bed04ba5073b9be80e632b9b7340077259fcab4bc0e75705d72c1b893f4c2b92638e0d7edcc8881ea50fb6d71c711aac2db0a3650f30be199351462c23a619f421ad29169452d4cbf3106819d508624216b33a9f2e0058f38a68381bf362838beab3f89f6e8b24b601c4ac82844dd28da8d1d1ea0c9149509d21482a6d18dca622b0059c6f51486a485f22f65005c8fbd9424141bf2cc4bfa7099d7ff01984bc2e8201ec2635a7a35834523cf6df0e4da90bd5ac7b9312852d66fafe2c278ee24242266e2f1c8f6e6d5360388ee2faa6025f918de8b953c34d00d121878408bb938c0152a07519a5efa2e02672e9598b2bc48c0e61d575cefb7bf074df7af5ceb342746763521bcddda6bfe090cf9a0e262b474fd24aee444a6b4f95c611152a15b3fa62a799bb0c57ceee494d819b50665d7bdfbbc69288fdcb01459ab042f7030452aa3af43763b881361a583886a67272393e9955c1b345da4a09c3405e4c6643ff1b6c198583ea8f9de307d3bc05aba91ac7855980749b9031f884649729bd3d3d603c4a696d2fc3c62d5e8a0d987fca44db194b1ddb12678490a1447ee159f743160b5522f0d729a4da996e039d85b565356b50f4fb0caa5120ab5d9a80693f269391d730bc67105128a442b96afe9e4b617d8beb6be5958dd8ddb10c92028693c9e04feefdf8ba863643af9cde47bea01163c61cfadde2ed38c4dcac9482f797ee2565c0ca9e6c071b1960896a85bd728d0fe35ed286dffe33a2480e24ec65276b2d7a727195cd5cc7940a9c1f7c752c3482c4b10fc0ca9ec07eef5664c194b6432a5855b321330885c7bd1184325b14adebad3b86856732e5f59d2827e1a6b7de08917c971947ddac3e52b577029d4d48a6aa843c95869eb475beccf2e410d8a9d11a84ff06778ef1d999412f171ec6f5712db45e2cb1ae435cfc101fbcd07cfdd9c31d15223640933d68fe0bfac6ff8b85248aafc31fc3ce675dee1e9853ee25fd5b1cda3d708a26217b27e5bdc2bb9ccca59722941aabaa9946d6ca2b3e89d3856e62226850ef454e35bf47704f09dfbc217e8e8fbaf7045b2089146856030b6f97b38b2337a19321e4c8555e3156c0ee22ca9e97947ef0f574f19051f82cef595c694dbbd582e9bfb4b2af9face1ddc6c0e16428a91aaa097496cf454ecd6bf7bca4e474658a10cbe588e4928be6c0db782079b2a52bd09418f69205772cd574f35e834a313137f624d3e6360bc9145c878c5817d333f381102fdd053a1a14d921f701078efaf716f516bfc1408b0b4f7a6795466e70ffebb1cbcf22602affb41ca58951ac67c133b7edf2fdef51743a907eb2dde0c52781a98e987271e57a6d01e7d60ceaf9a2f402bb12f78d6c900f74e42f3f92e676b4d80096a2913ad87bfb37848fdaffc97039f7169fde8f2480d081c1e49463f7336eb82e11abb610fcb6e0a984aa061488611c619ae018fc5a3881907b73c1f9c5b499ba4d389eac349cf8493c7aa50d51b1b8e2f87bda5fe9c202ec48f6c51086afced95f8a4bc7172890bbe10eda8c4bf6ad88fe33f2b728a9505aa82d5524944dd653da6130b2d0b135e3c5848a7586da2f0cceb911d4ab909220399b80555ab18fff65bfbebbe87b550ee54968f76c1a84d6413e09a02cc1da7da6151642d4ad7467785a0dbadf44994a66e06b80dd8094df4cdc3dc0bba880e566cae50efbe8c6cf0eb21deb61d552eca5476dbb29a82b1eb27d1ed25118daef7695d06b8cca2345e2d59d471c31bfddc14b7f5b5d02dc370830f9edc876ecd925532c2d1caa8925c931943ce89c76de632efa956fc134087865e16dd08adec83beb375e6232c8f6c655a68d42f7f4ffcf396a472309a67007c2213f2510b710c8742509201c0673973ccba0b0de201ed864b10aca3b5c7b0b7765b7a2a93ec4b592c4be45e311d3379c126d5f66d0547eac50c5694b5f93c89c202b10747245120eec10688bb7f11e8743f5160239582ab4f98fdf7b629e48e39f8fa3a4479ab1212b6a1fa669c47810baebdda828c4a4f9b1a88b836ddb644b229881da50b18f9c2a042c3d461968b3e14129220289e221f2066194484acfa96ff4be9084ebf69d918e0c84de8778a3daaee1e47257affa71a706c6adce3782a5d5346a69f0537347c1307bf11e124cb305f9143e499d51994151c6f5be444a449627b8c52ee9b696f95a89d47d81ca50de71cd90b0c1b7bfbbb21eb9227e50eb7be639fb46807250c4786c68a92c7c587fe82b1b4b9fea24e3b2fe3f3b64062a85969412823b812967f28eb64ecca3a3de17b75f4b13974e6414b975fcd4f4a6e0db23162111f1356e1a927578d8a2b7ceb9087c496aa0ac2074c9c93be1513fffcc77075cdad40ea7ba37017768d14c58cc661664be1c795d0f266899346437c80b4e3b7f9b51406e5fcdebcb9332f29edba9355beea34cb43a9fc8a47c4459a2fb76a64f41546693277dbac24c370038b7b229456690559fc36aade7938c943a23e2f6dfdfe3b9b9855bcc7ff5ad270e600061fa1e990e405a402241ae84f942618bd229ea330d5459d990070953fde801715522e8d57d8e803806acb95011b449dd63d48a12f679e080f7055c0c9d5d668cdb7b551dd6db0ea6517e7fc28016f60226389d6a284f6bf7309738077106b15247490256fb1d216aa58d7f58ea84847abe23dd90491c5c95f6daf08b75117d11c94789d7240a6894fb4931c3fd03f680ea3e1f8902cd356f0ffa46dc94d711507910cf3e753a77e085b5546140b123d18c17d88fb5ed0b53102c4015fa32b5f72556e95df065c4dd8e2c78beba4a79f2c489d9a27ca129fe1209c068fb2290dd84c8f37ecf75c5ce5f71293026ae942db9aac9a19680c1ab3448d91fd46424c7e56a7db15f0d5e02af758480a745107202f6e334ec43eb081dbb561caae729dfb18e01c460daa9bd3f3fd363500b3e11289715c5875a5ebaeaa66c9bf25a324fdac38460cbbcd3a308a82e0141c32809213b5e8b1e107cb797a4bb84eb45ddda5069ff3f67ae859fc085cda1d7dcf90a47c4f737988c9769e12b2a797fa39aa1c051a2c513f0679e02394b4d5721830296241c6f1a0e595dac6c4cb43b854c92c2b5b642ba52dc780cb4027796a837ccde65c8f31c4d91d8310366b71481e41f1981d1ece7be9054df95eaa9d481ede6df943441a467bf1a38d82704656775bb520ce1ac34a16d5c55d8eddaa98f12f9767739570d87d4fcc68f6036c533832115562ca160aa32742f7bea87f57b11c3857459a642afd4939d468523ff7dcd4247a9087e4babc9babf3a9d8e32e206be440f3ea03551a812500269f12e90c54099d3e4cdd1acc725e120652caa9dead48e93474246c32b130545f8e84445ea2a26a3d6ce3293aa1829ecb56193ccf0540ff11a9c53e8ffa471c32e11533decb7eec6f410efe53729cb8a67b5542c07fb68565d1439087d862816f8bd662f79287127ab0430b25a1af5e44aac24835b8199396f29e6cb955dbe6d761788445baccc015d1b6c1ee6daba37b9cdc5d6cc7c7a61d3bada4212d49ede5113836e2a13ae18f1a320c10b1d966ed4eb9e4cbe083d2dd8cced95f8318b5e76043673aa03c180a25bf39ac5352be9c5f73c440b0ac4c05e393a251048320670eb8594c9b6d4e9b30115c86586ab359a3ded05e3c9ef5805c01ff1bf90d542b06e4ab23f68074562ec7ba8824a993615ae106201c304c3598a75d7591c535045f32043543976a5f199f99a828c0e367af6e488ac44c3fa72b53488bd50b263d8d9cd3825492ecc71c48dab52a8531c47ffe8a2488da56079548e10d7db5c7f448773df3a911112e83bd652607e22e342ffbf512f56f22abf5e1a5d8a3ef763f48cd98b01837454661e2d99773214c9d85b5f8e85403f90de08e992c4be6488f6a5ef5a90de1adf63e149ddfde5b0766f3de14f72ec9e8ddc0912f337c9f68f00c6199d9f6f893bcb4c59f16097304f4daca9b3c512fd75c597657f6dc9ff8e0504fa913ac1e78da272dd071d3694f6c0dd3e9980c9ac1599542dc9235a3b06ac7f9dd4d3cf9f7f8fd743c24101b4efdf634e05b8cddd275a0d4911b41bdc596e977be05b682c517d0a1e021cc7360a836958ff830ecc0de24ce6c578f83b03248f668d6dbd3799ceb1e727545027452489c2162f783782a5ad3d02ca7fd1ce489e68edf43c88c12f968707cf1dad21393eae37bb79a0ca5dc210a192ef9c3344b6d46c1bfcef94647cbf1867d2248ff480638ffc728d5132387b8f43a640e2f54b550c2ccc44b3b956931121539c3fb19eb44fd2b3b2c2d97af76985a5a7c9a15b94f7c21edd2b27de6f2a480046c40f4d4730ce2767e98befac289bcb7b9d2d9d5a83cc7b2eb61a66f5d243fd5f2d81d826dff2d315bdfaafc349d61928601c1729655e4ede4a4494c02611ec81731d935f3d5b1f44d07ff208fbf07471dbafede66ca166b32a5b21379bd1bbc0e3c6191840d7b783335d8d8d1bba35acfb457ba3e407f4f16ca26187c6fb6270fbe1b6f5ad9d09f04a71f2e9bd6b6419f5f76ae33bac2e6fbd964a2f40859169e01e1109f20a001c1f7464a3fd5914a3cb9258d8d82f171832ed8f10deee48d94530fa63947cfd9574fab30c177bff0195a2814e7ad51a95a608aefe713797b46e956875de9d8ff2fb26bba6a402ba16c30835eff70365509adb8f9f8a00142727dfa4ea001f8352095c3578211426da462dbd567e953b7373f4cece8f121a86417c3226a79d3f875968c97e8eef22c2e57121fed8f922b401f671600252e7f2ed75f757bf699cf62c503fefba5b6255ccf7bc50f93457715515088d124be23456c8370cd364e4498ea4f0f8f2996d326fe61654209198eab7a93d5567bf57f1dbbf6d9943d93437803e23298726d08080d7449e56c7096189503b76b84d869b506bf60074e95f05be03d14c74262174ea6b8b526ebc96a3f6620b75e3771a43942779c4cb7b01337f1a89599bda8faaf6373e83c2156d59ac38c3dd83c0ae3c365cfa9a836aca39316181fd4b5d27891421d66f300b34fd64d29ee0bd6aca64e1fddfb2f0601909e6b4a299412c5c9ea988078218664fe56610f48d89fa0845cb889dbb94d71198cbb304266af10637280cc29451a9992f9485de234ed07c68b9d27133fad145f7fb07b0b5f4473dcf7fda74f0e9618b6036933322a37966b7b71b50becf29dc17c333930866ba8edb1315e682359bcdb4bf52b4fdf7bd11d055740452315cf92de43dfc3bce379e4b5065d07b47c786f204cc080b60368df0ed561e44f967674a2b1eb70b12edb2612c13586ff5913661ab04011403198270f9928ac0495b973dc6b2fb6a247ac8f3d3e8c3704374e25592a17a9cb844e5c2bb07b587ecb80843e26eb51972feb0058d3c9eb5e82395b49f172831aa5a8a4c3e347967a11a881e6e67cb45172ca29319257c84699a16c39c200e47069400672cec7c7d31fd15add2acd13102d54055b763d459cdb7694ec2d9ff71cec62d2fde8904a1f1a4e653e121af6f4afcacdcc2336f0a5c807f5fb6c00d235fb5466c0fc390dfa46d8c64c9aa94b4201870c97a13f4664e96d83084df72e371e87501d200b393c9d4b3d049c2316c7acc9637e1454b58765f0730f290c4e24827bdffd63ea71f3b7ff0025e484afab5b938295c5ef02c427575e07eff6245b8b7bd2b8077ba374c0f07b744ca49793480c2ce0d9fd3994ab98ba6060ab9d2025cef554e916b62a9c4232bc5d4c071b4809718c72f54e5ec6bf91224f2a995cd60f79b988baa44092bb2f4675e38ca2c0065cb632d47ea2ebbe1abc89afd8fe42fa83d50a3c1f7ba8fb2b67e89048db2b0836d8cd53172c0c98dc86552fae3415387c1ef990dda5d3aad280da5055b54c7fc327895ed64b906bb1600a5c5b39aec69ac1f9838f49249109686ed6c9ff7bdbee251a04e71e5a77a1170b16b5e07758ac75f84586da2452efd16d7ee0a24978828291024e01c52229eb30ddcd06d2c1725071fb5436a4fe1f1f3918ab6322f5fa8e25ea204dbe213f304b533585927066d1f572ad6b540d0a16e3e898fef161530a8bad9dc2b47a6e304530e91508416a95cc1a622e0fce96ee182725af4fe61869ac4333274962c591ae8e9033e2486c2161db90fe682f049e1daacae24336c827fb6236cb8eded22ef57ad3334a8682327ec7e31e597127ff08fe6a25e3f0db246eb56113ae5dbe71b1757291a9d198872de14e7cde9efc3da5050a118622b922fe6f4557c2ae71759952e5eec0ae5b552aa2c0d8c6911eb0020f9c994a924e226e8f47aadf979391995bc975e8e97e9f58c97d32c7a4c511d6c56195fae185ea9201badd9f4d42ee3591afc581143f7971c8d645e2a85e217ffaf3b91ec8a072b200c8865f0263bf5a3b640e0634faba3a3c94a3a208562045b4eaba58459f529fd9f288fda8ddeb5434aed159fbe6144151ed58b0ddd3725b7cc653baf2f5bc41670d491915853c221468e9750480b97a650aa8370bec3f002869eb88303c46a37665d3ad521f002b6af8ead0bcae65fc924e7336ce6edbbaab208a018007263c0b84d610a899946bad0e8be92b99cf1f6c2b13bc3e9502a801ccb97658d3a120331acad0c7388b42757eefb6225e1a93d6c6fe2a3efe64ddba5ffadfe711e21b3066cc887c561ad443e5458beee2f358dcdae01c22405552e11df5af2592a2917db82f0c2e06c78adf1937ec599fa5e43230cb54dc12fd133999c6e0f351707072bafb336d1fbaa7e3e41e1af7f1799714cc0a869d20b5aad455acdf7e3caafadf968c21f518a5f2899c930d047051c0e1ba5b481980a86607405e84195fcc9bad63527851dcb4933c5b40bd6d87a2d0fe5db7ba487bf8b83f9396edb78a6dc42e2705e33c86d870acad6d356554966005e56256fe47b9d591a558311e25518e597252d417f7bb5c7c7dfcd3cb49404776720ccea4101b1bc8b1d8dd7f81f04a5287bab8d729fb07cf3c084d4c726ade0d9f7a4e158fa87b146b0feaa1291c843a47e0b2576300e1786a8d0e6e50730d1999ff33ccf1dd8cd93090e0cc06e8e9bb013d3d925eb6e32d4c368497999b71c4d76b28dd329927fb62c473e5d334f1c41f7f862074df6c7f89f2fee5568aeb94ed205fbf606a038ac0441ee5dab1dd76ae93fef34e57d43ecdc20e381ec2f45966dc892e1993e498dea1fb3a7edc07b57e0ac0b1a82e1fb4f9dcc15fcc906f2e27e74d4b4a104641227206c1ab6e2347ebafdbb4d26b6010c490a0216b7ce8664b6462d49576a98b0ebfd761704fae02d85cd3b70836c5b590c211e1458b8f1de6e69422f2c0d5d9676c1f7f632144ae7b8b6b44a5fd59cfe7a28e31ca59d564bcc27db2060318f34d334fb2bc3645e76cc82f79a56150fc47dacdaad00342f4a26c9a1371fe4fc486874992f2e978b5fb6e419e3f286e3da0f022424d64759b71918204835a7545e1e95ceae170f11df02d81a89a03c022b0773d2a9ee6461eabd460b694a6bb2593f04f166effa3da9438598de38690cea69842a56d2b2de512bb1d72a0929f05be7059c17826a7062bc0db270c66b2ccd3541bf9d3cf1d386ab82a3af30d26a90c5a48685a6e4eef444ad329a1a684f1152fc1691fc1ad4bc88740297cd4cd99247703ae1432794e86fdb6ff18bcced052b3ad16574c8c4ba0e73971ec9a556f3ace4c6af518a417d2f7bd5d4a2be1a37d70f705d13ee18b925b3c7f85a0a34546be10693eeb0dbfb602ab0b0fc66c96b6d390dac056efa56a5cc041e55685e853c29ec58036f7e4a096d1c8086cd62680f0da18755ab8b1afe48b0716250a4313d504797f6fda3bb74abb3aeee77a9ab73c4f8eee6e5540cebfed39b4e8f9c7332abc1ffa2260cbce8b70b5857d53d1bfe1fb2f6c507db6c5c3746f0b8a45e8781fa1f2ddaeb349c5fab3455224e1b6635271a7b8b3e8f52535623d463f369af7bcc51a84dd7457cbf1eb2190f828898664dcb5808a0a8e9f51b31a920436b963d3d6be6da869629748c9bb1d47e07e096c3735418e823aee25003d0d33a2cf668d6c89f979d1e938d0c218f0a3655a7e010f003ef0262ffe965769596d37b2acb99ba2c929ae3d68fd9f59f08f49cf4b9f273bcd8fda905bef7b15a58b2bf0af866073dfe765946a360f87d484ce5f4dd5dfa2e78c74ce1bd7f6dc57527526d816b25c889dbb324187824fc79c257788c0939607de278a562baf764227c7dfe2a0c96a308a59d36c8f55c17eb99013f56c627ff9e3b1a44af0d56f5e042f4f23c9f00c0a9a2ba0433d942efffc33aaa94d906437fce35c0d2914503eade1b6469fc18ecaba5d94e04d2b6b155e8c97382d8a57ffd705f356762702a8cdd527344ba92daf603c86972a6b883763188cb2464302a9f0097fed887804758017f8cf2fb37e319d25404c4ad2e1c914429a244b8b2388466fdb62d122e21fde80c01c5cfaa7eda0d5f16e3a34dad55ef1c04a32c027883a52388d3df132c77aa0c07fd19d4467338dfefaa28aa358e88f8eee32a9b6ceef960e0c3f88b1f11fd0833b635bf89316685db9eacca77030b27639c90c0f828e48e3e6f021ac1b4a9377567eab8a121fb08afc568990ecfb2d84ab33d3cd200ec9eed5d36fafe4e57de07495b64aabb1621e1d44f100451e646f265d674f7759c705db71405ad60abf7c8c842ddf0ce0625ed933d1df9a9b0899637d739189e0e9fc9a7659f461a0150dcc7754fb0a5aab272379c200a74258f6777db8fa041ead79373d6e03bfd2db25b8fe236f270f6660ff499a04cb1dc21852d9cc01c0faebfbd881b51a117b589777d8ea4ba400a007df3ed22f5327231fc1d0bc9f7502703e54d9c5e392b259974d3e66fdabd9a4d8cc4e5e53ec9fc37b1735a53b854593ea8dcfde74c2aeef25c4d430dea60827c8458eb2d0b1ca851071fc14c148985b05d2ff5f46bab6f980a61c85e5312d35830c20b1bf7dd32108b34c4e0cb3389f2ea9d56c6b029ae94038647e85b547a39d6961b83a2a2273b8d4f4f07bb491992ce41857e3de6c95ab3ac57b4dbfd9832387c9dd076f01b02e65df1f3cc5b0c5c11f115526df3fcd70742ffc695d3b523607a6de527fdf6f914efc71b2c8183183891f41d8acb743ce2fee2c719d1b29e3df6377d5dc8b952f84469c3e6f2f782bad2590de3fd113ddb5569bdb7aadc4a8e2004b397954d0cf47cf2060ca6dededd2c24bd233c5b25dd8b730f3ef721c94a6a0d8955c52c3c9ebf9f78deb7fe98eded2c1138605a9a2c57af5adfa9921b3b4ce09deffc9c5e8c7591ae3f00ff2a61677cd1e5985d25dd8c1cffc8b98528f761bc8e0f4cbd33d3caa66834e7a8100eaae0bb2ddd920dce70d2c56785873a829c8d9f30c7d899ecc6eb39768ada4353e491e7165202f9dcd13d71d823b18ff93d60fc167523bcbeb644e5b1659c205c889d48d219b04a72b61237275dece535abe8b5001d1012147590bb11df733b6837f5dbb028069a3f1c8ae2a61c48e953b2713697eb71e7f2df2e79f9cdf636d1a9ecd01326baee24a94419449b540c32d4c8572fe131187aea2b7b0695dd6e93265e3e8c35e04e702fff37427c5bc7cbf760c91f257c176570c5bef4c4ae23bad93797409a11ad8d92162bf58c9ea2ebb97d34e068674c00ea965a4e815af054f8e3d0ef376c0789e4a6e51bf1e51203e3c4bbd1d203175a6a484def7c81ebc6e0eb9ee9c9f647f07f49686f80913b45a4c1a94654fd9d87a5bb333a91524a198aee8317302e6fc659deb08b6f5bbf184122c6a768766378fb7c0dd2300ffc67ed6b1e940462e9dd0f1b4c860db775eda3741ff04675976cac57a9f44c0b6746adc5a73ef70d362a896fa92c88e6171ad4f36b53ecadf5cd2e79bdbfeb2b76509547490e308bc3398783f033b06c6b029c223be046b640228ed57bed54cbeb9752ade223ae89f1bab9fe25147d96d15cd36f507bcef47c6ca959d14ce0f138d9bd5910dbb39d1bfdada3f56a8f9befe0fe6c25ed6949422635be56058700f4203882db22c89c9704fda816f184db284e4f130276ab1bc4cfced5777e698f1b9c863ff3be5fdaec196c0fda5d7ffc06d3df4b3fc721b9ded7cbbbe75288c3cb2b8362714d5aa51915ab9293cd1954cd72b246513f843bdd06a37e8d1a2506a485487aae9ffdbe96654505f8ae70be5bad34b370f3de3a4c67131f8e842643b49ffb228d3a57515c38b5637432ce4d11517e03c8e2c419e31265f02d3d8a0ce916aee4ca24096a081a4604c62e8a58d483c7de810bea3c73dd7ee747aac78b939fdd36e531e71a79dbe4583e9efde7e2fef2d1708a224d6e446f6e2e569c39ef24dabb023130e60a8411489c939e3383d77c201bd3d290914d75e3f9d21e88f160b6babc482c5402618bf20365b43fdbec387f971c9480660b2b603983740cd9688c64d37e566aac14c626bce666d0c82dc7e6b651dd1c5daccb12cfbe17dad4d4dec00d2c01a5455c5ee0e8a184476d6c0033291b75d7449762eb720346531cc238d9660926ea2ae2863f8d559b0a4f576dd6e086b7b31c580f2a5c602f111907c59416bcb14b2c9cbfd2719757f84918cd45efeec722f7534028ae0f2a600d041531e62649ea7b15f4908da721446b14995fbe2e6b18f4ee6b9b9e1ac5b3af9d033917fd34099ff61f618357eedfc033611fe8cd0d7b57158c2e69b5dbf057c17f6c7f6f2fa4c14b44e44927cb3dffe4d78777e5082406b2dcad55932b37893974ed182c26c865e5c9c01d4163752075270e11ba545d202fd7d606931a388684a23a30e916f3ddd764c7a8195f9bb4ff5a2ecb0c394c85b0c6d318d02155062211048995ddbd4d6e9d013c6ace7305a0e731d6c1ca7dd81844be4c72f9546a210a1f17b11ed6e92c0f1218321bed28617e526b3ca91462333b84ef521614cbdf7b629fc1c4ba5d9e83ccce6c7ddebc7ebc3ee5c1b41e746d5e1f2cc1c65739dc0ff022f91728e677a220b9b653189c4b41eef6d5befc44f286529ca4281387d0528ea0a137631c5298a72c965cd207a1154e383a83419bed1e8b9c421786216ad5102a86389790f92aa93813a9365873c87e552de67ce25d9d27527770bd496d7c657610ba658074966593867537f328ebbf4b858c7d239f1ad853dad67c7e8c08d96f5fbcaa221f09fbc142c1a5be18bf62c2cbfbac7bfb825ee8fb5784c923fe0200b4bbb4fda27f736b246e30778ba6ec7c2e962df57018848d61614fae0d8c6eda0e5ea3f36748da1d46790356a92f0d7bdddc2487d91abc4686d8c0d8a9a5330155c4874fc8a277a0a69640d4ad0f15f2923ab8a575527d122882e604678c939a02ea5161d597e643ffe774374b8b7c5cf3625960477281bbbba2ad24d668e927f7bb9a3227b4407ffec09eeac1d809e4f8ddebf0aad5fed6940123e7e805b1dc5087386291c85f5b41b16c3c5f2ba29019a6cf8e7605f182d94861c773a0baea05b585170d8439feb693bf4","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"dbba0100f462705d414068b345035e5a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
