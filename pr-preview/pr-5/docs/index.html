<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"53ca18496e08d0e18f4b08de3c0f55dce4235b036d9d004f833a2ab7bc53121bc6d20fdab5c0aa92694cb2091af1e0ce313136c6a821a2fcf1aff6e49d3bac5266c1119cf57ae4692145a789c82af1eea85543d5897d0b9be11dd6f205dfcdcb7233e476dc2fe83b942722726f1ea6ac543cf833fbc6e8856810df43940d2dd04931b9243e1edb9089ef125c38008ee6e0c83e403422feff96fa616ea619c9a5b72152ff6f538962407ce0c16755cb53e73e96246003d666287d0fd826e0ffdedd60977454672b43c5a415accf6d08970c7bece520fc42cd31ce9ac574092262f0544a466efaf019de9091569b0d265f94d3a32b4dde224e7d628690bbc377a8b7bd2ceeab801ca474207556c7b1644fc21cd4fe0b190c77da984d88899e711136a772f4060fe269fb9e66267bd17cdd145d17e705d953db9990fefa90c2ba5659a2d62bcd9c06510ff6d773e47c345db0cce729d81732612ade6ae12d10dac45377e8575b079ffead5b88b7599af4f58ad4ac5ac422c5908c82cde73e9b6c8bf4014b97d92710b34750b008093355bfef2210020b8b5345bc0a892aa1878f2ffdca924a83cf6c635e2eef79f13dd52bf2ad54c686533a802985b025ec227e9121de21d5fb541707ddbb440b0260e3b5046762a46e6b209912bd4730e51f601f810de4d42ae472576be1fb70f0460b91131fcf771a154a7eb191bb8e90a20dffc301858e67ce28c15a263f6f7c321db9183f67a72a923793bee1603553d2fcb50d88a2bd96487e807e832fce016061724dabc4fb93f32290e0d4ef648a48e09fdbf41beaf5d93653619c3babc4222bb8d91663baa210ac21f5dabbb0e5e7352938cdbd2c697df276e8d315f3bd3c54cbc4fc06b75e80f0e614287fcbdf9992570762ec435c20e9de50da7c8f24b9478cd0b22eb4affccf0c2e28e1f2c88271e08517e1f3b9325979b0b1312047fcf41544544e105818fcd7254b7f6cf8a77e0ffe76afec8d8b332ddff21e2b480bc21d343afce18a569dbc783fb06868ddd0b8c334a655a3ad690446db96153f8862ba9bcd2d86e8a746113e3f3b626951f7c70dd202129fc1d8fc6a7a93c6ede05adcb636e466641a8bb9d263c49498307e648cf7ed40a9936fe8eb2d3b6d1341743bef1a9ea994ccb945480cc42a185f78544527572693261e6f2ab5bf2a5eafcb8d380d14926bbd75dd6d7575a2e08622a5a35afc7dfb199a3f76ea0046deb395cb326161b31a8a8e4dbfe6ecf0d6ab4dde32df3b571c833c565d0c2f414e59f861574e475e687091c036a39812e53504c0fce4ce95dfa289ecdd8153710c6ba828ddd0c40d8a51f5f3f37b1e53065dd60b2d2e399a81322e0b90f70232dc0a78a3f75b1139edf29e9c2975dbb565087aab985801de3b80a6f14c1038b9dcbc597a6a98d2d008bc94eae8a63120a5736ad724f1f4ffc4f0463c497f853c063bbee0c03bac1b5cd183e8233d615769be02a6f2cc206fa867fa6a3f7ddebe9b641fa7b7be3f6fa0ca95ee603351a76223c0db5111aeb8231091ff4318f295afd55f6eda63d52c1c14cb6599d5c22c1535a17866d73e4194af20114bb6043d3e7addd9380e7b161f6b041b00c839c973f690e85cceab06372e72abeae69853565a21912875a555bdc1373f6b7c86de371f134aa6d323b934904ab3753c5d75015a21729cd494ff9c49abcd6092e8aadbb381df3b9c96df2b15f15c218f73676ec99a860c5a6cfb654691c90191ea3dca72e3b21cdcd61859f4ffcca7b2ff7345b28657e73145a8c565e869fb7e6510e0ef21586bd94660c27a63984cce38ee674771ed60056e40eb0ac41889889fded1aae65796dd987eaefa0f72c7b5039fabd07029418ec1737ce78d54cebb45c389764af84343113832909f968924bb157ae2b2b14f02783f052e3b07c8caf25b93966b0dca8daf920ca67369441069a576799cd8595d19bfb93836177e3d7e94af9607bbc508bff183823c015cb83b9178e33b218262e3065eddcf711f6eeeffd5f86d0f54acc1b3f4cf2d255169abb124c33f5c814e2c685a7306141ed895270f118b9a9ebff455b9de8b793a7f2f61b0782b6b91a6ff1f7fce387b12be8eade80ca61e1d390efe1bc63e1dc23c20a3a8cc0d7aeb0157477132217e3618bf04c346516a49c0a9cdaaf54db95c63ff92dfdbafb951f7d089999dabc3f3b1782ff4046672db6ea0bc0d040955e483ae86f988dc561076fe077f7819f915e49d6ea6d40c9638091f7626e6d9a17d5569e6986dd339ebda26d73f446de37423e003f25c037d96a4a9a5ce98ce454d4f8f2a55280050d742a2c96644fdc358a0356ca200bc3f1451c30b61a2141f4d39aeaefa5636ccbcc190bf4e50e46c45eb37eff4109031826503bba70c31b38963eb38639f03ee0f522b5ff10ab00c39973dc241375335c41329d3bfcfab94d4d7097f3bef0c0f5c2c20bb27f35cc51e6854f5540eab9ed502c2c35db165f0f8b3657e00157cfaa5cd72039a8ac941f6e3699f1597ff19bce5356bb0fcdc892b8182ab2c92a1edd56819e498285a6e1b26967d9f419c0216d43ad0a905587ee519338f04f15dd5dec399b7feb8dc21d96cd83e859504f61ba1401200b116458793dde63d46f5c7a9eb487e8c97257ac49e3a5c7347dc891d2e674499b3b320001b55f3e878255d994c7007ea17dc441bf7feb7c79aa716f6421a5275051fab2d2230b3bd7a9dc8d4c03ea0b99da21f607b54fffcd7962d2b67232fc62f0734ccdce610972507bc58dfe8b8d099b2a7750bd51bddcfaf3a52290d1e99050d1f33210602030ea9e9d50632f632f454c3d92e734c2698375f28d6d55d28d8823aec09c9ce165c8bb99f57858f14eabd6a3e7fea33e5a27ee67e52b0bab668b978e909099098428af4a6a69cbee1b5b1f019be039b429bb7e4a53b2b95310f63542f42f21cc504b176decee0b4ad7dfa3a05f25f14a7e5cace51a81896e9f926f10d0ebfbb744ac8af4d299bd9ebb7a66908c78313d3508c88ebc822890d2ba6e26f5b12e76bfaba41c0ed87612444366f38cc8d22642bece1fe96ba96e5a81253abaa40ad93d79bbecef442f1c037244496e2d71da1701cf5f28f3e63d351141d8f7788f1b50cfee90a6168504269de69278f1065e50a419c2a7281abc0ddcf3bec9b376d7ad52c4560b362f84b4bccc036bd6cb4dc80185db7ec3163683e727929e9aafff5170dfa82a8988ed0624f601d38d59ab6982cfc204cd217a949b05dc20a7f7959f1aef8546c22e425bc10c55f64603bf1901682f2ff3e78aae52d6de7c8ad6a4717633a54c5fb2bf785e908f5489065facfe0e8c19aa2a4185e02d3f634f815e07fd8eacb5dda22f152479e6e9b3efeb0b9c892b83c0ae621c167392400eeff632ee874f62746d890b07415690a3d6db170ad64251a70c6a61b0b0c5104b7c3f4c8b5dab282c2b6582d8ace692cffa5eaa4fe3fedd631ce75595fe281d87b9f7f183bad16ed1d52ef1cfbbd37ea732ca24fec040ec40b79a749d589574d50cba58d4be708319604f5176d95bb4da62f31fb19ac5860264c06acd5f4a9c35e5b62174b530e420b0aa39e39054a1f5dfd393e46c0ab32582b81a4554f163993d58c16eb448fb7cd2296c3a28b36a6afbe15c73a304a294b300ab0f18c29dbf46d83cf4a4c01aae3996af40c42b8864c70b499e9177e7d167be7e55bab27d769fc8318c8a75c5b859461f72eb280074247516d22e49a028f5d6a203bb811213b0f2348a71e29f08c42d31e91df57d9f21daab48de4322edd9ad4822f10ee3978841eec1251df375cd9efe6576730e983b071bf62e02982c311c73a1a849a5a3362086a6e62f6b688161f13e5ed73c7553eda3e118fa655c2a599bd4e0c336417c2e3dd599a985e72c0fd790b4d24f98162194f3bae4f3e27c95fe8a679786d2130133ffb0fe699d2df22a21bdff88d4bee2d5349ba06ddbdfecdd2696b0cc6b7359abc4a8542f5a39900413ab44d0e7dcba3efb1c865a633b16c8478ded3d0e235694017e95640661546d3d5b8363126c3f064dbef0a14f715fe377e9ba6a8fbe5b411d43739db4b523ab134dd608d22538f22126e78602d3221856e257ea575e11b4f203183a844b433c1b0c315c1dc19614ac09d1c9330b0892dfd1b31a7b076a33fbb0e12c5b3c9abd990f0d7d72eebf2370103869abe80e28dbc7d60a7328bbff8f21fd7f70958c2ab3e41bc473d5b85f1b14ab94123d5bd4c961482993f7ddfce17a020c8dcadf834eaf39306d056eac7377e9a1575bc8b534744af808c00ae2be26938e4dd2c4d8ee3be8c2f6dc055f9c8bfbc4c86b0c95402c242bc561b2363afc92fb27d57d86e3765f0d6d7770d18b653e28c1996e20ffcc3dda4153452136e7a3c570886184cb2a6009375adbe7d32422db449bd9d1cbcb215438721303bc61d3b5d4e8a263181ccb00bff3d4e42ca7a9e2ee62d2a9d4c6624b4eb44d5f4d71a37c0337d7586ed71e47a688a4751b140f55cca18b8bd9d060d5d75e969ac696d40aa3b560bc9d87991f7e0e0d22cd3d85b2f3245a66b6ed72629bf2bf27823599f74aa8144bb315302687638f6d07b39cb1e5cd98431c0b1abf88e29d5038b5f02158ddb42f455788f05a8a007df150dc300a6b1611b8ee00bafdd2af3cd3fbf56debe5bc84f18b15da63ba1e66149f3bb6dea300fb1122e163ad0c38c6e3fe7bad615441cef9d31e6ba81e5cf72191164993c430ff589c4bf763a3b2f1da1dd0e50a3d8ad1dabb307134defb0799c336a6c8f90ac30c478623cafc2f082c0418c5d135a2b3ec33e8a41864c636b99cecb22e44dd9b48b6a1dd5b7bde84a3abc28e89d1424a284bee2aa40317eeeac413d84f15408dbc460cbebb63f957aef20cc825747c21ed12b087cfef0250b3deefd699321b42dd2739a387564d6c89c6aa4f9062fc27e86763f03834a76d7e389cb921faa84a5bc7a3f6f305c8b37abd7ca2f89faf6e77df3ce3366173aeaaeddd5952dd62a036f1a0193838211f9aa3cd6e2b9470bd44cc44cb28245c94a95ac4086afe44fd6dfccf5f0de8fdb852e9aea8231d2719ba95291bfa9be7a7eb518b6696b606d91c378071064c0cd7d08d178684ce3c68919cd7d58367a9e86204ba067c8ec3c5555ff48113a874a4bcbfb54c19f7303c5aa3d54c03abb1c36c6a2640f6201b15d8efed31f80d40c23527243d735ceb3fea0f7143246ba2bfacc9e3f22c9ae3462d9bfdb6b41c67dff2e028710c4e52ff4175db1861410e93092fc4707810b4f662193a3a57fd88682f7df778c3eddfbc344be8f02587a5c079be1361071598f7f3bf44cb6cd90ce7c8ba66621006fff8027615ff81bb43b36b47de6c5c74bdec3c299855b7aa97a985f975f820faaf003eed640d7d467f860e045d9d4582f13477e02087a29ec5a47a6ab20e22585d5b9ffb2d42118b5c07a39a271e9f7193b0d1d8631ecaa554423b84ad19e89386b121210042c011ce9e0ed8d654595f8503fecbc718168547e9cc0e81aeb7ae016c2d5720b51605be37ce6beed808b2133d184499d0296df8bd32c6864fcca68634e16fb49d27025e90c630d052752506ed2e883f4f4cb8de22593ff2529379c326e4e006bb1cd875d41cb2b6efbc29a84bc7e0156ddc3226c71b56b272ff61bb359bb1e5911a5c6fa80727aed38a530dcecadbc92d89f41b6f2fd465bd1996b9e5f92e89430fbc9b71c5eb39f547bd659a1f718eb19c2f773c0ceb851e023cb67cd5f47a5a8fa9e7648d0e08f5bc74217ce1f8c171773a9cccf8a1e751e7b5323c288a8342cbc0f344e02f6cc8ff6662c2bdff8d5abc60a0dcf86d80481c843cc002ef82de199341ae46d2313ebfba3258b7d7c4a13c4e94b19bddb7e7c43b5bb88421bc57fde873da32adc8aaa29d58dacb33546714e6095dc47dd338cf2a0780b6f8e5f94e2821e64c156aa70070e39a69652f74a062ffbfe5cf7b8103f2f2187d339983b5c7e8458a9fdf2464c5adf1838a6e14735da58b9e47b7c6c66bb77432888af3de7230344e0500294cf07ddc3781e67430baf4421b8672916535b974f3d3f8f74c86168f20e322a67ef39b56ed310c64719c8c90088e50727348321c0a35e54935495935b93648fb2114c38835a8acc08592a02f23307496d4b7a277942ff7a390f9ab7c639085ac7b4a2d7c32bc77eda799107b532a05e57f22a811dffff4322fa8793f5b6f55ea399f9d482e87bf4dbbd74c9ae8fc7753e8669f94adf02cedb1035f557d3237cb5e6e53360534ee7dbb01c84f4c7239b45fda658882ca71bfdf2b3478aa5419bb4de90a1927c536bd8947693bd6bfdb559047b86bd8bde805c79d08775bad0ef838b4a3b8fee3c400adb238c1f18e93dbb687294f69461be5752132dcfe9a812c9784f124b338be2227faa7952117b0f786d04bc6833efe0a93886c1d20abe907980e9b89c613a6ad365fa8c5c171b5a944379e55a4df3f650e8759312cd5481685c199c9b566a062f14e2d00f0e2f7737f257bdbfe7978b64d84290431ece6c99f259ee0ecd84860b850de6d7816eb29a2008af157f708097b0395ae288774820ad5d007d858c39bfb6133fbe93d9c1c01a4643cc9958e8cefaf32b09fecb720ddbf2dc6594b11a65c0e213c0ae25ba2c788412cead0780bcb38c6cc3e571988decb50fc496a2407807ecab9731ecf013bdf213c4aeb7c48296dcf059dd6fb53eb6678cb00d92926ba44aafddde3f4de19a8532a5f87b2827ee47db91433c1f77443f55d28164ac1c73472e352a6de0e6b43f515d1cbf36454f64e6eed4bf69a1f484a7abfa9a087537d072457cf82d8a3e7859b0949ef0cf0c06a4ed73bcfcf973649e41a58718626235189f6868945d50d55834722c52f1d760f6cedb911c8f17e616567f5ebe3ee568325c9101a36a01fad70348141962bfe74e444543c9863ad046d953d069f382dc5c6da21dc3c69f273fafa6fd6dbb104a478d3c2e3459e3b17cc4d2fcb4512cf5d7ee8cb851a5aae4e5c47eaf549e16de15c0cfb304bc000c9fb526f4ea2df409aabdb4e851f9f72da31932ca8c3b47571555d471430f5d36edd2b2795e9c0d02ee861ec12123067f9fc87be08858d0d51402cb932a0ba900bf57144d208fdc2885d7198e0bf794083bde0d6f83dc574bf56a5739fc0f6301873dec2ab31d8407e408dbe014bdc48eaa75b1ae4d071f103cf852beb09296999bd4313127fbbbaacc31c3450223680e7088f6d7d7b08a0e0036768c3273babc93aa4a7fb58d66bea52aaf23977cfa5f2e1c1afe748d21a25a01f41b99cc5469e22ed48f9a9ba1bbb0457a7c0f7293d3817b8f68d3b81e64b648530f4feda66020f54b9d5aeb5f93662407bc65fff83063af8752a0e540265260257a4ff8f3fa5cd2c18137a2b0f49493736de3c7fc43deb7fd3748b0a3f45f0b10574f60f4ed8cd7b74fbb6c327418fc6246c33f7d08136587564f3f48076e5b5cca38e5a182e4102886f92b6050ca403bd155c0aed3aade62db7f732bf62f83b3db7c84bd5fd566c3ad982248775805d6faaa7d1a56a6d58b9a0a00e13618e9b6cfb3a06cbae8134510e4c187a45e0f872db3c87517498c9bc328f43971b1350bf5ab9076d3106eebb0502ae89b04231ba0701b26682bbf0bd4cf0e68a404acc6c4315490c9ef2812efacb7630272eebd7119f04fd1bf4cba7b434f7dde18ed5569dc32a4f6fe13011eb60a128a5fbceda519e83fda061df901f2efa4123caa1754e2b653e922c05c5bbdf47dd74318c6e10e0b23cf6421aab694bd503d5e183f30b097d2bb9397e7462f28826c726fe0cb00990966b9344417eb60d2d8900b790d8fce40aa8aab79318c45530762df05aeee7eacf915ffca9a2d690e2e2385eb1cd8f4f84038342f78e8132511eae941ec7169b7a8c6bfca73ac48dff54a103971ca1d2e22a2bdee60b225cacc5e242afd275a2e511864b154e57cabdb2298e46f5e8f95d1c78748a8fcb54f8b68ae70ad7501446dd382cc1c45857749237a79d31978bc31ec9ff1e81ee32eca68ca83bc4f11be17c44fd32e51b37e0bb8d801998e52f4b9190d9e22e1b54599a1d030ede1865a84eb026a72fe9501b5ac4a94c8f62bdd8587516b41be767166a30bbf60d8441408133d6a91c128c9d71d6d50c67fc4c9723221819a4ea249f0756f22d44ff81534c9f7798573894446b678429edfe745f4998cad7e79d02a1abff99b4553d6ec4ebcce29f1efd02f9cd479bbbb2e47cf2fc9122b1d635fcdd0cae6f5b63016842a059af36df51967bbd0b3f180e74220dbaba115c9d86ce8d9552928bf8c0b594af93301d63dca25c4b2c1154af41b547dcb1567f6442ea8a7bb0ecc86b1e72ef730a6f9990918e0dc0fb3d8491f7c8560ced6651bdaaa026cc21b5b7571279af1a9b5a6cf7251f90062685b21fc9d6cce110c0f782b9eb64edabee151459d3432cd87cd34738ed122cb660986e762b3d08be79c25e5330d4df681702609351e9cdc8ab0def9a1b427ce07d039ad4afa69a58b35b226696ac5b86fd258cfb39f72a5b4d79e73a2dd17d672b97c2ac1241d1a9ee8b5dd5db71779ad512f150dae29f72443e7e0a6c2b1f0019135c131f683d934ea9b43e40ab98ed0e65d3d11a6d0abafda8f563af2217633b395e988a2df2c572b5d1430f415d8946e8ccadcadf0bc693f02587800ddceab58e798d51ae28b4ca1ea9f4eaebcc750306b03c92ef6146fed816cc7347841d0f6c950b9645a039e2bb841ded3a37682a564d99c86ee95ba67065ba77a421bb448a60e757d1be124550ad4c4dedd6b0bc655a51add12f8ba32b30cfee8d51c0f7f2e6ee53358242c2fecd5db6a5f4f59c546c8ef58c0a1cf06a4ec31274c380103a7e6e32529c72b220c9463af84de91b0fc1aea5e866b03557255edccf41140230e7dc154bf344cad8a88d11ec41e047cb43aa576c23eb89989bb89ea0fdb277ac419d5a6188affe6dcf48cc04ed600a22cf3391d3cfc83fae563f8894789becc43a2090f0912822e305d0943f5264059a8b84b10121c386dda18469b10b854822958b56294697dc49aeea4eaa9ed8969960f4126d7b9c141d11f1bb83e2102744e0b1679c10708acb202c26559e9191dc21a46694f0102d41e0c1066e5b3c1feb00e367b54b6433e3c58d0395c09ce3e6cd190016b895089777f6a1456934570e7b4ef144a17cd01be8664016a541acbc0a42bf8eb835554f19d5c63c11851327bae1138445c725dd7965f387e5c87a225dae775a39c7bfe3a41fe291f6364e5f0a7f57c6518de4bb944abbe380407589587d32c7883e84ebdae00ad10ab975ea5500984a0a9c20d4c377db6163b0a8ec2bde7f2520e66dbd04d6b372ee4548089b8258bb5109f0b5ec8df2d98ab6ef4a10d92780821c2419d832e912cedce8173978ecddb005e4ee26ab34f8980057b32d184b9ead4d30c4639118b60a3bb4c57717088350399a60c9977fe1b81c8d31828816bd8c270512f8d650ce0e1d2f33aeb08cd64b4e672256fb8970218bbc78116779e9a382571d70137c5034ab6bc67be589a7d8e3434443e3095b0eb60814157ffc8dc70376b6dc0d1579525fb6f70cfc55df8ad3b7393909943fe14f84acef856e6635699e88ef392dd4e5dde5d6fcc057d32e4badc65f17d1d8565ac7bfa391572367dab39c92852fc53f3eb6545b5edc5699b32a40d780b0adb434ba27e42b7630152d6c5ddc153b5b84c9cd8971661e0a25112c897d30c987a312ad8b2e2a080c6a883ede2486a0873659001c2f5ac4cb685a9d20f7214f505c24ea411c92d1820b60bf00a75e31840816337ec44f8f88c7ff5f9da00960ca190441b32fbf8070311c756c122b360d41fe66df28c3a0d4a5430cff3c03577c355d61460f6a2f4c7228e1b1c1cccc998db35b042648b9b8e07afa7c5c0787f6bcbec65bc606cea36800362d7a9044f8becc8c250dd6c30afaef6f6e77482632c8a2928ce15a01450c96187e30ac6b988e6fa74f67165cd5dfc1918c89ddac549ab69817528311ea69dd61fc4e392e1b43bd4425c6ecb1842824126a7e42f311bd48b3ce19b2eae328928154f9f0cd930538d86838ae05f0319ec9f8755766c1cbaa5c20eab641ffbf96f09046609871608f543c2f10df03cb1667ea408b972676868b6a04eb451048e5aadd9cbe4fbace92caf5810bec353f0e016463f31e8df9dd3a2b6762922fcc06746a2415ef232ee52775c46708d9874df025ce184d81bb67c5febd40f6b7b599cd90c6234c15d5b0c15adac2a0389a90a4400ddd7a8fa51186fd479eec1cf9419768dd839cde79d3ffb7f1c765fb730a74f11fca8844b0f373a00c5952d51b1d758392ef2cdeee86123fa0d3988f01e86394aef3317017390bd7c91951fecb8a8930019977d20ac38af2879250dfe83546bfa5c637f5f465fa9c094814f43358d22a1e2853b3982bf35bda73ec498cbea9c5db9924de6c585507dfea7a618d064aac01a58c55e3826ba9c31ce28c2cc7245713e7cea8639030d4f3d130cf3953ae02c1b9e2159724bacde38fe249805b82f4d3ebb7fea1b0e4de54d9a3b02001686264ee88881730948c02cf3224a9df8494293d030e626a83910d926cb40e9596aa887af20e9941e5f92b0535275c91c888818f6471bf4b3158d945f84c5073d1d2da3912b9ec2710b8624618d2bd619e5fd9b6f8c5707f13ea0d9658a6d64a5cc18161acf317e6e82ed876a8f01fac8d5a4d8f2ccfb286f983920e28703725bca810cc35fc1b7f1cd5a1d52e5ff37b62105fa7e16789ab6aa007fa87872abf733c3ce82319f7af835c2a29faea5a477b7e91a492dfb29b23024e65b9336b22d57852b6324164f63408a627940a4e5a91c48f4cee9995d410823b0a54d2a0c06f80fcb3649b58acd17c5e2e8dac987ac9b439da17358f53174fcd9da92f3c2984636d1c32ca4f227b07dc1b3dae375c865d6d06970022ce0030782374c01f958bd4c43fe9b91c77c7045bf1f0c0f3818f43b6cc72a77b9248830d7571557b19ae9b94bc9c07a894558276a1db2de37c8314206ad26248aab50bc2695167bae679b966368c8b5f7498491abb331eba1c8a132086d4dbd6efdfafe4a37569c7ecc0a8f76d5fecaf734a7153836fd0402ec41457068bd84d77fc752146ac137765a4a05155a05fcc19819b06f3af0fa55e3c49175264fb6fc54e4e23765b164e5a2049bab29e18331441468873714ac3d096fdf4bba17652e37ebe041560176429be848ea15c4721a262edd7c29ab082a2d73fe4a70fa09f02180e551460729eb63560a80d13def7e8cb1b0a5f71a95c375caf5402c57c86c256cea91b130f180a019e24eb24a32d8cd320fcf4c9d1fc31a458d016fcc5c5be72ea572222edd8b57dab39e7d834933c26c70337bfae3c3cf53489f5da972266526322b01ee932460baf1e62e647f90c366004a03725c3daa957b71c7219acfe518450fe480dbd77943d87c4532794c3fd3cd79a3fcaee676887b831ab3ed409b440a890a703532edaf5e763ff47d4e29374129f78b2b388de5b7b78b53c721665dcee079bac9a8e00d663ed75fb6330042ed4d9552aa7a103e2451ef1b899b0d554e0cefef937d6acc755b8ef25dd7fca644a27a82cda889b57f4e883dafe02f87c88d55ba8b98d6e70dd0662ef015492652ff48b4d00508310178ecec4134ecd311190fdb2fa6213fcde7722621f68e782cab61355e484433597c08e40989b3e2db14290b22a2c9489f712ff42e4140fecc61ae6e24dcd21c92ffde2b6ffb12f0298096331cecc9fe562004b3f0625c68eb9cde349be9ca6c26eaa74977486b2155e364264d6bfe69c32fbd14d0be5bfd790f000cf31cb9cb574f5b232d363d751f04931cd973706c720fbd5af8c41376c60b8eaa8c1a92a28d6098e70e88da041e1e1c47f8bbc095391cde5df4308cdcbd77edd0b48f887280c215f5bfa7a2812c7dd6e97bf5c05f1f6a29fe255818f11c65deacdb38b9d253da2bb7570d734975a9bd2ae82c0c78823f9c7bf35fcaed76c2a5eace8627a72e366cdf4139f32aa183738a7904a4270fff734a87c3dcc350708a2629bbe17f1dc24c44d8c383ba7da10d5e4d58bb941c349c697848c35826d61e922449603fe1f86078914295ccb28043001cb26ddfb9ecb106549aeef76815de8273ed05f3308411c22c506175cb1a5772109a3a9b127298bca95aaa848acfedd527d08fdb3d8e7945b8d19667a75eab140791c3a5d802ad50b717f17e3e212ebb0c7ec439fb5f2e823834d2009aa44fa8c04f12e878a727d71b655d4d8b509f997a7ba345133f70aa394a8324ab85f9bfd42f86dcddb973d79ae43957cbc884f2d644954ec5e3a7b1b3496bf9c290763e0c117eb542b3dbeecae5ec54a576ce8353abcc6fb28c6d0fcd15323feeb614bd208cae3e1b36cd1707d49a3c596594a4a21fb21c77e2507329dcb1ff4e59cd748329885c2c3a69f14e236d6c51f7212faa5bcd71880bbe875ef57635a5c63c9b7f10d782d4f651928a9d352c09606ac9c8dfc3918a655a15f7ce28200a49826a9410be3f38f2752a553a78ccb77df7af496e03d447910a40e16e5aab1c45b6dd4f5325d997585946bc282a7dfdf62d454a17dac2d9192ef77fb5cd57fe1cc74f0ba869f843dee4c7f52cf8e73afdd1e5ccb70cd04c4df7c5ca805587b712ae4dc5241d9b35d5cd70854bae21c6b56b86b2721def445f4b07b51b3a573cb33468bca799b9feee37bc339078d09f0a9ef4b2e67a666a614450a093e9d2ad2a6795c7ed8e83fb4d8ddc2ca8d15e566f25d22a5c221a2873f4f2870a3f7190294cbf9b411a4d724ded1883d735329f5ec6bb63f962df195584508751cc610c9bcc381b7792a390d634770062ca18c21938bd041b7292d2bc529984c8bb7e59dc6e5e422f0fe0125ccbce8198e07537f3c88a980fdf559f901fd7b76a4d738f9ab5cc075223b8a7d9af89275d95bc4329ecef66e97065b85acf55b07b04b0746e31820fc83cc1e1f19c6ebd8a7f9e0927b9a69c94d329b4f09389aaaf5b7904f8ebc8a16cfcd195b7f4054363c3982ebe80107620c9b80c56b14a78dca60ab505aa34eb666ab06fea4bb4b45308b958d408f73184612d1417c40b0bfb8a008ad19f130e4f606ffc5e0d97b0fb153f935e520e1a6b0a1f2f5084ae595b73ba2105131f04eed3c1c8a5423566ecdea675f8a23719e2030ee2154bc199c259f897cbaa2ddbab1c38fbf2990430df44ee9acbdcde72afdcaccc1f22eaf98a441643c5e6598ae81439f9ec05a24f29aa199d424a9e617fa219ea414978c29877d316fc1261dfac606a01b50dbf047e5b827949cce9ab39f2bc9ff381d9c5e23e84d669a59dc4155ed1938b5000d76fbca6c487a015b166a0e0083daf6ca3a358b3552db4896ab326760403272922a3374b2955954b86c93cabdbc935f27701a6ef46358d762e850a04e6012576ff20dff2b2a6ea98f19ec0d32d9e8d91ba71f5d22ccb38a6d1d8affbc6fdb290cfd43e0839d319c1ef113d38dae2f87e534ab844502dda5332e138139cd3a84c87b1d3dc304409e2c22f9aaa5afc8fddf7ad177a19ba110b2267f198e9af99cb2ad2826ea44dd1217cbf73becf6d00afca308b7394e755798141d025399ac72fd7a542616479941f8eed8ecb498767bc483b9379d8de2c88fd709e481d59f3112b54811fb6161f132e94bb841eeec62b773782736d81329963ed8a7507ecbea76dc5c1ae50b14cf0b1593dd2395d72826ac084ceb4ac793b43bdea8c77a3498c8edecb61e2787cc6a2c6111abb495461ce7a30a3a3a93566d8e977c6d20dc6fc70356fb9a16e27be0ac280224cf0103f4dcceed3e7be1a8ce6932729d513dfa74467b9a60bf488ee068e2664f3ec40e9b084debd6408c02e6efe934b67cce66da7711557dd3718c1775cf6c478054e7539de1edeb9c4c8cb2ce91505021be9bf49da0674314e5789df6899f1d161b4df0004eaf5493fa9fa8f3ab89dafc31c1da307cc733bf738641b94cadc63c476a6294d0494226b1213c368deb1555f587ae68d402151ced4e539f99ac2994d280d7c628860ffacd8daeb3c1c462ccdc052ef0f71317aba86054f16114f1b545b50ce419926b3350c94c515c0d52f97fcbd77076012500cdebc594d2dd3c010caa58c73a8aa09c075e56efc78efea44311d7f694049a811eda5812ddaaed504e0b366d66a9e42c3b7983aaedb1e0cf64cb0a9b3eca35fa94b567196874b6d7cc64856e731e89b1cf51b4fd4cfd6063b25ff3f7f005c01c62ace3656e83119fad715c7c44e7cf5c5a55c248007a104ce66022c3e5c3eef7dfb745b69ad20256324896b80d9079ddb4bc0f5222e32e26aa45dffc51260686fe65df9836ed67fe4488881758660629e0f6d3fe39baa92b9cd7ba1046c2abf7292b323415649400d693820d6f05eabcbac412efa7c6fabd1b20021a75590273a1c35e6cfde5233348a4fea4fae9450229bef5afef43b094f5e98797a6bda995e8671daf4d940c19533bf73bc5110920865a1921a1d1375e8f8973f7916c7011f0313a0171a47d95784bb05e5011357bd1f15b6353ea8a88ef3d841c7ccafb2d16b96432832d6e4f16af2bff63a04cdf223e7837729c76af1f3af12c406184fb9ab9db1191ac68b6477c87de16895db1b5ec25ded98ad84c31d8a2af9ca0d1e66f3fc8a32c225a983845e8e9f8bf1728bdb7901be6428bc3ba0621ccf0bf1a4f204d53bd7908e268f0c369b0ddbe90c6ae1304b95dcae323ac09ac45a608572b1010f71c8a1109e5449c8e684332ae0189b09d92ff38d54ef81bbb10274f466b5c2beeaece7aaf4e46f2610328303b5b0dba62100b2468c95b49077b9151b1ffd22c594e68201260a93cc346919b0fc435a004765f3402eab8b05ad82f85332a950596cbd050b44598b55ad0f640e51c53c646dd6eb1943771c1e174b552a1fda00d94b356298d16e868aa4b1f16e923269284aa37e696a0bf2b7dbf5b647a4762e5239a6eb196d22123897ac897bc4adb778425c7905f54043b9e24fcf90350e55fd968daffd2203328758bbd518db357df38e64eca4ab93b149de90978ab4cea44c36d4a927f43a6d5d503825b68b4abea4a15a1e2dffc22366e3ed2bfc7c08ea1ed10b340678536b084442e2111721306c8c09b69e74a9141c63541c7c6b3db864a71e30d8f2df4f6964413b5a874fff8e31ee95f49080aad0682ed88c430fff8da87aea6d8401a5ab52ff98674f67d03cbc9b4b0d1f966db4620d73ba421a3599c8dbcd215e82c26ee1d8be8419013505a0af3bd85ea38c9c854ea19bbfe69481084de4f09bbc0f0fb5495db16aba73846eee17953a684f4cdb9b69036b97eb6379b0c412fcf4d5a5b4a0ec2e0ce35b0f22949cf01c42958253b810ed668a5219c0f21cc1fc3d1571340b617a4f11bf0788dc6662144426ddf64d0bfb7a5ec600108767520fa8448ce43b4ee1d7e581f8b653fe1a381df565d743fdcb5893fdbb2cd556121f379b10d5d509bdde5cf8ca7b3f3fb490bfd1e4dda6d3a8d2f493c2151976fc7aaf2c72832417589328dff1de4ec8b7b569fa157db48ae43d5f54bbfafe9fdd38ea2ea1bc23bb7b7dc150d2c558d183d77d2a8646e6e6b2ee352d6e165a0af9e6860b6b8fa8f9c6fbf33e402d3cf0d77964442c8864c1d437eff31232d8062badf6415037f9be401f957cdd8c7b481e0410581cabd3a3763eab8f3a30e500b3e51ca7e67cb10039f54bf44952b6c5f45fe0fb31385180c1045ac52807250d5e9a8bff353a9dafd6ee1aaca53d407fc721018c6538b9a8a42e1e17121c4d53fb16edfbb4a853cbe84dd70ca08b9afdd856d47fd0af70ad3d995558ddd914873b0e038310488c4f542b1c6ffc2ed950bb470a152eabf0d5b9154b10b723c135956515e498c73b008c521638bf2d7fad013165d65fcd6a3fd6d456e0224b5c7fc5f9e106c97d4628131f69e06fd327555fc6d99c23957f90550b69b43f1ea207da7bdd571c4b9dd61679d218ba79c0c0949debb80323d7fdbc702eef1f47f54acaa41f20518a4896a27e1ab883ca5b52c909354b1d8b90d63f1596bf732a1df0b667365d3d5f3455144f722d0d23c7abe258e60ae86222fb2c5f7069feae1245d0b1d0c87a3cf122f7eab9a2d645ab90732c37c45901cd125fb515407a3b7f76c05be7308b7d11489d5baa4e524c5400231bf05ac1ae2b79f8399b469f15e672d07519c4639b66b96c52d2c6af8ffc492a3cb1c6434397244aef98bd93baaa83f4d42746b7f70a22805a5fee858817a8981ed03e716b98473d6664f9334f84c48ab0f49c4b47f2c484d6cc3bbd4e3cbb1ef18319fda589dd7e011cbdcf5a667da4e6b81584ce4b512ae426dec028d2e17e9600b52bc44f2a199d984e35a16a29dc35f31f907b146ce646ad28021134f050fdd03ada13946a9c2c085ecb073c3fff7d76978e3129ed5a7c1a0b5a7376cafc5ff43456fbec77b728e4c5cd8594c8e0f05aa746f657bfa9f1eac78bac7378964749d48370ab95af9839f50be565b0ad7e3542b9fa1ca125fd5017a55054ba7583436521fc526df881c556498a9b76a065f01552bc7f4c92033c9171acda94c9e8a2ac49a16cf5242d3059680d2549baab8f6b8160b6acedb5debc6f3bdd412cc55c3bb2cdf6ee172f22fc569dab1fcd2f3b3105070e6eeb65012885767344b792ffe753d552a53ddf862806ae0ea6a0d5c70f0576d1c73c3c5ec6cedeac582c4ddfc3c26fc3ce8187dd3ccc86e2ef554f7d15c426835d1c76138cd48d87b1ad42b8e63febc3f39ccd9d7ea7d8c05b5fd08c4a51cba9e23a10aacab1a0c6fdfde4ed9be90297b029e8f7ce3bcd2de960907a7076d3d3b427d9e52ad1130668e673bb0fa0cca6c0ae41a68833f46d78f8acf1b46d6a8da551cfeba490b85550d46b89aafdb353f7eafb370a0f219efe4daa42d68a2b080ba13d395c4f91d6bf1fff3b62cbc6e47c7132964c7d9215cdee2149fd0d29a07e7df471e6c48ed04a04420fd8d6d5c54e360b6d40fd2ba23b7010e7685ef36adda523f2cb95db4b6ed7e46e3f3e6032fb22b5f50c8853bade48769fe118d2e8bf9899784fa85b46529b0dded9d4d060ee2b8abcfc1ae06dd4dcd2c1bd9f0acd395900e5b60d25ec57e8b6a8a86d647ffacd5e62d4f15e57623316b8773d2d71cf8ee70a581172ed59231a3d321a15b4a136517bff03d71f5e2263c5e4f39921fc3e1db72c03bcaa68d78ed74cc972ba957551819afd8a36ee66c6ca58cee143819de894c365bd0ae62af163198180df838c13d29adaaff77625822a9c92a8e17aa819ab1b26b25b54a1c8139a82812c0fd0814cd603e9bf9a9c454efdc27fb2112ec71c4145949e4e457e5e53b1553b7b97d502b259aafe939d110b3a7b2f2b784aaf993be2779d719fd2e9f67147a226589070df3899beda7d1d5a3d9a37a63850f4f6d0821dd889cc228861e767b672ab4145be20cd12dc99266fe103a260dd044e6f777a45d7bc529c432d96e0552c59d4ce0d175d0b5638fddf7a5e9996a3538909c1c495affdbce32899e57f64a07c779c2ba5c79a4d64b251eac143e4fe1912eaf98a26deaab9e67d3e4626d8434f06560178863d7999594d62e524413e889177dea44c40c7df0b986a46f6940ab3b5b29b8d73994b1584ecd093eaec630210c9a044f9bd963f0734b4e9dfe42e53f33e249f85e957da2a569539b1e223520c59f600b62c052d336d1089cb3aa04b4d271f45b9c58aa4f3d80a7f4889427c593aff29c263f96ff715d389607ace6aa754027b745c1d51e2d4ae7f7e461884351d1721cc206c6b3c5de97e391ca5de16cc00800fc6ac7b75b1a57824d818f096ce4e40d668d162b14d0e5482029eb3bde9b28799d713f68949d3963605d615b5fb749f5d1c2e4957941cca33ce70468e203ac12c73b5c1115d88b411e565571f6aa5e873adb274aba66a5b35f7192cac902748502b10b394be33b5c7a3082dad8fd30ac735733e827539746e4baa84040118f517e9ee600e4b24db3ed79041edf45e20004e0401aa1b107d5c75fa6baed2993e8b393443d285eec70dffea1c44031392344a1731787861bab70a2dd22021d1a65616482e2c178c2f51e8c9d4223d8ee0fbec84c4422bc662c49a74644d560646e2a6d3233a8a548cf865d68c0971465d5086a5719d0520a9995b56f41f87a03d75c3e3caedd0f0b457edf127dd188d95ae0eee3b384362b248f8f9c5c5acf80dc0e083de5d4214ca521ef659f6ad30f46ac813e801c891151f530b3547bcf886855494b5c52afe47b5141a32569757f096174dd0da2f48df9bbe3ce52ca217eded92e8dbb1ba02d9b37f0d639ddd9fd4cfd1bd00680142c32630a5b0af3640e766e40f936dbba5168121b13495887cebbc54799bda712783afd156d20884a59434d9f0ad96c459cd1484ad846509204dbfd7131aea1f7494aa731ae4cb732886a5e2a5d04d9b44b7ad2f1395316769d77e21d6899a24ecc8dbf38fb4cc08d33d7846a49436cca75ec1e127c5b1cfc144b4fecca9afb3b6f89343db3220b57607b87fb3cd616e6c8a90f842cda12da7cddcbbb725df107346a2423bf6f459dca336cb2e16accb944963541886a76f0fb22652172b8fcd375c27b37bc5c87d368866b70e80f00198358f93e0207a1721e77cd9e0f8d84b105ddd250738cefded2a140c8e24f727015b27ec6c40baf2d8185cc434c2ab3ee9392ef1ea95989090f6031595cb61acb9a06760773127ce9e03f2d857b365fa397610e8f0c20bfa408e00e5fec18ba771a88d94d8e08136c113d272645233e24cf88508e39c336123f71746bae1583250ea9964386415b03779f2c588bf472af88da2e722de05d57d41bbc53cfe12f3fabc9bb146f868ca819fdf34c87180ca7b11b7c2162e4f3bf556086ceb5ef6435b6c4e34a542470167edbbb0205c592cbd77af329795696047af2ab59809bb8c588517c0b54779c72c88cbf26a46119e334881edb682cb0d4624e58cb09a4e1c8b657890ac666a165bd57cf2d0da6874458ec7133ee17e44f842360d40b4bfada74d1c7dd3267292432bd0085af34096e9c48975a5dbd38942646486aefaea042fb577b6a97c58fa6ba476071a56a0735b02d21ac30c777d5ec424785cd254c620e96f7ba72557fe5d7bafb83d54194eceb00db27ef15e9e7679f944959da778de98026f37a17d02fb5dc98b793e972d9255662f1117cd8ceca688a273aaeb45ec55ffcb7a139b7b5eb7cc9c9a130b93ce2fcb80b8bb7db653fa44f85c5e817b7699b1b84ef816f3a16c3cc04e01999d60111ea163f6ae508d4eb3601f2e03c4706277f748eff05bd742fb771d1f958294958301c1fa4865d2c44fe98063077946f1ff7c266ee06a565dc706b293a200383c599b22ae7826db7a8be432288b35c30c72dfa931be98f0f03b4b64de0931c265eca4e12e825b788344f3a1eec37c83f1ae491c533e068227b87b2a1768c43777b0c2dc35aced0d33b5b433e4d4b93fe2d0276eca9e958d3d56d2de46834d77603ae37e796f7e3d5b611a59bfaa48f5f8ddb30b18aacc18666f8697844c4c4d9a1523bd131182b156646105506904a5cca66d1b01262b7a55cb38fe09ba5f0897c0ee8e8a53dd7e0b4c01a976b5a387b2e23e42bc0198399b1b8ccedbfdf9525aa31f6d6901887ac9c1cf2c12bd9f6a98cd9dabc617f450619adc5c7b7b25cfbb235b7dfaf26ad5a0544ed2bbe04763336c38385f8fd8cc5dbe89177ba57e21d5a55284b2697c63cb44c962e2a94d88e666bc25766804232d5eb7c31986d275d0d84afecefeadd6bd8e138660351252387ac53d95137a0e72e93ec90ab990c88c971ea09e44e532362b6c707c50da19adc65e845207b613d7b2927a21f09397811f6098e8444f5108febec6dea0f3c91ecf1c7063f4d49dbc9ca20834e57204e49f6c3ad99b8f6e13b322c2e12cebf1be971c8f7045ba0dfc0e3e0a775875c389e5ec2b19ba6797631079770aa518c8eab538bea6b66addd029869900850a909fc4045b96a60ce7caf68f1662b45611ff1608bfc04ea9b7e29ad2968c17129bfbb4fcc210f8c4a276ea48f5498af234ea204aa565af88a88a26c1e631751a06bc219be25fabc55eb09397c9ef3265b6b0e397e4615ab5c8d423e5fd938a8ba37f7168772f6072ff4bf652c743822d73ec5d7497ec1e2118c85489bcade88d77e236e4e7be33c32343bd52fd80cdde793d5a73d3835c9c11a6c0e86653b9eba30bf6712bea6130ef97725dde7d87888296a3cd37c815099d33a93ad8f7d894d38cc7db717342aa14eb067b5f2da36af6a276c53a3df3e496fa15db5d428ac3939c0fc1c4ad27337d70564d8e1106ce0bf664788fd7ccce28ba79e358f5a55a9ecabc1c2cd88a34a32d98c1f5d78a92f0840cee28f21348f8b8aae447eef467e432f28ad1341babe397cf28fb0afb4671c4193049ee44d4049b3d7afce5ab00958aa32038d608cdb26795568bc8a66595ba21ac1bb343ae9c5cd610d2e1cb4fb145baf2b2a79fbd677322748583337472461fab884e86cda95457b1f8b3909c1033590a6ae655552f8a3c4a9006d378f822f22ec469a85c7937f53a91e06188f753f5c2a3868fa5959b84539cac829d81ea3a2bf99efe","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"dbba0100f462705d414068b345035e5a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
