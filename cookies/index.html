<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7967acdb64a89dbedda08d74ed4b9ea7e34863e881104619059280f4afaa68bf78d79140a38870dbf755c90548d427dc8a2f62acbb1808fc653678694c14e458b1c4b87a87280f6f341ace62430759f4546974c7a7c3d709b1600385b8835b4559b48ca6573842ee1bfafc631323f2479825a45b172cd135211a6fe12b43ba8a2fa58cdd50bb5041ce96ac5272eb4184cb14e64ad592f6830f09cb917690c81ce2287e00f623e70f675994a92beb218cf01ef4300fb785cfe578b5d8ae45518de0bda518afbc7126d9cf823bf952246b1e2f867ec7732c056fd69e7f2308e469fb9e1b4e8d2bc24da152030941b3952862da347b7752081fa30275f1b9284f38f1ffb0924682076919f1267135354b43e9350dbab2dcd6d2c0e3214d0b87bf035a9997e019338332cfb8e188eac83a8dc830f77a351785a64272e3f06f1acd732dc07f028a56043cb57479c18fec97774a7fe60e43cca150d6ed3395130883f28c0a0330b3c23c9b8624b0b65e009944aa509bc5ab20f08ad06003c0909fc2931cda027cc6c4740f8206b5f969f4be9b9af20ebbedfedf66d7aae34ad3936fb127c483261a828160f718927db8f72a81d4dd7c05c9e9314dd054ddaa6d20919d121c7f7d6df5570f69934e19aa8be9256ffc04507012dbe898cc99574727ef15fd1c7151870c2e3e89419d5aa9288f999ce37aed9d27d00cbc031a3fbd1e3b9cbcfd51f819ccaaadfb49d4baf7310317104755f6027111f09dceb8936884e32c35c4862fdc88954734e1d1ebefb859f786665150d8fa74157fc90299dea98f453ce6a4f06431467fd02c716ff1bf32b5acbac4c2cd380c53a5ce8e3511e0c96819371796eca9d9473f21b8bc296e6086746c50a1ecdf63df6a633bf9abdae43cec2d2c8e78ffb88e1846a014652056e33a5856d03e64b9c92c087c71f93a88b81b9268cae6f353abb742bed7cd6fc106b3b78b10290f2a38e349628a58ad82be9899678b1cbfca4f6314fd68b96c1aebe38ab29fb80b0d4d641c7a77a2dbb69fa77b74994b6c5f87dbf2dc604482b46814114cc3118b82af4d6f417ef7bf9ba578a00f208197bfe8f6a3a94d7a49420b0c81becd12022a532f152bb0825afc7f62a35183654c0435a9ff0074f9c896eea57e0dd56b8a822e887df18716f364e426885d12c34b88048301f138250401849522ed8a1e6651fd07e0d01d7fcedbbec58df3a155fb18b09e5a89c0ff260ea9aac703b32ae2c7bcc912eb68b97e59cbad2d78575142bb4d44e57d6496041cbc773d786ac4b97891cc0fb029ecc7c9cb18340901533b84a4b2077c2c03f76091b7ff9a8cac13a72bafce9e84a8dae014860004df507866184761c426f0e9ad89f57da2f45b2d5efd8f55c95861ab893569b3f2b94975b345402f3ae1ccc16c2d0259b2f626f4f3be61175fbd318be80e5ae97df89ac8f649d07124facd50a506d2a25f5855a30ff72a7c0dc24f1b0e8d9e126d36ae9af572dbf658918039801bf88c48d0cb238e3f2501c4f1e0addef586473bb9034dda856c7ac46caf7d409b89d903d778c39da5aeff59ed44a5d2661cc59f780ed669a4e0ced24736f8f299b6e7d28233f0981d09302972db769fec26641685c2f859b919029411b0b82ad4d7f20adc85912e9842650ce60d1a9a6f22377bb6733c9be57be53fc8542491af37d3dbfbe08ebeac6da31d49e09be1d9a79fecb1d3853c0479d0524c1228cffc8e399c9d6f538255b259ffff9ecd29b7d98a69009e77f25f21b60420360061c70747441ae71a823821f07204eb6b10b9784623dd10b087a7865d958e9d9901d8e9a69920f362a600ef98baebebe47edbdfbd52835e1c29a40ba9502254ac0da18aa4c014fc3e83deb331d2f458378d0b3752d1a954eb7a6f7148e7bf48ed83eeb79aa7d7c38a55f55e12e02b750de191943990d683efdadf0853dc04bcf652294269470662ca4f9f27e987c77eb546f1057c9c7df3e1b53bf36cbf4d1afc314687c651b3ffd2cba3cfdbd1ad341ce33d9c2ac75c5cef15902f75ae5273667740c214f96aff0afc85d7d43f6f1adbb39ebb1776fac924dcc456e148d63820953736029759ebee02fc28ac743c04a81dd544988f9b356e873222eeb4f7760a8887bc4c9cf6e5259670893b03ed321e8e2e3e0c5ecd5e36dedf469684d87cdfe18e578e3b3696b53b7bfa4a2e76fbb0836102dc09cb51f4595173a8373b3c9cf2440bfaf0b4cbcba07d6038751fca5ee457c76ef6baaccd5e713dbe887ffc6f0dc6249cfe5aebd8ac37b18ca436feba8dc6fa96b6dd876355dd6f724e2c00c5808bb0c4bd135d60b4643bdf0b64994052d13177f48aacc353506f8c4d79557112374ecf027bc25081ecf119237b3e210b127ddb0b3a3c71cc50c04756f9aa08c98fa6c0aed51932de5aa97fdebccf529a29ed19b5a68ececa5adec57457bf5c6ae084721f3d6863e96cc3ba30f1a031fa855ffdf67e6c53f5ae9543081a53dffbfe6fe80e89bd653541ddf49a7b55fd7497715353fb1b10cf3c522e03a76952128f861614ae35623c9e5bf8bc3e5d43093bfc4ecf3333150769dfe85157079af1ca6c7f5550cd01c18b2fbefbcc1b066b9c01ed52de88ce0e20d2ec3a5188b9b8f1238c2543b9c272f10735079da879972244ad02443f44527a67778eee3559ef6281f6fcf3cf538ecbdc9bb101abef69653c070bce0e989a9f31531a013c1598111c568911b9a7c8fe0ff66a4ec990b4faf5d48bcf8904f0b2d6735d7b7c1d6a0f19c142ddeddfe1b7cde2fd0b2e53759ac9fd918efa975237752cbee6f1509ab90d0d2a528f6ce331712c0f8d6676770af565aa2eb77d546f4599e6ffcef4f0ed47e3bd3fa8b7f3bade3f82044747002047217e012414516152561d811c9b74100ee8eee477b1801639ea97ee3ef85e18ee8a0d39cce07a46bda7eda16f41b7f6375e812cfb83b9bd17e8f581541c38f6efa1bf9ea9ca80459b3bb91ad7dfd145ab17a0bcb0c6efc051938f86b73e61ec0fbc0833a44c2fab090968c4b802ba765ab8951c37e67dceec7152c20c9ef88b65d415a60488a399ad3ba9e47547a5952c6649415ee5c3da53fb9f0148a68b4f960d85ae0be0e73031a8c1fb417570c6a107c0b30964e99551a64b6cfaf4d372ed64017531cf878305aecb8917a1d40272aa68605f69778af577c90db0e051e0d07c1f5f9ed87bb313f1cd314dd5a6427f8a8a7a5426911ec79f25b14aff36f0dcd31c3c99554e39f8e564b88bd69b8f15d67dbb3757f532db58ba9ea3cfa2b8b894debc28f09b414b9a9fa971bcc48f82928bfef8c35b5af0ce7c1fc75d755a80677bcceaeb1c385899e1f95c0218a4c1e024b60d1f6b3c3d1557b3e32d4f0a06ea01f658df6e45e0fffaa055cfe89883c8139355e5279bba3be1f6bc31f8ce0865ba1ca710086a3703b919753bb389ee994b85326ff005adb770f1c8995574625be4570f7543a0fccf7a4e2cea5bffb0041259d38f2f18da8ccc53ddccf8be72c28cc21b8837b6518d667d9e8951af0636e78e4a6ed6f840d3ea1eeae6f84cc71f56838104cf723c89711a6393fbe09efd050a989e5e8a12843360a4417f8ba39a33affbc789b0b9c67e319600bc85192c12596155b3303541cedb517bd2619691e56b036379c19451cd4bd440579c9a99ee322c5540c4fc4ce596605d6f729890f48b2e133dd824bf91d4881a5bd27fd488ac9a79957e135997076166be4b1767367fb2d7155800ea908b1eaa4b83449a98370ba45557dd04ce328e72d935f7b1549c639f96d4ad16970c4ab517b1d1505a6237e532e6b7cd0186d7f064e4a75c0733c28dc70f0519017773dcc29b341346622385e593b4508f61ee49fc7593436a0b66949fdc9c1e5a2978c6bfe5ab5559a899301f387c3521968bb78d72046e88f1030470be2a7c868ece2e2507bfef4704ade04a469b5ea8445ebf969dd3ec02654d7abb44af67b47a75fe7e0957e09c4d330ca000719cd332b55baa81d495735b1bba3c02d0da9c9756cbc8c78f99c8c22f1cd55b82d83e411858e5d1a46571d338e4c8547a2a5069966fbdfaf06cd6b4802f7dec9343cf5e753cd8becbad849c7f05a742c119b62c264854d8d7e84258a0b1a697327220f7f0b9f305456735e1f858edb15b8300b38bbbd1d3c1cf6ae6f0cfac6bff167d44de632eb511d5cfc4189824f8cc3d01d1470267fe51b681d8865bead186fd0d97b2c07b4b9bb86b01f1a9a635ba9d5cd0b307a7e392a8eb5f17edffe1302df89c771427de9067e58950a5f80ec500f9824d0fc3d1e652597842abb3d067dbaa1df9007111e90ffbf342cacddc812d78a907593b2dd8a309c1ad52cb9d7bb1e18cc5c71e60760eb685c42e279115653e9123bf0bdbbd82c824eab8a6e9eec98f90f93038115495bd7692ad05053add395dd74c6a3e0f7505350576fe1e250f1726bf4c2f32f52d1858daf054343210177596abc937b38b5f09da3d3a6561184d112858623a194622b9fbc52d48924768003651336caa0b34d46254a34ea2daf8722eddeab6af0c1b73f6da4f80bc41c0f262b716d099c203a5db6257e1bc38a8694d8af66f842ac46f95d7c054f59b7f8d71d73ab7522023d530511940cbe87b0e000207a1ff2509a7340f95895c30d3c424b352403f04f8b9789c31abc1eb7cf4d0360a578ae9fddae32c562314bc7d007b1089c57a644ac6b629da8d20ab2bd8eaff063c7d5eaab8c1bf2ced34af12f67cb3f3b8a4a9ab8eb76d87e3a11741d9df4aa496652b4ff4549b2ec1b49303371c38ee4c8912aa0d1c2077adafdf47e3be6810c991568017e89becd5ea8cd7ed87eda3522004354323a96123226391907ec2505e51f7dfb9cbc71781d2e2389560f9e193003e0cdf7a0a64159789020315b403122b055b453728871bca47e5bad5c2ba53d807a0211f53c37a009ee3a162207cdbf713453f0b5b520e12691c1c3bee0cf74382e80385ff0f064b51c63748cc8370b8aec2651d33bf249b3ce118ba0008867efbfde652c750829e55ad23bfb27f20270b5a588a04200d984c1c648bd1e780baaec750076a5aab983f4be88cdbb5f96705a6c2183ca88451cf51ac96751660e0a03557e1eefb68feaa8ab71a5f1aa7a474a438458b1c7955543c992c521576c9f403f51e9745859501710a2f328afbd51898381c200a4375cf78c1d5b273758b07d9d7bf60c7ab00bc0260639869a832a28feec13f99630a514628b593d4ebb456abfd20438b36ad7fbecd31fa22055c7c0ef7d0207730d441c725be107ed6a90b17d259e7e13b308a7dbfc4a0c38b31de07dd8a4b7346a7c2936ef3011bc35854f8a08eba0d4e660d7ba29011498e5a29b1814c2e4b48a16ebba20bdf09afcd60b54818d771df5160b8f90d06c10f718d235ee32d251ca314e8e2a0e86f66615ef6f65634bcd7d6ba656066c65064b820e4e70f1ac59d89344991822f8ccf7efc848dedca1fdb5442d59571e7e394247dcb2b584f782be16e0d5018706bd40b18daa8a96d045d14709f6801796b6ba6ed0c102b06894b87029b1f5ee6e827263ee2784b8019024e17eae65d4c9dfc681d05b737e12c2cb74a56dadb341ae831947b7a35d491bdfdd7532f28b0d94b8a0acc46bbfd7f9735957030db56f56bb1aeb6400309b9deb875e4f051cc9cbf727017ac496380a3005c2bd526d74a341801e921662d119a3d2548ea9da633fc1a49b85cc030b192352fc4fdbdc48d26ba063802c9919be2b77727cf9f4c90374400e75bed5af942b56c2c4ee9419f47621fa53b108afd1e5cdb699be5e809b3f524008bf5f657b3289198371190d487980e65191946924f0fe02ef0a3a481310d0c2ea6bfcb1d50c75fc8f601d1d8a68554f56ead0c28b6674a35ab099028795518bcc23c0885a4100695598179eb4e29eab6cb8556239b9cabd9d1bd2082b16d20653f3b73154d68cda5e71ec70e14025498364473763f53379cb5dca14f3a253c83a639ee28272f78412e05071c2fb482d5c4cc403cea200486b70f23e26dcaeb12e94b092594686be0779a4d68a858cc15960d88c42ec1a287e3f82baaad72b620f63e1551242b54e124b25454a019e3ca76b264ea876fdf988b445d387add66ae9f835ac21b1aa6cb2621de33bc58cc2f1456574e19d01695257a9636c6bdc3cc79d2da29745169a1cdc0685a42d85a08ecf260483a0047ad7de01450046c99519d0c1d4bbb71eb7402c28328b32ca5b8b3db0e6da7761a0c67139973d4f0beae6c148a2a9420b1e16796ccb756072cc26cca8c82b19e1dbe085b074005ed8e83007b99eee3873bc12890570ba2297b80d978ab10ba956a7430bd163601d02df4e1a97643a4b68f796da47789f72f6b3852ccf7524b2431c92dadbed2fcd23651d967a0a637ca4540a7acd8ad0deb2da0d0ed91257a90b251f192e8ce74e51a50337271bf0121f68905bac04912fc17b640bf8a47e13a6bdac7ac7fe69814c6e56df7f0f10c82890204a626c74b6af4f6ee77b8a3defbb8e4bbdbe52cab3ba2e9b4f2fc82a39663bd522e915c0513e4bfa4cbf9674947b1e4e707b428bc6c31cb830ee1ca49232d81db11da9306227b9dcdf4f08b9c4cb6d894eb5f3fd1a88ce433d1e3922ea78d26e413ea6c5cddb6b14895c601b46a93e9b54ffc1f710e85a88d1c919dd7fba7b36d80ff990e3aeb91a4e2b79995b0b9ea287994630c95c3643cab0738c3214b0df49f2e068cdb000d83558ba090501f74179d49bf02cc79897a6b1bbf22740f29b3ab622c6762c9999f1c7df3ac697c55944ac523ad2f5ac5909c01f97278458f286390235e458a2a9c9c7fa570ba08ea08afedaa93c618db7253dc90b0ca8c810a4927696d77e99786b0fe9aff3fd238f07720d2ed14f7b7b2572431ad34f7a120913f8e8b1269607eb3fb815dd6a53efad197734bf0f26a89669cb0aeefd6320d050ff8095f31f5bf70cab18af3c8e9b5f1d0cb218de0f6ba843e9c644ffb0dd33137d33a3ed41b04ec6504e2428d8cb5bd668491a4c377a13dfac9ac6b73fa9478352e12bbbee5b8ce135e7723633fb8beb22882b78deb857e92a8c3e0793eeef412a3587c29aabd6b67692d52f26cf238559423497052c877083ad194e41baee544099439107120ad0c4872c3a14824310007ce32b97545d09d0a4e0d5ef06538212f9eb614726d03b7bd4c568821ecb596111e68e860fcfe51860e978dc54dd318b3140aabd3e8d7088be3e355abea8f603a5f1cfa800b0e7eea5ef6246cbb469a41d963e14585023b5965d857b8f74d6d0fe8662e686c8f3488ddf691c7f51066ebceb4769c6bc60c1745831241e5c54c89b2bc2244d1300b0aee06e0cf0a1fee6cbbdc69b30649f3cae7831cde12c4d96fc8618c111f54e99f32ad5f1d191683c15b18769b502964272514bbae19a1f856742b1e8a4da97b8ed409d5a56581ffa41df71c09da2dbec500f8fc1b142891ac3b996114bad59153c678f00d37f70c8fbb43b0988970fffda74da89c228862973223919bf505dad18b5215c3926b45a66087888f78bae5f564f9b8ff78f9f1fee644437a87ef1dc73b7408214eea3dae75f21fdcb091ba865980147e25ff9aedf56f97ceb026d26d0cd9a8d357208fb38c5002396f9b02a0bb1d38785403630cd0582f18d98e6ba8eb07c14d569a5205da8615768c2a17f5c2e3842c4c35d66f501f3a702e30b6d944eeff11e2029ce2ded955271bc79b0c94cd189eabab5b64d9a2b00e5c4001928e89e71a5ec6523f7419a06ab04380dc2ed9ec935ac066640558ee31f9136075d0b80183c6fb2b0d14ffb020f8377ff5495467d966442951c15c0255d07fa156ea76cbe260c6a829c37c41e86320accee980bb99122b70ea84e7f16c60cf41e76963cc2c19d10a138b85aa5448eeb4529137349ff4d6c90361b4f1a0617426f8bcedf6fb80807e6c27f868352a10ee019e3c2165fe0be82f1e88e3df0462780988c56d7dbb5582c65a0c7e89ecee3956577be68037614aad71eb40c46d078db848911c728bf37d3640053be0ecb2085f1be6a4602bb07e0b45902045d72fce5b42924ac852a21c4393aa57d20534ff20247b8d44dc367856bfa90d00961a4b07d1bd0421504fa5cae049fca97ab2df8b66bc48d1a6986644a09e61525385ad312e69a5f8c302b8fa7c2114e4edcdabb0c8721f25e99ae343879c90c581415e3f4b9bb0c1ea8c3f8f3e41b467a754aa8908fdceffa02363ba63e495346f7c6d7e8633a69a7f887ff8d93c70fc945ed8ffc9a6a9932b9cede2491412d408dafc6ba27e66724f9a43183e783ce356c97ff906e48906e0b5b9ae8edaa20ebc63b14fa027df06531dd38acbff33ce6518759fc0c4942472fb5ae135469b2223f16b8554c0bdc1614337f69b8855a51cabf13f60756557e9be95a82cc280c31457c93a2aca46d84e3b9fb8bf67ba53a7a2a45860804b1368b77bc36085aae96a581a3e6ae8a6bd2347e3142f6214c3fd735aac890a481d670460e6d3a7ff56fb976129b7d3b196ac7de47fa3c47ec9bce9b1e394b818554f8a79ba392b1e6c9eb6d97815556f372e7354d8008910822383814d5aa83d8ff46ae75edd9e4944e2c60ef4b3edcf6a5375b5fc2ccae91c65af279acc83cda612c6f57320dbf17eeccba728eb5451c27ae1a4a9fdafd761475abd32015e3a7ff36e01b840e49c3d89cbcef532ee3ae649d945246afd06ee4fd1fd427f34f6aea989fb9fb50c3389f059c2bbc052a7c86a13dacdc6d5bbb2066f7b83fc45fadc0809c07144ab4b3c9d32170c8b9e513073478e4e3a1ccd2082b6f6260d7f9834f9b0bad03a8f28703e849e1de96171067b17a874a8dfff26882473ce50e1988684e846f8673e9d0d38ff941a1a5f5a3338a5aefe50bf6024a9bf9e1e39ca18612ef578ac63ec5925796d50949b04bcdf15fc18104f59ee952b0ecf78b759bd65fb615e924b03b11bd968a36a230c911e7f89dc18d278e281d66dc29379cfa31c40887add96d5affc034cfcf7981bf622583b3bb87d7c2ea47f23eab73f980b350998d4e323b630444b937abf07caa9e2203ddf8f53117f9d97a8f4de69c89ce767326d731854904849ad3248d017eb6ac322ef3fb5d68207920b7d4e856d4ac517f0f4833adf9c3c8e7135e6fa60b22f1ebbb55c32620407b34f01a94ee4d58e25fe8d792ddbc5e79153a3097e088dedf7e525babff4c661a62d714f699aa1e5cb6cee609c3f2a533d47ca7646702b72a94cf14275cd8b0eca6f02de6b0971c7bf594afad4c158220036dc08d5fb6806d161cb21bdc649ce5eb378f38a6e5f10ed76f8fee70adb39d0a2bd0265b7980be951e13df43f13fd605811fe7bd1ea57913a663c1252c3ca901584b33b715aa868a3af91efbd996c09605cafa3a3cd97e45301e03a6a142c0719a0dfca8d51cc16b0adb5bfd66339f94a2b3557628e7e4acf0074a024ea567754a2c034fd82935cc2e74809cb98dfeffbe4dc3180a538ca147c51831680df24c65a73094dfacb3a12773d731b151b00cc7829b56da2dc993a0498c1a0910c4ba8c84e622a196ff5a8b5a40e52b786270671e5caba1c7728badd9faa25c29e5706f364be5d10ca8135bf41d4d93dd3efbd7c681db9e7649c88cc1abb937212033628874a1902a4ecfdbc7ed5fc9e211f22fdad171eca4ecb8a3925da2cde610ffa457c17ee4d69542ed8b937eeb435b47508402927ffd95db5c9e82f2596b19ccd235cc6ee94cb9f34283a6e5a6d3a7337001969e05b17e20829c72ceb5263c51cdf8470965064f4347438cc0eb82889facb060e919a3379189afa07fe1afbba71cffbc3822096e10887837e77e84d2acc289aece52a49828393eafe7a2fd400d6f5d6d10ac3ed7cd187dcf8e6fcac2d4602a9b03b49eec92a40be09c57c0fdcf965e43664a7edd0caab3ad9f6a8efc2a0d35d4d9d52d07761f87a85adaee246ecc067f15778794c949a88a7226bee68d701a77e72c31b86ec7297328e4def45c0b6de43d82cf1438f379b4afc560d466de0eb3b813c5c69523dbdeda6966dc2f8523c8b0b9410299cb8d686e7bb33d2e92a644510b419e7ecd481fa6aa92b7ec3fd505178be2e8464dd069c32f658da65962b5f4e88f65d319359ffc6c3328e894e9a36c24d65e32c3c748007cab148272a90d533a0ab589af1ded7bdd39137c5fba10f8a7339e1d39d1ac5ad1490b4b1a87c47b4e626466b5ce19f745e74ce4b0b3d250b21503ff363bad62e81b256f0261eb248a202f541fa724198878843e2cbf306fb147383aa86a02c8dec2dcd5bf6b71e0d4f69aaa588f70a01c41672cf07bc7a33afdd82b3f7c1d4ae8ad4dd522d5c22427908f7b3a707dbac5796a168d4a3f0ec6a8faf8b97ed0eec337cf78352333972fdd4abfe976901af9abb52e2478cc54d7a7651224dab0b918b8cb4277fda408d24b436c71c65423a5a800894d6666e64a0af020341a5f35f8a8c24de73e096f6c2b5436f692cd046f4115fc0ee15f75e1193b3942232cb7a0b75bfdd3138f48c0545d52d00a9b65aa176b2a7b11822324e54b3b0be4f357fcb349c56d99e09c28cc986a3cb58a3e09d70fab8850fdde8dcbf9117e638aec2f08cfe10e301c1c9abd3e3c4cb40c100ef7ca63a53d0e53dfdbff304643a9c49d5c12c07230856dd90dfb4d6f35373a308550b038c6bd5ce3e8ffc7356924993226f69b41e8cacdff38ab295a8356a6f447ad102ca7f8a5df2d2b68755c405ef68b89936496c6ea76beae5508c6c52d4bbe223114e8a1babb2de9ef976ec3289706c62a7e5f7c2b7420093762ed92ed41b8226fdc9f68765b4ac11f4aebbdc98b44686e2cd62608193a17cd0c9a614c67dfbfe0e3e83d4f97b9934f1b423ce0c93d8eb51b97f9e1ffd92843b1199c9ba423f33659778e6227bbd61e0613ada2a271e147804b2b750ac24ce3aee4bc59e447aa1132c0e9167c6c5930fdc86dd1c4c3e10d2e4977eb3021969e61b5479bd0e99f9c096e74cb8249ac15da3de16f049697f362743baa14a6d7ed86922ac2996abf269e02de684306ff6325ff9af9752c5131aa64e24152b6b3f18be04c848621a13482ac42919f08680d20026f93b12ea8e8c9315431f82c5dee513f2966f457738ca505278af2e1ee8b7dbe17d3ed3c36004946dda45ad767c64092ca3c4074d7c1c7295ec6673879808a6fbfc6c5249f88d9b84b0ac940d9ff4bba2152bd61bf99d901e8e8a41579ed49f94b05d1bab096a19c4dcd326e834409659d21483b3fb1533762718628349d65119af7660b7a34c31a28f0ce7813b1ba09abf200a9ad58606db986c539f70d57224e42fa45a6330f9ee5d6ed2b1353e7458093eb45937259c74356e6428031f043639172684be6880e122905c4eddee6824252a947f4e6a7b23c2f08d47a7511671459867f949a52d38ec42da85e9ddc785de5d1706e090781db5dcf715079610eeda978f363c1be0933a7e3cdf8be6829f17596a0f6d71a16c1c9cdd27e955843b2d93545215bf5cc76dfb8b064e3b8dcfd1d586c2eff2eab8d20139b3c95a4dc492aea37005b40a92b90985d3353686183ed27106e6054917c9db155a5962d36843639e831e56ee91b7c64ac96a3444b10d3084223d3614982cea043b45199f41fe2a7d0fd5dabc717a41871fa919408d7804a1a529ed34e08261699f3c89ed5144d0bf8b8e8ba5df8d2d9d6ab202059b12207bad1c36a99ec800b17e0427fa8ce15f66570aa2138d491b784b47dd8a84415437af6efcafee720dc947804653630f247fb28c90080208062f2ab6ce64f674f31a3b1fb924eef3f23d24bba3ed2f4062090c9d13a2f8f26040133288c24f5b227d319ebbbf0d7fdb8e8573466f97b63e028970793766fffbd02ccb200f3b721b9fed514c1a91d818152c07ba65ed046b078ae9d5c092954d54973cd1dd4312dfd2908cf059851b3076ba732d545e33d2c92c29bc7ff7b016a5df870905ecffd20cefe9674979f3e09f9ef00a462b803c892347f3c8d1f14982f9251d856a7b15ac38c38570873b7e7101e6d44eb8498a175d87c799616d1dcf7621d343eb2d0d0fb04140569ba34f0f15cf753b40bd632c2f2c0bb9d8fc99d68fcf3b307445eb83091243c391d8067cceda41fba3476e94dfe9b3d83a9d7f157e314e1adaa539f6d8f2fed244a75bc1db529bf8ba9d57bce2a7f3b6fea7a95b3c3c8f7faa31043e0a8360d15146bce80b19f9b9e8b0edbd79ac10cc9633c35baaa46be651e0181dc3589bc7f7ed592edd17576d1ee510134d8b3e1ed927b1ec9d451d1c87aa9ce83440542ce2b905e896c4b6696221d2d314399a961093f74090992e71a60278f4c69ec5909629d87d28fb333bc8b5e6b66231c72056da1ad6e37c977b88006867630e94d79ae50d1fa7704be028ea0022d08a9145025a521aa801c309fffa017bb6326648c9f9f1ca9d01d33ea8a374513c60bd5311e0718785abf1cb6558442cb11234ff9f5a5db7141bc2c9ac4748ccb105b8fb29a8a36d8887ac75da079ebae7c1b0e59dd625ad0eba32a546888336a4437833ff21f0551e3ab1eff2e8d1f670e37d239a4c0811e75c03dfc8d60679e34926031b001f32d67b65bdff25e651680b5ae982cf76389d289595f11b0b3ca29fa9497ef1e53eed4894f770e7db2a2cca7099ab34855d2d2e237dc5034799339caae5b5258cbb1a08e31310c6c1bab4b80cf1862ea393e11ed2380cc980432884d90e5e7b0a79decd1c17a199be4a5c88a957d76269c1369fc1341b005ab4d179570af4d88c20385d100256da2ffebcbad6295ec98cd2fb5e86a333ae7ab2ce9a89a66ec8a1c6f3606328e5051fc8a8759b3b1501960d1dc39cb48c5ee52b0af9db104db65effebd568d7eb240031120c205aa04822f89842a2a566d419d45e1d3e0188ea44d454b5f9f956536a854dfe4e8210d00776b48ae21208c0948c9be8562a46b642e994c622dc717a40a03fcdd16558e4bd35f49ed69fb1da977a9a2f146795586d10bf1ece19eb7b36e2ed69594dd30c0aa799ed5f24dac66bef94e6815c15ec9a3b067d30b902e7c27ccec0d7819b4e4fc532ff71f20651373c9eebcac377abce5b36678efd2c3b51edbd2f0d2460f806be5ffd22384d951320825304ec43db1fb784aa1e670b8752457c9c5d950dd071e9e0ffddda4970f78898b1e5e004bdbccb65989ec3731e5fdb811961d5fead0e847e14b0b3b96b7632d130c121374c4b6cb39b91f6a6628846d055858f5d7e038a64866ece3690c38bff984f92eb826aac4f15b515f069ee6ac0c707af823e9ca5a6cd6de2a5353dedef46a71ef37506415723d753409a65859fcc73593988ef8cbb807495182f89b58e097fffe2b9485555eeb0d71c1893be3c19a8b92bf03f5f7eb715d7899819a8059ba6c63226fc5b0ff1f9808e52c92b28d8e9b6c03146d2a7194a7ac2dcef442c7ac37f3b6b5ed552bb37360476831a148e4b2dd64d06e6098f3e54d4e52fcdf34d0d4b0e10756da5562e4f2ab9ee2c34d8f3f2d62cc855a9caf2ab527e76ecb0a87342624cfae9e6aa23d9e06d53d40bfa3c341fd6b0243aa04b706c6b32fae4e4492eb94f704853b6b6cb35925b0baaac0aeaa6bd280f8609384694652aff7d926775ca30c967f78b2a81ba9e23ca7308cbcce90bc2ce1afeb2ffc49da3e01c10f6a8cc22dc900a4baec1e89886775afb9eab4314428bda9b9544ff835f697b240c04f619d01a9cb908cf588ecf1c33a8539b2e82284ec341d4ca52b27d50aab143eff2ef04e0aa6bdaadc8bd9423a97c94ac4574698c9145c2167fb8bbf6f45ce5b0ebd0edf02e3e7738002bf199ffc3877cff50c452ba4b15363db514cf928a8841172db5989e5111936a25bcee703f77d4bd4df76db4e32e66c70494ff6ec6b78670e3225b181399bfc348e2b9b4b96672eeca2b4abf0116fa47aac6c4413d220cff52be2f746e7b0f10f18841e2cba88d01109c4e28c1df8a5c71201958351099dcb294ab6d183e531a168acefbdab616641859ade5aee2edf57a86c597d5b89f9d98d306ddb5ebf63fa96eb3674af40de0f85677f41e3c5acca99d7017be3f4216b7f5dac80ef5e7bc929be9c97970d02c3178113bf9c45c90b14b714973144d8be1e31346394e06a60903adc938b52190ab67a722d12e129e202b056a5946078a34a2781580ce9beb10254f148b96d656dad4dc8e8b4ccfe50e5b1c3e05ade4316e3556abcbf9411c7c1193b473d4b309a973dec71e805755d3b1ad413ce2de1023faddadaeac972ff56bcc683d0b05ee8b750e0f8ff223cdda8448b69a2a68473dca81b9f6fcf26fe590281069f622bfd9c13b1244c292fc2c3a9f6854f3e3e62f8f718aeda1b5e729d29154428953ceb13dc5ba4ab786433bbf8a3876b2045af7cef408c17e93b6c0f19512f672884caf57ca8daef995a37975a0a4d1955d890f80ef78dfd7ddd675ae8deb306447d55c4bdca83fe251ac1ba933c4160a078544f488448066b712b2631fc3aad60497bbcdd1eb049d663b65bb772dcacbd09d244cac3d13dc83d8d81df7e21c80b19488a1738cd0979a4571ada939714e80cf9361b4aede59c3542dfa037002ce2110ef6c55365fffaefcaf11bd498fd4755cfd0259b7f3ebc4cde95731fc015e4259e54c9d8103c87e427f25dcea8a590c941314b842a7f142ec6d0134b8142623356f95115d9de6435cb6c3f0d8178a01ec79da1d5f3501af663bf9df2167fbd7ce345267bbf71687fb1e7483d4d544e7e88bcb3e0c77e6d536b8dc4a28e9321631fa1072954acb701f2b2171d13c348390506af4dddbc4b7e299ab96b453afcf8a30c10a567f2742be9d5ce9cb886bfc1a545389d7616959224eac962be233b90158bc7c6e9853dafc308500ea664cdd7157918cecd7206243edfac3dd082d7f6420b39ce986c0f431a3569ca9d6267fc4413bcff5f46449ee8ffd2ffa1844fd72a670688964465b036ee40fd51a7d555eaf2590fd5d31e05591776f65b843728ed1c2a53babbe8177f86340b019f94db2e9e17b4596c305970629d80ad985039f41e9dd8395dc79ae30eae7f7acb2fafd4d035983bb9fde7a99e53c11ed85cc6ced2cf69a40f1168641c1d4c0413ec5b4e5e333a3c84723032545954db5bd8c92d1d7e57972b7044461322a65cc1fd03d653271dd8dfc4e0fc4760ad16e6a02ec74a620c8c3099d63328013f1629372f03e61fac03daef90a8c7302d938bd3fffb9039200da009a0485e382533df9d9b83465e6e60d3ee0da70bca088b7f984a53d21fdcb35435f113d9d989e027e0fc4bb22ba47949b7e6d309c7e197f1004c9957123b3c6ff51eb97aa85ab0d7c97a1e3150b3af4b13d2034283f1f7cef5feaedd145d466089476ee33835982c08d739cf04605bda13088e58a935508f6c6c1ce5b0f5ccf1c8ad18deb5b140a1f0c7ded5a6bc601beb35f0116175b1d2f640c9810d809b8130320897998ca30be3f9ef79d8e166f6f4723b6cacf67f72e64c434e131d58613b55420a7cc57ab085f9c5c44df40bb1dc754469e3741fe48616176ee774c504e0860e19bcbb2de7e8c149c4ec9396e51441aab7815218de8bb38f4b9456b75c836b6e77736f25ac91025cbc37b485c6c1f5007b1dc85aa0e385170950ef81fad475975d182f872f308a6d4822211d514c258b602a89b3c2a314aec4e944b7a3d7913bd63f393ba946d6abc49a0a61ece234dbc486cad7548955a11f7ccc83abf6a913e144f698ffd514adfba880446a7ca86215e0d619b523e46c2424d4b1fa9a0fdb75cdfbffdff1fa4ea264ab42807b861b200992ea8d5107df1a65e35b99246d1b93c9cf2ff9ccb647e143c45bdeedd4628da90090281374fb34700b8f0ea24754d585899d2c96a7450fa4382d00b73c993222ced3fb7266af56db7b51f9d94d6bab5a4a8ee1d12e06b1c37665d2b385f0b79a39dd49a195e6743982ad21b736d37d335aeef747b1914cc614794821660462339b18714c59a2b752f6d2e3e98c9ce77ee5f2618ac0105af73aa999e88c57b1c7c304bbf1dba6ae7c81cc45a2b50fb6f1b91ce3235eb90260d0ae9c99a1cede70b6fd8257f1bc1e6060910ecea297c3fd269131aae5a90098371dd4e5f3044e876a5f592c9808535e67f664c2bb3252e7f2d7b33e106bd8b678c0e5f99abb4aa98fb9933dfc2efb11df162a4b5f303a44f3d01ee5f5cc90845bc64548dde417e7924c91425a2c4299228c4308db522f975f102422301bfa5e0e03e21ec014ce507086f30c5588d45abe6cf56b49fb246d36dc25d14a9f8584ba392994e93ab0f5f305b9399466490eae883f9945f71b2cd7e394d846931fa299cdf06c1590d31ab1ffc1763780b95eb267a42ccdcabf7138b0a30869de83b91403c648bbb3a254ab4d43d9d9d29cff853842bfdc0afe0f9b22e25d599a3c9847e040dc3bf8e70cb72dbdb4a57ae18664d303ca9e8a9262e57f6ce721db1c8bcfd450fcdf9e9f8a2615e6429bba5f52bfc3cf2f5772ea7778f69c68be4bf4af97cf314b72568177965354efb106ed46fbc40f0d7b04c181a1900e09e6e6967f8230b50f9eb34c34760bbd5f7385c4b5b03ca1e91d3ea1ba16881978b824f9d37eb66ffe968e8f3ed4df7afe882baf62d50d8cf71d4167117ad5e52d458f49909ec5bf25b25a1d04fc902be8ce98ae854288730c2cc4c20d5677fb7947584e42231645b50c2f4d0436d49eecb78095529b9ff87f8eddf28fd56bb61555e0e53bdf0a346b509be4a81c2c14b87edf52687c78094ae00cb42dc9938257457d15a424de0aa6e0531aed1383df5666943422b6244f0e0ba2388568c2400202a3254e211ba664dfe4fc772215c5dbb09e166aa6f6d97993e73854846e1e728833268236db499c1065c72ab8d944b4bfded5a681f88d5c752f09b8f70cd442ec5f8229d40b2ae0776c63c2abde68affaf3f462367709343a30d354ee80de07f5e0a1c129cc9210720d8c7692b700584598ad163f250ade3daeb6da1563d107f6bbaabc6c7f64dd8cd09c33e897824265d0d6dacd883a6d322e136ece04bf0c217c08620039ea92c35e8dc54fd3ee02a0045a33f8e45eb2a7b731cd374720d02977f518342ee2493597f7dc58864371cdced7e974b45b0626ef3cc1978cb34dc08864aceaa08de7e64e144cc27c80fab3d8dddb77e18826610fe96db0606e10840fb733b859a6a4f6ddc5f7216992cb66a1959b199a7cf00e3e42807a370908902ae1bf33ee5afb02699d243a1304c112e05569ec07ea9241d09d650fdc1028bd132c85105f854f3ac4d129bd761dd4b12907b8b6c868189386037a277a60aefc74ba821884fac692a6ad2868792ce1e15224f768d1b1eb5f184ff8892495714ad31f8feec32f8b1e0bf722e53277fc7bcf4c054d7822673536f755c3f1906be3d8cf8f2d0f637cdbd3ece7ac58e53dd9e99f6560fec13d560817fb13747f79fdc13d5934d84555307a9a705d6d46955acb5d13238dbea8a81c513f4147765dcadcc3e658232e5a05c824bfe4ef8256c5e9fb1c412ac2a81553475c27b909fd5d2207c622213be6022295fbb069b57c6b2c1de18ff20f2439bc8919785455a86c4775990e732455d157562d570ac34af5389617e894c1ae1a0418302439c24083b8dc1ffff5295f901268b7929b36c42c91fd4deb3f0810faf37bca97f3240061de8610be41f41dfb098fef32e7c44063f96da6edf7aeb383538b7360d865f6bf2e04d40f7144a894a63dece56b0dbe325ffc47a8820ecca242a673b55d492fd6da31543e0317ea889f5616bbe13ff6f63492d8942717573b76c0ef2903a055ca67f4a6dae88cfec53421383e6e4adc5b8f8d52efb193d7190dbb46447294c8ff86b772ac11fa4cee44ea90d240febc95696f4dd14712bb9475b5c1c07528c87fbe48fcb50172ec0b7ac635427afb1ac697357b6148546f890e6ca187b006376efa0cf0ce8a1a127ca108e9c24815f9e8e7f9f38becbb60c377727cd441b0446e4c0b590f810626b9d813d18c1fe87ae8e72a99d4b089168120a96ed0af25355766ed05673e7fbbdea09934d2183ef9352dec0c9ccad82c906d589ef756d760a13be0566c505194f35e58bd64b13acfc509fdcd941db00eaea54d83656b1062261571b9135f2f5506bfb457f8a3601e5fd52c093456759cff482a882bf0ff363e5b7c3c17d5555ddc716b8274a4d7a77a1eb6d239048db23171bc4436aa8eb9e6f2e4324f1f0defde2cab4a3a7498a070862b6a82f13e2490ef53e1059de67f2020c953efc819cf87accc02e3607689950f2881ac91b423c20058688d6647f5614a6bae8af96917aedf48f0134969b886d49526d158f6a9c5e4953fae5a94d5c12a28001e1bb57dd049b1735b659a8d16c671d65d7c96b9db1b026ad8ab7fc09488ba7b9c08f7a35d09b1e3fea22ad7324d5d063ea3191479ec48527659bc2f101beaa49773ff02e0f6942d10baedd1ab0be38dae1eab03c2c12899189257e8d9e125004c96892097715b2271ceab47fbdf5c24e802f47fdf37c7943c6486dcc8f2f155f97c80f485a69a39b8306fb71d00fd53ad5117e704ca8781928f2ada82c742eaf00bf31ea23ce0555e73e5f2c31e057ecfdd0cf91450924169d188fe5cd66f29c908967b366b5d723eaf1bbdb4e45dfe3ee00e50535976463d70b755903544b5ee3f978f35d84bd9131deffc88dc01ad3e4e1357cc3e86836d19857fa98cf8ec2b796a89d2e446468ceee0889d70ce802f7942a4b42084506c7dcc8b94264770590874d9b7e996fc60bf2fad25fa707ee2c3ff6a9cdd9132a8c17f60adc11b01bd92f6ab4f8503039f9153cf2528e4a899b260f87bc61dde6df169c78d68931f8d4a5c7e6a40ba9cc6e714ef5c62879378d3f78f94dd618ba8edf223bb68e068d758a3dd42700eac1b5ee6cf892491d48153e222015bcbb335cbb46e039b15635e10ceb42113dfe3b62fc4d899dea2929a7fa7f9157100c342d4cc3de9c6066257ea04d0db4669963bd7534615c6048ac884be0897c2894e3cce65ee4576c22af20d136cc3a1647a5c612b6dabe640916734080ee535da0af0883c97edc2ba5636a7c529cd9ddbde5944d63f6b4a88605047fc320f8dc76cc01340fdc62c6367c157d503a463d6b2389bcd3cc372b854bb80a9a5ec15069a6e2ca9d12e3b746f63af3c408c466df66205805316092e9489d87202ff764811f4321a6f8dc3ad153034ed6b3afbb72c1759e35d5b69e4d9ef47ed93bae3b08e4d41491d1b0378d8e89ed7af8dd96cb918546b18f2c96e4260460db8ec6f838116f6adf3c642ac4a1891d3a06a941c8fa70545af87546bd70051d6b9336135172fb651d873e6a975db534c42ea1570ad47e22362ec82e2c8f527847be1af6f5ee9c5886fe26cfabbe9662ed8fdc6d67108a2726eee3effeea43d9951eecf6d0117d8176327fb9ecf529efe82e61128276f9fb96cf66e9550143302601c6080082bcdaa0b166ede4d405acc774abacb4630ed3528239bb359c447b3ab74dad8aaf94afc33355652bd12f1de17d4d43ebf2a76a2290d3355ac5e3e659da01072724adc96a62e602f430e15f8d771ab140211cdb02f5bb61c39017ccefae47e1307efe18db84fde88eff64ff7c4333e1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5772c6c6da40bb47a5b1786c06afb5ed"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
