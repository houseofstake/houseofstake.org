<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4be27ff93e9b4b5968465de478cdfc92214c5966bdeaf37104b0d99eb076be79ef33aea3de77f6acfeea82c51d5808daa2cb8d2e608d727889dfd3d22bdb1a9ece29ecc7ce1d788ef7430b80a336d121d76bae657c123f061c159636cdd2601dfc4a903dfed9cf7c2b405ebdf2d2d9cbda55d8f7cbc716ad6deb8d6ed1cef530beebb1d51ad9ba50522e98ac51ce880b39b58bd58d0432d1b063295ec4917c3ca92e1f6f871e973df3036ca93fd5242f02f200ed790e77da4113501331b72446873982ec5053ea44c6c2e256dcc9e1668cf774427403d82157513299dd950a2c5cb85f71361c3af7d9fc67908620e91c108d366f72c6da9803ce6128ebf38e18edceedc7b705315cc9bcfeeeb0431825d1074056151c59711a52fde1747fd3219e42a52945525b028a7e3d56fd71a8ef5ea0f57eb15bb5379edb49c39d8de3cd6528c155088f4cde4da3da98c33a9a96db26dd6c39f60d413c6e73887375ec42be6bc9c7ff29f061c26214b3313175105f38f163ccbe33fbebeb1beeba5822cda95f3fd8528ab32b023f97eda18da274f84403f5f9653c1806669c92bf033b7e3d4c6b09202c2155328608ed6db8d2f0fb149bc845a9551a191e15e04b2e669e61a33154d5450189f721d089020832e0b355aa3866c01337ecd215fa1328d802a09c43fe23b15f9e43b26302eae192e566d7ed3ee98b41182db98f47b12440f78c8218f1d7ad58117ce3d4b04bbd280e42410ee5ece9356953fce982589291200d5b324d32211987b3b19b0f8d2ff3140a5641da96ad5ae0264da23472bc755d8aec36d0ad3ae691cefbf0fd3a9a35b94336ccf0145c3fb33a98f3b446240192fc32860956f4d7b503da910cefbdcca6317217caee7e234318666187d7c1ce41a2830d72110910e1f0ddce84de7c19aadb45ff1bdcf8377fda6caff1afbebc1236bfbf34cb743bc46f03ed0c81b74dc055c7c5a42e5acea422433a50e4b46d475232289655139bb9b0f797c36c48d713b8aeece6a24ad24ca07b7607a51de219b359e64fda6d8154b1bb26c52c8c14064ca315b1bc1dbf47d42d10fe1d64c1c3ad5122281a332033255ac6b6decf01c735f161cba3c23e535daf2451a0400e408a9560b0283a44b5477796beff2dec3ffb22ac4bbcb8b6ae0493b6215985be9d19fd5565a12c7ae4152b879374a161e826c086ffdccf53625d27f3b727fc5232b96dd88e58b033887c94afd6be0cbdabe2b6a919b1e43adf424a3647a57e84eb098b6f632145c98fa97bcb762f75e1103efc1c1bc9adc2023616bb1dddb3518a70a43da12cf201d40056561b4111f6d4dba00c8c93bb25164fcff7e805a3614640957876e1ad26847d407cb3a80fe5d88f0ada3e7ca4c1978897a3e99e6966ee40ceaa1e18e8c925084d6ab783887878876da4f9d5c50bf96bb7080107ddc2c8936c943b96da5c19e4ddf56743b2fb3b9bd2c6f9000171a40de0f5f69f5ba03cab79e31bb040a621dda23e7b2df790de7f8bf33cae9279e7fdb8fb445587b0b55ae18af2626e656625d84e1e2bee0867915dcac5bfb1f1e50e4e95ae26cd7aaa1cd61cc5d2bacd49318b20f719e23a5c2277ea6fa421558877c3d3251c600842f8b31597d232c8b447b36ba14d549121e3a3835369b48bb08fa56a09c12f367ef6615b5562c147bd1e471a521e02d901fdacbfa8422eb26c2520541d93741887c03d23ef1c34658c1466e658d0ed192bfaafe611b4bce86d8a91b2093fba2ac07a98af0291ea26f9c0ab833432798ac9b5c85edc757d6d3f15fb4c6fe22e164c2c14f0e8e826e4f61720e7aea492be9686802eb6777b3b271f12e5009b39f04998e53affa0fd9340c47c24d04fbf52822f18a44d67fd06393e4fb94fcf51bb5bf28415b0a1a8d7a6f90dd46dde43910301bb474edc0f214f10644aba962dc076b66d057d3e1ec3ee3dede8c776885180086aa5688845e930486193e74979ae623fcabeea9009bb617347327ab15714069e8f6b06c663d6996fe1a5890579c0377926af98ee28ed698026409ab0660d66f84ba30cd6a44a10a1707dfc3f004a375c338afea478ae1483e09bce048857b090ea22f81cbf75e1c4f02c20f01e918cd4faf9105947e0bf875a93077f522e4316ac802d048244ced272962634449c20c1af1c9ed5f3535408ae01ec091b1c7a7fb4090944533dc9084f9ab41b892755d132d26132d342597c217f34c5d601ea45979b200de04f41de43aec6aad39d8f902edb68bc5d3baf2790704547a4127c85f454d33f2fb50072ffa821cfbf8b204ca57b05b2de749f4b73992215a0fa1e2a3acaf0c249fd7858bc7bdc27e218bc285084a9e269d74170a10dc6029ff4db6b76c27c88f6d2220eeaa656a929e6f5cd4b50036848b0e6a97c7b792c461c0b8ba5cf95c7675bc73b0deb454884a05aefb6f97b78093d547ce870b22be1b99cf406d36b55a28dec1ebb7cfef0713195358ef43a22887bd0a2335ce0d326eefad757826b803592ac48171893247cfabc7b8efc37cbebbab4ca7be64e671cfa5fd32e4d1ef6084064c788449d4d00bf5b17621c044b6336a164230115d0e7bee9e1cfa2f92682c371d89288809c447d3117049eadca32e1cd65a8a6079d0997f7d4b70335d127fcaa3863ad5d5bb3877b21898cee9b4eb440ca75a4a69ab45d7590f51194222665817f379899c0e66e8e7c4e19603b0ce283fa325770cd47f370a7116624c9c7cd5f094be066fc255176b5fba6fa637e23a7aabff9796359f618dc4fee63356387b20c79e6e713269a69dcc487fe5611b434573236c275b4a81814093143a3fd939f0426a8abfd9a415bd956a86557cd5e1d796c298faa65d08e5a052fd002476b58eb6e810d1428669b63c323f2fa9b7eeae1da67ae80792b0e74c0fc2a11007591cc32b9a66d73412429b8bb9512920f4c55aa42ac74e390f49a502aea5831a8ef6a61261935e4f415e9eb569ab5af69b86ee96a78421757bccd6defc830a3e74a68562f51cab0e35610d00974e6c72706b8660fd70d9bd2fc3ca0beee2a7a498dedbc5c276c721fc8f1510ffdcdaf7825e34d7540e11d38b8c78f635a22ecb0e29e56856f10b7dcb7cbfb0cae126983330485195852e3b33f174de534f3eb0ca16b87c49fd1442894f582dbdb5402125890179f423c8b0c03911ca57d6dab47534b9aae0abf9eaeca2a4db9f13ba15638ed73b115997d5ad0bfd0fe44ff46e962d6094f2b04c5b636d81cb02251946649c610e8e3d1c6d4470c1413b26d596308b6aa6ea29ef109be83e8d30dd871d2d3bbc22ab8e10e696a86f56b2b2e9d74c40b3cf4da5ea112a6a919640c6682416be1576276ee4dcf03f15fff917ecf9778356b1515da902e8b564eb7b11a8b6409d3be136052135abcf83b724766cfd7fbb49a5e882b0790f86e664399531dabd4382a0cf244691ceed0a0ed4e29b3bb85accf1e0cf33117403b21d5dd91720def4668d43f6a874b00219f1d2de184dadb89bf97996bc9966337f4e0009e1f32689154b11cf5ce7da020f41837ab7849a11decbf7ed0e6a0fdcbac4cb4063a3f476d3a54c7e247664766d7feb78d8a55db6dce0f23c56b28edafce6a917f8fa3d6f1e777b6bed617ac52b787e23efa07906e1577e7c55096fcffa1231320d39ab3770718c0183e6bd895e8c911d46619222d68ee5a624a2086026135b0cb15cb28d9d84f1432a61468a272a369429b305197fd676600208e2acc055e78211e31987f579b9a8c786df775246c316b855eb0c9301fc7cb069b7a1de7ed7acd344bb2da545d51e0b5b0d63455fbb700d5fba4cea365318d9f29b9a4d36c5f795701663fe87c401e4feb3c9a090eab79692187c54830820b1f2462ef15d9c150e7bcb60d7a1103057e9c6e97745dc1a8622dc3981a3e3ecada30662486de8b3619537a37eb8ee05872c047bf24953699a94126d07052a1f4d117e4f2f24a24cb8184acb4aa4824ee69bd0d97e37a00237877a26ce017e9de237804231b81eb8b20fe18d535527f44aeb026103c05d66fdaa026fdc57ad9bdd9512edac44b24bf045857835772f3a17528f72c903968037b362e837bbe587ccb21f902e36a27cc846d87aed64b06ec0baddbc5ce46412f250f033389e52c8a5096a41e95e36829677447f7fee0d95b4cb4e9504a314666d1a116bd1c584713e811873bb3850f217651f7597ff3377fe5f659828972b11c386557647adf285e52ed2790083942e7f5e55693f4727285b49cdbf1274a635df35833edd7fe730cf23092d0943240c4ef6f30412f8055e1b5a82e362fa87763e85c2b5e6d0202cb03d4088cbd9fbf5b970c5fc68d6e6bbabd315d5217aafd828c88b0bc35fedbe296979d58b72faf4b0b5b5f90a2b61df4f21d43920c691aa007da1d80cf01d502d992d235b6bb5e7d4869981cd73aaec161c7947b25e20b266a55ae214cdceee91a8928dc065acb16c88b6ae3629b5a3da900f2de1c115940008860e5f18f1e13dc0a365951ec5ffd5571479a28f7c8dde7087f4980e2101490c0788c0920c146812874bbac6011b2c4aea8b0832b761b9fbc0f7ef9f94faf349e6e4b35d98cb790e8feebf62c759fe0b0eec0bd89146792b418f2238e344d4f08502d76d5a9ebecb40edcadbb39a14aa1adac345fa62d2dd49b02b8ee5974a7bfd5199df1992819ec6653bed028c00301f28106bb24a06910c5b16f03387d7f3600baac23a922faefa236c78633a1358fe4e9c99b4988422a1d425b3d763119e7a8aa8a1dc4ba7a73ac383bf27628d22b8ada34d7698f9c80caeb522c571bfefa3066316009a3d7d8b6b97902e3f2aa1d913b5b31ea014b3fe1fbe91ab946829df166536fcd6331631fd57a5c64992ce5b763a291283eccf743ea24d457c1bb1e3ebe8e31f477d0e0d29d62d35a7bb983f3e22198b515cdcae155f72941fdff39792bd3d7eed49a29528d4d8e87152af42a379bcb7315449fe978d2d04b63b6d839829fdb1e3b375c07ebc77a3b8c2a83a8c3dd4941723a6b8dcfb9c5177f80daaa46b06f4efb742a8ac5794325dc5d2081a26ba065c7ea8cc7bd6acab5399b8ecbfebb7025b74ab1a180cb25238ee076f7ec085a4f44b584d3079e1bc64424929a88a566e8cebc6c5e1c1ab69e90fad207fe93ed19947ce35269d4adb82ca9995b30512c8367890fc90cdbb1e7a557f8b5f95d38fef68fe4fdeefdaa2a7b36b3f11736408eeb1daea954ac869cd7aa2c7002bdb0e814864f42d383f6a443763b8379e1ca26ae21b3e4eae20d4cd044b0c1a4fa4d4ceb982f03060f7114beb6d26f0912dc0ea39345a7e295b336fd9c1deda32cc38e30e25bb0ed434ad4eb0ef084ea4ec3e1fce1e76c16c5cc798355dca28bb1cf79a95b546efd409203dec3fdf5f3aef14d2e64bac62509e95cc36349c0dda5313f80d5309fccb6196cd7d52635c59001a45d75acfc93f7f22a8c51d88b756b055f62e9d8570aa5655fc29309fe56313ea3b180d73566f974bcf86fe3ad5f3204a464e36207fba9ebffdfc6c5bbbd4edc4ff016438bf339582ea12255984da0a0230f7b65fd95896defbe5f6eb7a93f502972e2f0c358ae57f52f47de8d5cfad9590872a2595aca747705662fad8186c82f38cac5b1d874e303b1664d157c912c09d488140ba46fdbdf3c1d45d6371ce931a5b61b07a38c05b5ff7cbaa9a27aed03714fa2474a9495838ca717fc90ccda197f26657567c48aa4e1abf2178954fb686587379dd1aff6ab2e418254e348607403ef28a94d76e4f4a31ea34bf1e20d55c9a70b1fd7c7841c139e2928181c87a5d59a9c3ef0ed01f50493bb0f963ef24d745071f38f0fba136814f0684bfe1ae7c6cbded071ac4308c5de63801dab844eb1e4303a59e7e39c61b9982242dc977a4ab047d706d4a7a9f47d5b94e447ee146888cfec1a8a169d6b886d4f99f2d320a45f802e26e742b04d34cd155ce59c4481abeb7c09b54919dd07bca848f2d433b4b19a4a58447a132c8b284ec8599b675351b281185673d9d1ac6f511b55dcfb6989bf58caaf252f93b398f5e64b7710c3e1f568149780fe1121b860f7ce985f0c63bde0689508ed31474876e8ed75496de97cb509abd808e48fb3b2a1325b1651b2f0ab7a0a561fffe4c05e560270e644397e8e7e6bf798b0d06bbea53792482b738cd1b9e04f462e936abdd07fbe49c6e9fd102d76943d7f6cba79996971774152252898d0ca7621804ae5883de5aa76bab9c338e4998d70dc174f478b08bce0facac98204699e73357119280bb978609f2f0d562a0a834d1806c9e41ca2f79b6a78ec0b708ece65993a31dbd3d7d70a3037a16e1d15e175581dbd4407f155955b1c6fdb60814afc3f13f3c7aed5be113e9d966198e267d0cfba344ba30350d01522cafdc6fddb1048d19ddcfc413b2904d438ea6bf60310cbabb64a557c7d91599df6ea7bf594c91058995121658d6b71037a8e97d7c99526fdba212e812a5bdec6d73dd5c0a26b40dbc11ec9fd5cb8fea5016493459a7e1da592346c05cf5355c31aabb89c1d608cc169b7026ec0b7ac7f2be6e4dd2d4a65a6f8abf3f75b52d1470711240d5cdc5818f7d4d4390903e0acedc4602e86ee16625594ad834626421755a742597f056cf9f14897baa9301cf2978bfa4858dadb246b1118ec94c496e8900a0fc9909cfbc47f8f1a25228e07f4c867a7780b33c5bd5ed4290278fa0bd0edac77a3029e699348a9a8311249b91524ed87ae4a461170d6f091e80e4ebb7be63b79e109c99166c2b3e146a240fc361e74cd7c0b199f53726b3a3a521cc853f1a1e3da49ed5e3474f8360d520cfe76799568ad0156e30eb86e334797ef9c7f3a6bfe4c3d6a9beb3c19bfbf8b6e7245027b90f986761f2773bd508a651d12e14bf356143603d8a8928dbc2a22a444dfd6921db52dccce859d2920a0d1a11790a269daad59933368c5eba01211bfc3ae6dc21d8675dbac5666525ab9fd86f8b183ee77011b4437fdf3f6837dc580f78f1385ff5cbccc0b53e139b0949c1d5f87e53ad6b4a275f11be057b83e0aa01eb2b126d9eb237bcbb93579e7017106556c2928f717211e4f71358b985ec260c6403c07361f934eead9becc2f0a155cfa96c38655326a6b605d40bbb4da2ee65298cddeb9eb2ca167fc4c26be02b89620939a35ae2a1507df7a911314ec8d8ce1ab18be9bfdea6d9bd8c5ca76ec228a03aa48f978b093e039329557ea9f25a71528fa97e269fca27f61b59059cc36f40e0b34f5c2617f0fb96d83a8a672abb69aa1fdccddda2f9557ac72bd889e0c2aebd59cb5bcbed6dfe5a7b30486639dc848856da7bd173128790d331282714bfcac9655cf9f077ad3366398fbc3833d03b88b476f654c3b5fd0be9aac02f66eba2be77ec1b7f3bd5fb3ab6e9b2310095eb3ee0d29d5ac343d359afb760fc9fcbb76ad22f768d95ff7ea5ada2dda35fa9d1c970724becbd6f608bfade32f246426e331a44de67730b7198faa31dc1156e8d2e56c644a79c609448f158852d84af7d5a3730a84bc25979928b192d325b85507f2c7f1b8747c2392ddbfa418179b197dbf265fc5590317b01a768aa9dad7b30ee8004a0befec5176baf087bd3b983869a8d8f5ef1d9c0e3470f983a50a2a5159165fabe2d7d0fa4cbb38b37caf8a6fb89d8c7948e61213d4ff5a0adbedb2084f8ea21cb03ad681b2056a09bba3333ec1974a387728f53a414ee4114a961427d82df46ef6146372791baeaa6d5be81f8e1a0e3105c38b8a26eca2afd645f0326008e0a0297d02e937ce85ab518370c205f48c5ffb90b41026c11ae3c42892fa0baa7e4bfe753b5a2bc0f42425238522b70e026938f69502084c4dcf991f17fbb5f67a18ab1f5d3d4a625de1ae956ee6d0aed492581d7b18f40b3176347428fb7479939df7188fe3e76224aad1c55a11d12d3002577c07e63d5d49a6fd49dd933c308ca285c3a0d1dff24e8f5184a9f5a1851d3de434e8908844252f5bb4ad4f6d63e5dd30dbc7c8d388bfd453e52deb49a5e7c4c7c82fd49bbdc8881767347d2e8fd8518f8f0a3cce7e62b58046c82b718ebce8c147562b791e11f280e83c2fb9036e455e1d5dcbfc3d3ef049bf7537a41c03ff855273d9d03c689c923689ccbf9f0e1e33184226877464ff6b5c44ddb2e7d8873151dbebbe2d59d66447a28be81efd8bb27091cbeb1b30ee3d5ba58d9a9bed6a1e38d47e629c9b2f350f6a07f7e00e275da2b0e307f90d50b1849f0406ce43f9f590ddce9ff9a72e4f492d538f04c1a5e97be26c7fcb0237f2a40a361a36454b6355727b6f67cb982846f7bd5f8144e4a5d4527a096a9128527a4ff6041f34ea2ad19435617d40322fae1c8df681343404f896cb78c686fed89407d3eafd8dde33e5089cab3baab790c7199b09f5dfc85a2032185fef9e648a176e5ddeedc0c94dfc8a9af949b36dde9843db7ffb3f17f3284e772917e8680877c5fde39cb6036568a3822058ced1f0b7747501d9794081415abca53b092dbedca6789667eeb8807b54f864dfae417a3ef958c8d3f212ae117ac3486b56ee94de7a8215f5cd0c20ca578e1fc48bc76e187f577aa7cea3e927c192c2af7d4ab7175656eba761c73d656653d24e7891c80b705f22ac4e70b607336326d078584c91ab3de56082d5473b70275a18b03871fa0f4ceac0cf0be8a85cca8c3ed3ee70d437db0c22a65f668c1e04af3865168904758974d51948de29d566a82b34ecd8dae4844bdd43618d8e8939b634d6ad4cda6bf1492d764f0361632adb58a10e106647d946a728dda708e2e762fbe0e49eb7fef6c564b4d9d0699321ca38a13de485b22a79b765bd8ecd45e03e476388238f41048bbfa3ede1f1f26c7bbc93c72b1e19e4951b2e83adf0e2b0a2bbc4de3350617369722b83eef6c721d4bc863662c15708fd7d1cd7aade53147de11e23a407761e6d7215cc5e5093d806b2c93e4b97ee0271fff9c06552ad6686e8365b92d975f0651c5e8ed795601b28d12aabb9503abe3bb1efa9b50b6b50d42fd8b0ae1fcda592f321d5272c543ac0ce5a2296655597b22369156d22a51d720ffbab92e4e70b8224372890d48c3dabde68792ae48b266a7517022b0e8af903032f57a64de2502cdc3ac7e6d945b910ec3f093402b72d90d06c247c8fb56f05c91d8c92dd599e26decda30082686e1f59ad8b7ab22e8b69ae9dd1c421e6c6ca978d977460764ca6f8a42d461b55e3488e5d9663f48b5af16c8ec31eda7f85ac2d7f144a04a76d61fee1d768745f85064d92307914456d38c6b1a38be936491acf08213621db5a54001a246bbe3495dc5cf40e4efaf5a392685f00adc5c86778ab3bfc6f2942c9c2af2b71d8f1e5b96ac2974f2ff5b2649e439f03b4bf6d1c2783441ced129c17f3c8edc9357fdde4af531d7fd1344b6e1f0e62ed6c6deb6b86d2c6b436169f39f5d4fdecc05230ce506aa0be0a41930b0406bbc080c6da9a6fa8b3749ff75f50bbf80fcb522bb086b06a0136d70aeeab382c2c65b96f9e90b29f286d2a8379a9afd7185f167656f88b40ce6545e42ad4e999a25356efe52589a49f5dffe1b4d7c6deceead34de6e17f57c64b79f4f014f27b62463db3ebb380dfe4fbb9e30524f633c99aa8d729e2416a99dcd616c7db12c17b6c48f3134c5700d80042aca42529f395032381698514a1044e9dc3b92b5d5214d5cff61e916bb12164e1ce8b819bcdece17cf35329c5f82f655c41659dafb6739d9482fd64eda07cbbc5eee5b627828534f7a197ca3d6104cbe3d98488ad36cf2f6c13490128770ff9a732fa4d07771753ed5fdfe995e1c5283bd39f0b91b28d2a89c1f70fc601c9816c3dfedb01e12856ed2bc8599c18fc243587df1073c8e9cec520327aefd954cb0ee724166de061545eadb482fd3033d9bddf4d403ab96dc690a2959aef1316f4025a2f06cfbf36acd4ac83e2977e8d765b153e0578fe2ab9cdab13188c17c6503be8983ce595689d8322edfdaef60b73019d87c0107e244dbea6235b89b1b785f753c9f1df3ea4f39c3652b6c53669c635cd641c448778016e71b5f0f4eb588c65208bddbeab5ae7b8dae4143769199fe3956c618bb2dfd262f7123b5af8101bda0ca9e9055b8c944349d097cf49d48f73321dbe32e1b8477772c238b5f0e91b15fdd42329a057492e2c728870f74e261973e1744a0d3b316fb1438d31e0aae22d22ad7dd99c2450d0da1d5a4b88136bc86eb7385ac0412a857b905014de062f4d8f512e3d00d7e97cf53b812b2d8c228d64be11518586a4ae72b53f9871a6db1cbe583957d32ca4458bece3ff12de66130631bf61e18503e8217f17630ff7c6345a71a7c6f8b718773a762874dae94b652068d4635ee130b62b80890c626495beacf3c6e4d94c1713444e1a574e814a6b94d5e7975432392e1b1de57e5a3ad8d157c77e2e68d10aea3ae21fbe6a3321c75cf7997f438e7fcc5415193644e3bf3da036063a1c831389f6d40b5c1ab318826ddec7094149426b1d90902e3813e996626639a00a27eea4411fb997103df6d9248ac48f19fe2e66ae83cad02ea12b85ca466b268df3c44a9ca7fc70ee454cf3577da1aeabc665f52993a754fb0ed6e01e8e59c39ceb1c5f1174b52a5d68bf27b2ffe93890ce56c5fdf1114f68b5863a2a24757579212d125c4a31b1c4460873c953eb36f74b619d84ebbae6f80eb3d50c26dc8e350f97b96632df52de54f9d6a14e560a0fd302fc4d8f301aa86540420cb4d4d854e7eefffe5f8a6ffcca069a48b73b655fc24577a6dd72ac448bf5091122e458a98301a3ab36a9905ad79e3887e845667c49e7d28abfbe8b71a73b3a8d73eb3f38df605060160b0d7a54f8fb358aeeb39164ffb38f75b86470cb12496d22c09f8a7453df5e68ad54a94c2273adb542390f8b65a5e96e5805f346b7f51587435d14c15be27a7d7b5fcf0bafb212d19e6bea88cf49aa2bda71b524f9e911253d8a6876e5257bdcf9ea437b7a27f2980acb20eec941a00b07f56f8a02c167befb1fa20b241edfd03b08d7159ed859f94e5652d43d612914ab11081ebc4f981da4fced8107ee5c1db9dea71013d989db0c9cffd18cfa9359c382dcfdc4648aa7276b16993443006407476614180a736574b5f3f9f688a19d22bae330b0106aa9c52df74be138f7afa68d44ee3277844caaa1ca3eb609cc37a12ae8949a456b23691f31c770ff32caf813bed231992ff31a28ec14e5d2afe5815f0139f4b07c9b22ade5a3e451999d6707bac5f03b80f98c8e41e7b6e0a75d1335753a8fc7eb02397f78e24b4cb1444cf2ae239c3d2e0aef6226bd835d86b945fa21bf8f9d84373927caff39e8ca7073adc250c3b42f2d083297a130e621c4969d761117060bab34f650c35d66e8c62c30883020311827a7f0267cfd4e00f6f1fd0de5c3a8ca73207518c30c5ebb19b8dca13dc143b95660114361236182a1d0cfc8a0f48ad4ea8ca92607791e0ea51d023b1112314f944e4ee4b62b475fb6de4ea2f1e4825287ee655a395862873191517a7c120c7a209fe02b7ebda038172171a71028f39db3d499e6dd67a7a9633def98384c6357462f817c0f7b06b48b0a66b386ba26b480f2362f60b2691b49a648fe90efb504bb524d541049c8d86f47615a3ea04406477021e0e3ac728837011ba2d1c644b7d3c340783f3daeaabc190b8e1c702031ee915acf021108316bb21e57f775364de8cb08903da09b82d082c980549a0f23aa68509b62d6ab0989bda0b5bb8f03750dd1c9cb7fc0712c295e99be28481d8bade23be7c63308b90eb7592440b852252404b05a6da9e6eeaa2de8081d314030917d87733e747fb0dc29b58bc9e82a4a81d602a2dd819bf2e4e660eeb2cb9ac68634ccd52dd9157728a54411f91ce63591e6836f2a6f6d7611026cdb3ae21c77fb62a5f304cd661e613b3c9bd5c9788750fff5eb46a14c684340ca0c2647819e6ae30e64d1ab7e7ba65285b060b8452710cf77bca0f782522c1a7f72f784cdef75b4f3588911de2d04087bc4318e68beeae16694633c419de4ada269f19d56fe89228badb2550992d5885866924f2e9b98f0735816973ae70abdd132325fe2aa6bf0aa5bff0b16b9d5ee950a811291444edd768cf9c3f554a7b523b638a089c362f33d27970df2df61d5a99c806a17444be236e40cd683f8b94b7cfeab021c6a80bcbc62ada46467c4219ab876e4bbd80684a442bacf6ebfb88d2d50adc1b22e2c2e1677e9a36cd8b0168567283ca1a7ab143f0af0e078a184cd47b9659ba1d70c1b0efc074833bcc7798b931b934aa0283d9093b1fbfa670937dfc86556953d4cc5ac7653ff29f75a319a008e54264b7d5865e0b729d178f180673ee3e1ab3969c071c29096fcc5a8106bec1243f67be5146e6dc196be8aed9ea86ee93c2fcded60f3d7c188dc5e679c7837db2245feb927442596843e69bf9af343069b4b7197dbb8b4d946fb9b2e6716ec6571b01ddc50f04225d19f215ed663a2f17f7a52bbaa98c148228eb4ef103366fc5a7429856067218a5a0d9f7d9415affa05556b1544172044ad46f0e1cba50eddfc062f44b2424339ecf0ba74933f49897716c49f3b22e675550eaa8c796aa70a99850c0b8fc68a0c73a6ed70f4040aa1d3548c04a42e2f47bf96fe2e221856cd07f796f2cc6e7edc9b47a61067e69f3b51b9cd4869386c61c784d06d6e9b0eaa47f8f569da8d8519afe8dd9d535dc57a8cd56a27591ae6f533cce74247a4ec0afbc210d4a053c4853a6d2a3fd27b6839e0f04dca2facdebc2f0c4752c3e721aef77d584312f26c5d55451dc7647d3709300e36a2e8c64d4f49ccd7755a7d43fbd5bb1a2f4fb162d7c1ff6956fd1ceacf5f2bf73b7438954695cadb79c705ffca0b2a79563bee76f8abc99ac85a16e8f404868077a45623996b18672a0780b1552b53be095953af45ad1af8f1c128cd066a03876e494bce5aa65a078485207d2272f5b20e1f24997c1196a3355d6a8a81c86d9a4cedfc1a5e072caac43b162f8bf5bd300ee1092194722ee757b9a35b8ab61d0070eaee1d56390d17c6af6cc2d21ce7077f5f2296b239b8547a41cc4d4ef5014a98687ffce8b33a8a617d9df4a063aff6c31d092e26913db7e8180734ee8eed75a9074d5727d2cc78af990a9f2d202087cab47ee1fdd4ff7250951b8cdb80f8132731cb083819a92afbacab1b4a1171687b1f15a5b33a4f2187abd1a3fb467ecbaf3782001989bd0f02dec6d3e2615cdec03c5aeb3f351aa1055f011e91deb115fdf9db9d039609dc3deb8bcdbf5f515dbae5dfa85b4b43e2ba1d2667837ca4dc907a2bb6398822a0720863be64917f0b3b33b2c58368d25a79c14f0a9631b4b6831e53d18a9ffb894b50a47785e16eb9be08a985621fcbef99421f81b026f583c0b2ebd312968d2bfc5bf5970271b4c3504e547a9eab7d394cf0dc02c4ee3823f112636c52a7688edbced25996a5a9f2c064550bf610c24b407208770e29814cee0b3a419b8eccb383963f54dab9ce881e17d350977c898e6b1cd08b9f28bf2e67efa4836479787cf5ac5994277a68b908079f04854c36ca43b40f40d37de1399c0bc0e85ef00ae602de1478fb0f2001ed20de98eb276de9dba7d83dd6635d07c8dd0aa6b73f02178c11d22fa9dbb650e3a7e260e905e4883ca0c98de09c78aa3827e94804b5c1f851f1d8b94b5b6d0f26ce6d2cb7a8d536d9cecb49184f8da686094f1c3b282f068fcb993447b904433f8bcfb20f62b1ac753ba12a354ae6501aca5295c91e398f72c8abee2f3c58dd0c8de8ce0059fdd61fc36540c8c36714b864af62d9ae9a5af830c961c5bdf05af8a4c109a1afac34dbf07ae475b40d97481c7198badcff7e3fd5491c68e23f6a62454ceddb6b428d1ca5acdfe19157a119c78b31a31d708d415a375eb14d1b0b126082a5aaf9fab0cb46ec45069f84568e1cc0e5515a6966c9ece4b6b638cc73ae66082ebb9c3764b941595785e5f396215a0a61ce7d31e92beaa8425dc8a3e0beb45e4d7a95c41c22e8b56fdf476eba89caeeea750472cd9d9d7023714f78d8d80184c06057a4e22fa0f0822c1add1fd07b86d552aad10de273ca7ee86a0326a62439ecaa14c0c8ad4101f974f4d7045db5f4d330c1a5a44ce95169227217f76559e38856dbde4914b000a3b199da5f050bdf737365ae77df7b10fb2173964906c4e1459823928b516b163b7ef8658425076addcc947df9436b68b54dfddaf3e9d57e8b7fce9ecf402fb4e27fe5f402c3191bef53d45817b5806d3ba0b9d55ac9865332acfe8aed0d93994563ac6afaf8dad4e7b728db0d503d0bb13cc014c867e1bd67fdecd3d4cb5d2b8098a9cca9f91f878d9a68273cca37d0edf7c13a6d7739c7de2b0fb0a84b14ca6169c779f0b6c0ff0b0bed1e50c74a98c52a19c8825908323544730c5640f48bf287b303a790f40aef2fee1168df4576cf5757098db2b6b1c810b22431b148e16bac6671ac19464b95a35cdc2a7791cfdf2849c646224b682c7a6b3113f28e69647ffb1a8fd397fb1f57f6724fec6db7d47d3ca9a89ab90dc5fd93c4b2c29bdcca909a6bc716253cee33e814a468ab93cb5a5f8731ef840d99ec129f72ecb689a87d4fbb0b70181baa3047ce8de5289b25bc68e3c3b4554ad13e30ff2e93c6ed25360e5b4c094b958aa60a3f2473bb3b2f62cce93f7123d9401a8235836f5f12dc2253ad7dd1f52a5201b138026280b66191824ae934c9c44551a52bafe5f997236df29d4cf5892a2859d8da1d8dd0627a10d72c0b71ba265f2ef13159b1e58272bfb9a8a539d71e6831e9962ef17c254b1b731d82b6c6770e2660cb7e209c3f28d1b5c67d0173905a10c731add7d3058b33fb42f3116d8d7102668b793b17cfb02dde507366c5d70ce61b79b89f6ae40c4102f6cc6d9e15a5c97651d37bfc7f021ef8c6a631be78cb88c0266738996bd3a6ec7c78a5ede5f3bf1d82f37bb434a7e87c7b7dd9f0a2813e27ed73c565383d623ff6511347393cb6a987b442f2fc7ddd0db72db0cb4137a994772f032552c4a9d36126053c648b003a10ca646c8b75f32fcff76c1314aa096765e69524e7b44169c2e38f6d419ff3f531a491bbedbeadae6190510b8b8cfabaa9a0250df10992897f598e67bd25aacfeab9d913a4f8d7d64eb185514bcc64b71ec92dc4eb4f33529b83c536eddc3dee93784624c7e7fa69001849a8837599126b1e884d4e4882edca2ef9b89ecbc2968b1d0c805c89c2894a3e14ed22b9400a905b89079c2b54f71f07f627e78497a51000d4cd2228cc416d8b98275e58b6d4d7c9381592c7bfba769170677c8befebef1c2136d176284c8d09a2a1198a38d65e40b185911e8b6d0a17bd3332b4de94495f5dbce25f603c17dac8e95e8d73cba2a2eecf9fea3a1d5e5bf6194ba69bb37e189bebd87f880264bc7aec70416e53df5f0e43412a0c70d2ed446fb98e84dd03e3ac932557b20218910e7f15ca7041645834edb24cdfe302179549b5c9d0a6919c819940908c35eaf644af6ca2bc4994c1860f2c5c80138569e6b9b8d293c82dc4c05c57b913882b0fabe4641621e6141d226ccd1f316542d8efbf72af254d255c917afb3099e2d8b9188d92535bb65f6a9485364bff9bd19fa7d3f6484fd3333c68e4bec562edf0c91d649a65e983a9b9865c5532075dad5a555430cbbb4bf7f99a233c5d2632247c161a81adfb585c08a8422ea1c120b124fa4589f0dd0eeba7c9fd3196bfe353d163f9f010aa1824a13e601dbdffdea9f76ad9c379ca2ec4d70a24662ddd20d2a4cecbb80f4f5270e249b342a03d18996e5a64e24c8735b73356051b87cfa942e69e4efd3507e7681333375e86343debbfb6a89328d0b37a4042ad7b7f27cd99c38af3cdf51542bf00551da181c2ef1512bc032fa2fd7f161e8696306456ac7f95d06f25cc799caac5ca3efd27fc8c0f46185527b240d12e140795c7eb80a1046d5baaffb01b0ee7e187e59dae048fd7bdf2fc56067793ae87d050f4d5c99cbf6ea30a185868f129fc48fc3b0da9203d2ccceb91f8e78b498011de2fb099ec9e61152707e5de0c0893d087b85c76ac1dcda5ae29694ab8ca601254ca95c9e83beceb8fff84c47c67aac10c007e709bc57c3255c9d91fdab6c8badd8d600b18bf363ee8ff0a2da060c636dbfa20a2c37fdc4d94f2988c5ac165edc9bc1ed5d81b727888b4d906427b0a3707f5a58c2fc63aaca5389956c017b6ad3f81f2ed739395ff7203982a8dba256503a9c653f9e12bab31b8c6e5c616440099962c648f1e511631d96f6fe671fccb0349e8da9fe3ff0d43be9ad8ddd8b10fd36be121298c610e1f43429fba64efff85aebd81ef62d2a8ca05fa3c713a76e1348dda49a520be5c7e12663d759bd5193bfcb4e921bce59006e8686cce452d69b2e09a1dfb298450d0d0cd979547d13f92dee24b8209c1d8058b7640e25d9952d74b3eced79154fa5b2e309756361be5d684fdb9e8e1a5e1a1ce99d28b6c23a24f1279cd17a164322b6a9b6f7c271ce0bb62a232d0f9f590e8330eaf39d6c7cadf0c78480176bcf27b522c2b8806fd63e5cc87f2b765dee4ecde972a80ba446b93eb9837a0df43bf5cf9d64912916302f66784d80d27f216e09e46069e6e166854d9a1c891603a80119e82bffad190a867efe9f7c1467cef1a61b641f0876c40710bea361dc8f11b5135c57962c24d2f25b8ddbb8918bea8f24a89763da4aa5a9c93e42f97296a2071af04c2c45c69382051a23781181dc83b820b41078447ce29287addac3b7531041cda2e6b1d7e4c0378580bdeeb825c3fbdc0e032f5545c9810bdcc205a0e291060f575624cc03b1c80b330e59ea3320114fc9c12d8624c5aeff6a12e4a3ddbac226fb5e244bed66ea07289381ea373678df6e578565e8d32d195ceda2baff6e0436b39773bbcc2c98e37ef0542c27f976cefb75e3b4c4ef7854e66b82e8aa712ec899a4025aa04c553f038c47555ddc6451a936c483d36154d92797bec3594dba2b971ade20bfd1e2834a0cbe39b16ce251aa57616e30572d4909e14a3e09eb3ebb13cea448c94fcaa0aa1f2aa73d85faea1dad886a057bd060b0536aeb9ea81c5e73939c062ea05f015daf0928724220602930459a204d37534208d4d29179f63c96b4995509ee17d93ce243b1a4386867ba48913f34088e7b493cb4a9a4e10b8a8b8e2df653a920e450e79522d8323eecacc234019b5d139726e0dd14e8d3bfb1ee35c7be0dfec75fa4e5d274720db58f403dfccdbc84111d411d41eba4db8a3f73931acec9b73969b8aacba23ee6eb851f33c72fc2e9596771cfcc5ede4d95f6917de8746dda22b82a049dc0f6d0b1a51ea2a0c369f2d4d82e781e5217b1ce810d44a748f982f52cc3653b802de405fcd90bbf170c75eafa31f2b99773b2eab05df339d1ca56693f3344de2fa827d2e1c8a2cd93e9cff0dd5c8f22c3d7300df1e0277669f686650d19685e3f56c8fe4a9c3a70c08604569d07f431fc597e48d97c6313150a25115e520d91839d96768fc77b331abf48bd12eed3ec56c640bf9e356526882a97e33ecda60db2530323211a282896192c7cf5697bc507bc7b9ba8df70ef349b63f6aa7e0168132a30e682c16051de9206afe236b852309e73c4c3109c9df949ace8e2a9141b5fc61cb71c947acdd2aaddd39d0f631eaba738ca9478c71c32d8b7bf84eab9eb36390aa51d1d4908ec64a2ebaa20a314bc47dfd7c7fb6e69f9b5f5e65beec9dd1f1e65999a98e38dbcad7886c5741659956709c585248587f817027dc404d4a3be90536f668faed4a6f16c656c08c133d4f631bd1e31200a570dde0942562d91acf4d6da067e0add37354ff617bbb349b8c3cf88fa37e61bf3fa41a9dd65eab068b0a3df2206bfcf09758def4ea85868ad97036bb608d8759c7638070cc02806952c84f2c91130f5a2cf362821bd2afda374e7798daee01ad4fae28bb9c483096d61e041ad4258863ffe1ccc9ed8577f5525b6716444685c0b0f72b3360ed52909c4884cc1150d294098c326ce98867acda96893e20d04055ce9d52194967a048f091ad4c5317a50cadf8afabc218cc6bede51213bc9f","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"5772c6c6da40bb47a5b1786c06afb5ed"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
