<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"02d79233872e623250bee6214aa022f2c424a1e927872cd8e6a5814717ae74cdb0abd50c35777238f957cef7f6de23a4ccaaae1332ffaf6769757437aeb4f1342915c7b39099268089187062b94a4a86e952972489315b8519233efcd27b8df7bcaaf84a45370b57c4a747b86d9f2e08a6d80942e51a830cd50fab7823f6cf38dc99c9a6db1df7d4df6e2b2052e248e92a8823655ea4215457b29e53475d234140880f82487bc887fbf0563356e0e364759be80da721a72cee0a563e711d5347fc4aa7515b3f3f95b89633844f80872296e6786a13abb172dedb89f9ed419f69898ad74e67a3c5509c20c7a47ab0fe7cdf24a633389b9f6ad1f4ed43912f349e4d56ab71b870362689b6259c6ef6234bb03a443e63fd080723908a6364f69ab9dbbd50c7d2bace4c79030463399c96cb702ec471c626cb3a81ec5a6040ca27f21e32300e769a1f3dc008736b2488471348a7e74cbec686531e658d98fee60bcb98d998ce0206dd88c3a1fee29357753b9891f78884234304e019bfcdb45de9d198c995f4241c214189339e69e0a40c0904406f3916764fba4e1f40c3f1585486b533b57965d7def839c4352ea5aceb27a668b2081386c1dc35a5ab2273f2dacd3868ab6904844c69711951bf0705599a2c5e0033328cc3ce2bd401ba25fa3a7d4b2d44255b60d88190aee901cb82026d38456d3a662ac6e1b14c0a803f775e98c683be6862f28407c240c0afa4772fbd9ab5b53b891767a013d99989e4c737ec95312f1ba1bb9f6f7c27d7901a640dceec2f809ea7857c917157ff232889277feb702f26062079727251aa5eaecc7db5079ab41edb2df59a5f083a69bfc3a5a16f1a0703f756d9c4bd8ce77265630d39b16534f1203bd6c52518d20e1d8611bea220135cdca15f624d180a6fb60a5e81b7fd272a4edbbe76010b24b377a1c947c65d5683d169c9eac549740c20c7966f5c072ee843d7bd6df79e35121d97fc437fbff30af5375c6c1cff7e64a54790849cac27b6268d937d6771770c9b84986d3f23887360d0afba07241d0b62a310b27de0663b5e19fcd2a891c84d5170d3023bcbf503cbcdca96bcd440cc6e4959e21de1453bcc4f17be8aa2213b85ca7314e4852bd2ed7f832593b1eef724bb996fc020e48d222f5a9a4a38411d36731c0083a133bb7f4a8c322e329fc6b0c1f0398f483576ad7329e083b1f4d5af78d0b0e31270b3d72acc73ca46fe7428523e7876f31dd1bdd51548fdad3b9af43b6993bd71097250a8efc2f53f26f7b8573e6e7165cbb4db7b39da382002cf1526b825e85f232e483239257d2386d2c797852fd16f34ae825895a9932a3881c802c1f50e7da0ea4065d66905c19c2223a331f6dcd814b8f5f770e247273f64a327cee91e6098d6b6c7ce430e257478af066cfb5e1746c0b9ab864eee75b2e793981d5343c568f3b0e45f25c33f18e040520c2c9c1f7cbd72335dce0207211c6c666cfd4cc4a991afde4a921a59fe0e9711bc162dafb3a7eb8014829bf6652bd677d7aede56e5374e3ffba370cd15b1e8ff368cbcfba0555f84cf34ca33e692a480012e3c00e88d6179bdb1f88c1dd5ac8dbe96c08922c9351426948509b91503d4bd9a8eaf3e8a15913bc5f85aadada5607a685994518fd3ec444ecb52799523476d1d7d348f30042708b563fcd43a362bc7fd21c70658d2cedce19f31cb2516dde4d958a39e98c04512451cd0179fc9bb78b2a251534d75bda258e2e09246825a3e297621306346a77f46361fabc7ce87f60150d0ed0b0cc4cfde5363f0a1ffaee4f24ad2ecc68ff37bf3edbe567b6d2f6cc4db8c1a6b45b99e324303670f73ad38f7466180ae1c1d22627850b29a218369c8233cd8694b417ab788f9bf2128f4f96f06fcb4da18b227f0e244b8430fa859d3785d5745ab45831297d04f4046e7fb09924b22af8140fe239bc9f3ebc0877118cf6a96bd09abceb70612e0f31a01eace804e034e541094127d4a7e47b003b89e850bff7099e3d49c662e301040f2e96161460b6d3b898ea3a20bb63b007c0731bf9491ee2c5c8ec9181667ab16b949fbcbd61480e3b050b9bbb6d65e4739de4b5185a3a7d42edca5e804d29c5aa05b0f05830e964df60941e4a08811655bbf7f67ad1e7ac3789234bfb4a129491d37bc8d170627f8544eb95bfdd694694d81d0f9394d6cbecc3fdb3491f0669996ed86018d9431f4c8a8b4bdf2f6bd5e1c45cbe8b2d67966f47de210caf0779c3d4571a11fcc5cfee5e9024d49e3a729e59570b72a9d31bce481db33eed2bba29dc3b6681b92ba4fdd49429861597ce8faf4db71d139ae96a91a57b645ced15fc73f9b38449ce074b3f62ae9b3d71e12fe023defc1ce6548a1f71dbc575f57f9e6e2f6de05125db7a21a74fe2c62e5a51e7bc87bb3c0996b91534c7c7c727c56672e2cfe90c9f6ba23d7897bcb352f75036b11714a48b032b02cb83a02632c29f2e4495f3893d4af41b4bfcdb594e69fbf9147f23b7f08323bbf4d5cc571ecfeafe596ad5154a18bbb985336846c86e89ae1c8266afd044d6c4ed18b049b8807ae88c1146b3dd6023a860b020ae7c4357029983764a84b1d39fca5748874beec89d16022e3c378b6a6d8fa64fe9af8ca2f04d3eb16e67944efcb3aadfa0d785f03276668fe6eb4474923b975b2bce3499b2b25e56af89a2e76ae0205cf9681652e84e7f8dc062e514008170355e5e3bf013925d13f5031ee7a6eddbb78cb1cf67519f9d835d3f5b1ca762ecff75110b2361fa53feedd772d060a1c03213ab828e3ecebd97e7df6414fc1473355995e265a3500bdd092eda00c9b713c49b5c29785127ce685ef08e7ffc31d635cafb43d17f45cff442989ac03cb34b79b302b1dfe1eb709f51e31524d7cbe025ba622a20e1fb10ffd2f3f2d26d41e9e42162e0503ae42389f3428ec1e2854538f1e468ae98b06daead904fc901e04084ddc25ccb224f824f786d7c4de12700e7bff40d6e07f7e40f2bdb410e46b566870c8181e6bbea5ea4bff41713278e42231a1583ab0f3717061e99411e0a63cbae6e1265afb718ea39a92883910ae2a16ed507c0ae093123614b1a5e1a752f34ace4fe99317c687adbf796f821f5ccaa395db5d1c1a058583441d00fe5bfd91793ca8d76856ce546f869f29cbbeb3ecd42b26f5a1b6367dfc84b1781202c860859d5cdcec6670b5d5a32510372b3222727ab98cc93eab9faf693f368a2e9eff374f86455e7841591e351d9763e0aeba7a00ae6dbcd15eafc7c743be4f639e004b299e1ba56e69360ae0435f985252952486ea3e3446c36375c8988281d07b93d7becfa71b5d06085992d005169b056fd4941219186a582b11a5c3432ac54d2c5ba2bbe03e94bf05c66731a4f31b1bdb7ce744f4185f12fde9409de8e6849aec79c09d33b5f8af3416b1089160cb001d3bd812b71181a6ed7ff96518d686ffebc8155d9d9e411a07b3f89b9640a76a3178991b9c123ab03a5531a08b996e213e2f8d51cf7adcf1dc026d750204ba8d7b3ce1541bdbbeb71cc8647b0cc848b4bda39408f40089adec4ae1cdcc5fd380764f22c1efcdab6bcfad366d5e2c1c91066ce328c05e6c599e9dd213389cd903ae2fe6f943338461aa02fb4b6ec2072f7d04de2f2577e7d095f228e42da1f2af39bab62cef61da508fac2d200ddd6da55cc620edc5ab97c370948c8bcb920a5729a666314e92fa6b20a19c70a73b48328350656382dd0d585d110dff594acf913abd85faa5e73eaf97c6468fcfe8798b0d271e6f76e7095627b4c3010a13d0afe4f875823fd7816a57c9f03c34375a71c1ef82bc2da9dcacd6080efea93ffe2ecc6bbede23917c1c7f3ff6115e02c777ce1fddaa03e63d9529c9d059eaae897c7be1faae8c51b5cc026292285f9b949295cf35f0dacfddc457b949c341056190054da6ebe07bb81f901904820081907c20c831f706c98303d482d5898faa29084e09d177341d3844a4855246b866171d7ca50a1c8050d4cccd3a5fc9b6fdee9df70dbd2023c79e5ee7d5f1d4c179ab3f5b7740cb8f3673e64dc19471ef7028dc05f771ed9a72dae69a7551ebe8f142ff57142777871692b7f6b7946cc9d02a24857ad8ab198da76bb5ff2440a4a1346fea350da6a0ec58d9d79da0b3166131ce44c4d71f3d329bfe90bc3ff0de2883f11af023ca817d6e7eb8cf4976620c90430d2f3e42030a9589387346a764d88f41f6a70215d961f353efa7a3af4f2f9eb058d8d7004abaa87342cd51a0120cc21d1ddbc9cc45640c9fcccbf271600d2e48dc5c5a060c9076335c6f686afbd3772fbfca03cd6fa7941f834579ca58fad3f460068532989d145007d67714ad5d47a342f76387e8a54f64abed6608fe1294f12ce50bf70b6252cbd27ef34d6cc6ccb98dba82961ea4d827c3796fa3bca22535eef12b4321ddbc6b065fa9ae6a8e56fd0399e80a6b4b4295b591f29ac6aa0d2ee2e711ddfcbec7312c9f46adb857f8bf65ac40406b0833bcfca3e7e95b0d1f01f2d08d0d253bf15f2aebc806662ee52812d3401547a3f3863834d1cdbf939de1192ca237e5c08e2994a63c5246c40884dde1b6af3af2f24725e6c46272dc3fb403da2587b1ac69e606ca6e35ada04acd1978bd3c304e82675afe62542fa99a9736a07e9a81335d62ecbcc7145f6f1d39b151c206fd4fb90b0eed40381e0ae79ccd433ffb686bb01b747c433fd0cf52793234583fe1868f4115d52e8a196083510ee570d7cd07484d61b402c25f353db5c628443ad7a2ec9022b0ec63799cc729157d818e9349bb73f70feaa7bb5acd07ca0d2f694376eb48896d6312970f9452ec5dfe6c9e976ba086ad1c23af4f43c29848ad5df2563d6e97ef3bbb2abad000e93d5a9d79af5e506276956feceaa240942d3c471a1414b4439c53348a78eeedd2977ceb1c344554a14b74e3bc915890a26a05cfaad7a4e6ef80a4de72d7f926e4d3ff9145555621139f9d222bd0d0bac0a938b1a9673dd67c9bf50a1048e09488314d6c7708556152831998c316bfe1e12c1ec2b1e2be59b8de3ea87964bcb0e3e1fc03607506e32853963a18da43ffa4dfd29b67fc2a1f4b09bdf1b45cac993facc7bb41e8b0ed0fe74b4903eaab461572081ff693c835e69774b24804af8c744472856dcf35da7bd62882dae7cacf21e4872af9a83ef2ead9f49234aaeb4acf3a2c49b573dbf3bc52b1c5a315b17f63f5ac6abb5693f5a89f0836c203bfcc69b56d1a9638b936139aa75facf550f92de8a7dabbfc0abd0d51d1246ee139e12a8bb823f1f2c02c24b9c4f0c18dd59b9f2c6211bdadd0818cc813b48c987e088a3832eab96651a82e0fe3b17bf478f48de4048f35f894e420efba36d08524712203d9553324c5e8b86a58296f8f13c41db897b4e849f47347e5cbe1873c1511ee26669025e115e7e9bbd8553ddf92d3a63d2f7057cd5e6404faa26538748969012cdd3df16110a214fe54036cc49341167cff9faeaf7117abf2b7f3cfd376e7d66dff5a8bc7ce4257526d7254e37c27a5366e38f9507cc1124587b272839741deef122d4b6c457cd9b1ae692b1752aac412fd41361cffe7b40db5c0751a26281aec556311cca62861dbd3de7866973eeb84e19fd7a198a147d8517a0ebade0ba826f149fa6d84e94fe145f4108fb71287fc67a3fd8cdcd35fef2fe15de139782da559b5e9771befe5d5dc6108d34755981265f6e0226daca97dc4b48f5079eaa15f00bbabcc9e793bd46fe0868a74d1b99fd8afd075596db5d30abe0782a69ec2dac95e2bda3e6c76b5771f9f8b97e03a73e3be8d94eec968809f5e19174b0f942cfd20df01e424ef5e8e46ecb3e1b078da10ec8b67535e01ce12db61cebc04ab87434af7becefc74359defb01c1a9f841d0391f6fd658010bb29767d4ca6008ad6c5d426d1b589807c6eebdd6647c914896508bc328d731eb00e13c3365364bc65a54062ac4cc2e3e2cf3e662fea2b0c1531bd35074ab34d6c57e66d74736d92b79d811f1604bb46cfb379d7a7abe0b37b291bb84350ccea6f25b5bf578ecfa88ac2a38a518acac7566c6473674a11ebf7432074526b82c8997445c843b61b6e13a25d9034e1f4866dd0fdf3973020961520eb109292eebbb74303a3174c1d5c377e38430ce3c0a22a674f9d2796900c4c39e17902b91ff35de39d8ad8ecc69622e51178b38bf1427849973f36d7bceb43f4071017db1a55436002c47316e68a0bb3dd1ee03e83f0c284e03649931a74d09275e61eb92ff6b158af9164fe7e13b913c413312051c6e3edb7a87fd7310a233c7225766da9c8d83f3d668bbe2d001c8d59e48b5d7be0527d6a2224ee591eca6799cd02c46da728c46bbe01e0cafbbdf3c21348b507d79a7595137e731ac5bc46088f10855998c1f12d870e9c024a1aee3c3d08e002d8e4802f89384526fb8f7435c963d494d8ac3e5cf7da338f98fcf680332dc79bdb4e233f6c45f9b065ed110ac60130e80b912438f23b75ffdc87c25dd681bcbd64a1c16b2385ffde0eb0edfdb00009e47ec000f9a77730dc3e8f7070f17b1fbed470b35b90d43770dcf601d57487c7d998e8aaa2f240beddf7bec691c6b968fcda6a550fdbc3c082a239e4ac4cbe9c0c5f3491a8f5f6aa8bf70a67bb4d96ca3655c5d003ee3c428618bb5609aadbe6ac8a2b666c71f64a22594d99e898333fdb1eb7713653c6a04c9aa83c220ab1a10b3e7fbef57b106673c6b3c4d807ebda445a5d3fd04ab3b9980b6cfb4e81d8d007e26634abdf7140b8b6849dc87b215579b5c673e97214e40e6ed84dd1953f7314dff7849e99d173d3620b172f69c1165b131c8524982f5c3fd7a4eab86aa2535e5b8db0af0cc4031e6aebf7f6bd069d47e5b9ea6084d4689f2ccaa714ea52bec8f6599cdd78f1adc586e61fb0d6b2f5a585552e1fb0359e7d445195f939bd3ebb6c79bf5f7898154e64d4f76e9ed1d860d48a84a0afc919acb9eb17d2797fc1b8579ec2df82e8037e3b02c3b45c72805145d86bf4217e5092f86510aee04bbdaec9e6efc28fa4402d80294fb58da5ec2ec88485ae80ab4f669dcc091c2f1636129ef666106b066dcf385bf48ef28c59b9d1cd14939b6b610f7e5ab52ffdf8f94476aa08e8320f3ad065b188d4b2da850edf432ac9d959683158265882dd004378e8dcc82307e7f6bc7a01ac9328d4c42bdac74f9ed70ca0b7aeb6e174744c0fab46e1321301624ab107bbe032f3d4d162a2715bd2e7614c19d50e8a2cb42cdd5a5d7874d2c1a92bf4777e89ae873ab8c826fe810b4a63a32b86de6b540476aad86b3f1b926b9353d47b715b233844968eb0273e01167b3df76812c6ea3ec8a55a9b9c2db6fd463a333724348930e2ccf0eca9c99bcd9a362d926d18673b7ac18d81224683c1bda668398e665a645f54387ed1a17bc358d90e301bfff87539f1733376033dcc93517faa2184394735e65e9d0ffda42bc82c9c1132650dfed11e50306019dac4070c516b932ba0a195846c50d0926ebe3b5b3cb24aedd5eb66a79cbf9595a9a63dfeb64fbfc22c6eac68b2735de689f09427274f3a89d29d8c6097c59fd46de711fc3a4b3db49af531aba6e7cc05c5611d5de37a36b697aa2f673e585428f6e7a0f483e526b25b1d1dfcc2fcf7a10cdb1e9d56ad37902faf32be2c8ba63706d628d942582219596e023506224d7995ffef9ab82a3c3528afea925b218ad5deeeadaa291c9d71f160e5dc6bb42fa0a17f5d3478179fbe7f8ad19fc0984803aefcd7e8d983eb00a7bc0e2b946102447acfb7ca85a8d26b691aaeceda4e516951e27ee66f973466609746030a77690b3f89e38389a09b37ba686d04cb0fd85951ec13fb1d0f553e0fa401c06c6fdf180e4f2c580e0f1fc415894f4e455b65e3792baec536566b604ec69f872945b5fd6a3908f083828325239f3b1661b2a48f700f768abd26ae8918c47ce28504590b85d6cc3a244e9e80ea3647a24117e7e405d04b4a3c4321f71b0a3e8da5f00fd00b14f2d2f15f4159c69239bc9520f4a5a9a187262c8167fd370b2423a4eb8603d335679e2ec1d1223577feb51f58aabc40fe179532201434563a1b7d9c231fa3aa9a08a364feb89717af93d2c6f6e283df7d624275aab2053393da96095e2288651346a37e54f1d30bccf939192fcbcdc628e59560ba8714f470ff887e5d0b5d8abf27278225812f0d9fc4bd5c95e2c10420ebcfe56d41c639c8fbc89427ec4bf3b9d073252721a734dcb2a1495c6f9905060b19cb31796b1cd5072fcd2bf9e7de36eb97f8fbc603b6bfed863893fa1c62e4df0e278ffd5bf777816e1aa08220ea0787141a4a95d3a1cd100485e9ec0f338f2bbadfbbc2ceccc0ccd4bd085f513e34f72bc46233bbf5a09549b9095a59599441d0b24f4eb6b9e4a99b7a60a10e841d46c1ce4e36eb7c4727b77fcbe1e72dc47d859c3a8b1159b7dae4a77967666a4db956c9b4137cfa1cc1fd7648eabd314a296f4e35a021932943cc94daccc336951b6497fde58a7f0f678b9dd019c28736a20234e51d93ababf7df6eb57cbd282a97e926c6fb7f97a30bf301c5822a4ce85db963d54c9c52fb2be84e3f89e27ba72f73d0fad13f7ead70a7421d2e6f1fa837dbfb374ff10a4a22c444cf2ad2bcf2a042934599e23185275141b0210c4cce5a5daee561ea7f423c3daa8eab4cad927e9705fcc188158603381cb60b407d824b8cc889f2d00487f9bd2e5ac2624c95eca658ec5a5f63d003d0e07ba71e389172a920210221ef2e02493dfeb722746d4abf037129690cdb4c7aa6a9aab99631fc64e5c8dc20c212d22650f4b2c3c5b00892b6e317d75f9b2d8e1376c072718e4bee0827850b7f0304e9eb811cd0d914ff897a2905f9cb7f57d6f6be2e9fb06331132eb7d59308a3a472655a405dc7153fa4c0ff32d601f154dc680e393207a72e697da242e22b9bf061b4a886a1dbefeaff8cb8108f4dc9d94b035320954a7dd92cb76e1f8d0e730f7e3d014b6ceee9d8fd35651247bc7713dc6188c30f0b4ff1638b523770615137ee07a71c1438276101d0a811ad1bf8b856e549e66989a158a1d2625ba6c11b66ed89af6371719f1d49f0eba032ac6d545d5c90d4a34a9d76fb7caec434aaae7923d2f8b13286185b3366eacff5317525326fc0482f3801695c28535046736d2e9dae7b83deeab749792b1f76d4383ceb4d9e6ae271fd584c884660bcccd646749ba30026ea4c9c786431bf366f43134e7c58ccf744a8d82fb65a1167f60fc40e8dd075a29ecd70737a8a86184c75161e72fa9775e2c915dceca359f5fb0ec5f4b9cdfbd31d075e3e3ede946ddc5340ab6db7b2f9e66f44aa1fbe4e80625bb31fd1d22766dfb88ef2b9d47fc45793b0bff246e4ce50e69098188bd5e9458d0ebd3f9d676f6978b18ab46d8403238625fcc1872099a51e81c97e29816763d8491a8b889eeea9ba1a8fe69d82df279eaddb2a54734c8418ded22adb79e85c25ca348f6597494312603046e0f945dcb2b7d5fd73a470609b3a87357f333ae465d288957d3b8d2c26487d152ceab08a41a374edd2acc82a1e1afd1c4d98db10a4e6fa1d3ae379bd8293371563fc751d0b9b541f39e8531c67d425805285994ce9b5bbbc5580c6f0daae45ec4743aa3f3bd6617d5da8217d6fa7c783644b10e6e74743d34b80a7fbe0dd48e64f74420e61f9d5b00ac9c1b45e031d38f5f00342ad6f640ecd4fa7d0fcc8da79ff5beb67ef9117407a6b466095a30fbf960e6b9fa1e2f7a3ca2376b673d7b8e17ed7939b1c3bf3f791e1f0759b91a3040bba5d2e99d33cd5878e8c5586d1455b2b735bdd95b67f5e99c1628d66cab9a3d05cbc0d4167b5860172868492a5cb2fede51eebae4effcdd6b831933d1a170ab94260cc61653ddc162b54d31bf2893613284db046050ad3a41b5c170b2e0e8ba4a2a943de5826a8d449f730724e32ee4378b0182cfaa2c74769e3b8568e37a9880b80458b5988849128146969853a479acf20a5ea7f20f3b9b9ae394669a6e9ae9a3b83fbdf4da52ef166a6d261b9d44814ac0ee7bbd2df593e4967e68e014cac64b0d25a69038b882519f6b3d28cd55a8f509383a3b40fad167c293df17987f3ce23a6c72fe280bc23e54ebb6d5ad94566f36d1714e04a16274e9be861edc99621dabc6979f69924dd9fd584519c1e9dd41551d3003e428bfcef07e2b90bf70168a25695af8133374bce89694f71745f2a70b9d7ad3f40b3c4001f9f7c9b0c58b2e0034922f4e77edb2d641f3d31bdeb545d8255a8bd4a64abf6ab9b750b7dcb601345fe6dc15a303bae3cfda0c38abef3ca9403cbf0c73e7b6e9f78e3bb738e6edf9722f306f930d5d7fed0a12cdd0e4184b6497de90f93e42d67711dcdc4dce3bf32d6229abfcf8778ff3fc9f2b619d6e9376a48b462b796a5adaaeb89078e9452a361ffc0cdccee4323a645e00a8aa1d1d64aa611250d9f7a210fbab05adac3520fa4f9b8b10b9a879f486a2c5833993c079a9ff70617bf6c1babdb988cd2d1a57d909d6bbef7ca22085db44d297c031c966c1149f1c8be9e876df73c67e3cbbae524884fe4c8d162a1991c3bfa3720fea7ecf04e0a180c8566a179af8242a49dc2aed552f58b8895c497a999b90e60de1bfa7fa610258c2594a5a3f5707ac2b414c8893e3e65471ca2a25022691852f0aa2579c493581161ac365f249bdca431fffce35f97da5efc53dcd281782af39c937cdce1aaf6052b7d818b4812261098c3fa55fa21e9262a7c0e80c39d22645a71b5e7301570c6a6c1abe706e4f9704a061654cd554dbacdeb0c89c82eacdfdc90889ad2fce836faa77bfb16f1d4f9fa1e4eee7f74cf265f7df8cd794435bd74d8c82e9c67a27b4e10a82f63a7a971d07ee4868e3c311b108bdc2c1124c5aae0e02aa906ed7066e20ee3db6ca15c7fdeb3ba6d0c06e8d108d8e7bac0140b95911acd8e9de0a92e1e358f9b630e0461e38ef0147ca7a98e12ee09eeb0073c65a0c26856497efd7ab88878e2c1f5e122321a1e053a7070343a72033eed22491537081a06d951de6740674146267e4cd4b11d12941f798fa30d6c90183f18925243767a94e010c0cfbc525ef0113ae5cb858784100042262da8eba929a81bad737c0493e1217b716f76bc48f301e3ffc9908c3b3370c76313cfebc9194b413a573e8e8d125f099aadcee12c9462397143cab8442b63e10c5ac68d7ee88215e2e1d4b4db68c2dd1257e40cc4ec9832142df84c8958561704b3636cfb5678aaf0d82f19726d0d43bb3bec4a3493e2c04f8a8bf3acce72ce39efe4a18f3b86042326c431b405db8b42433bc49c4c2dc751bb48ac07d47224b5685712c65a6fc60abecec22ccc42a2b975faff8d10fb166bd7d5c701a75c1172077fd893c68e9917c0da1a812132135af6e34112eaefdf2d484686d8efce815c6eb4019b4c62f7cb751b8ed1cb478f7c42e4329dd970f19df9957eb20ff0446f13aa7b3782960912b6d8d33dedf7a0128e4849ba1cdacd10f50910a70993910bfec4b450ad6839072d5144872d498d11f48ffa6d16939d0cae8d9df4aef7906969f531e699f863b665c8a9a1082dfc12308d07fca16a25632e64b61ccf136e568a9033b80dcd22e4f3aad0204da9332f2eaa10e19aadcefef4bbe38235cba33cfed0f31cd8a02d0b1ed1ad333b6b66d694bbe63e7f6fd8009a0f90b877d6bdb64cc9a2b459429823831a4e6236df066c956162e27ffa4b83db4b06abfa485e1b016bcd546c6ec0631d7adb17a97acaab5668065125c813e43ec01e0260b04b9cf0fac271918fd4b810c740305c65a00d825c69fd29f40b13acfe354c0abb0c0ad0dbaedec84e9ec7ca001807df68cfe0ae30ee4bba98127de54b4305e6afb2e2c12e0e71e193cb467cadb5bca70997e24a4ac92798b138817bd41febd3439d049e5bef54d30c3712de6ee0fd2cb83400962c3e1885da574902d86b9f181490ea8c6b6a15068c96c4ca796ae97cc7151ddd202d2b8a5b682c0e16fbf85562eda887d912ff7cec6214e1981231c8b3e209268d496df4999271e8a29e2f61e8520ccbfc59197e3a9afe1933a91df42a1afa5c17006443b7bc5a308d62bad6451600d6a2998f356e91b7a0ce81ea1fd1eacc97d635648dc79cc3fc7f7010faf34c19d83474662cb945c7e4af40260452ea85fd214806571ef28bdd82eb08097db1c6b7f9d037147df720a7e0cd498f59dc58daa9f3e87c658be8a6a8006ba307b69167ea1d2f18216f3813d0e35d13ee638b8f9ae573e687eeb3985a94edaedd9a3dba3833edcae95356ed576f04d84af142a888001d34534be644b4b1c1a828d7317931fb4937f74ed32589cf20f9d04fe4c173223951eadaa788f0e133fdadf7967a0e8703e671db57a658a22cd1f684fd844595467add2be7af526cc6cac7792d541bbdfcb1451f8a9b5d3a02e5a618f23e25471d8fd255021cfca4734de1c81f9a75b50d980fd4957a6e9e2996e6e6afe2968d75d9e30eaf5e7226b39b256e17a5557ed4be7381dceed1eb0d14db03fa14f306c4878acacd53d1a057a50ae0245136a8489f83c498d960463f621e473bf47e1a7b922822aab83cf1f272fd6e178194eaecbb4b93fb7a306255a97a62b84b37ed65e3e3ed2177001a0ba296126c2cc3c5ce82faac7b5b6dcd384f46acf6dfb4a5aae453a0a891775b2cc01081c13cea7460c473cd80e9570b60455addc6d1e6b953635abb863d2f44509e48bb15b14864ce34cabc68fdf72917618a9153d947212cb9211c0a5db2ce8e600e8debc1eb3514e295136a575f37dcb19b96eba2392c205e0d09b838fbdb6da820a4f0c5147bcd93f73d06d6810ecb14df97048144ffad0d14f8b52b3b126c416e7de748115195dbc721fe9b76782732b30a26b6d34c891a345f07b64da906ff5d8ef2d0c3935494b410e00f6887ed0f376b16538912447280acfc6167701497f63742db73e80e12a858da4334d02690533bb98edc1900a75a669f27a7d165d98196bc9c40d05713d504c4c80ba2693132d95e101abd5492057030e118fce51748b98b4bec76ee6dad6a8b71be94b9f584181dfdac4e14a45a1814f11a7011439eb63e67e4d6bc7f908b7dc6fb6cf6fb41cd722dc1588a1c154ddd9ba2759f6a9bdc11f60d16a4fc7ce132b43499901947ce0b70bebf4d58d957cfad1f155752be1476372f564ea42cfbfbe07c6da1bcf8b9529fd2a4f67daeb0aaa8db797bf94ad64195d5fb5c885517918a910da6ef028afe238d3895250e5225e99a6c0c43df6859dc849a68357fcb49cf4272b2182fc4b0585d8998cabde987d5ede4484ff0c365886c43cb6d9b111fb42926ad3e01533281974884f842fad9351bec505269465049e44ad8bb1e6003e67c4cb1e9e0f06654aa8eefebabf75790227ea91be1c5587872bb0090123915dbc85a8307c616fcf0bb7dc7634a253d231fe3ee8f47d8466fb19e21ec13fb24bdd3cf5c70431f9c88153c3d7d4d96ef72d7f3fe88c795ebb9f6aef01942b396816c46ff9f7d78a155ad9d0f2503efd1bae3feeef2d80aca36d553b9c4921d3bc2d9364b40992965b091d88f38e8c847c78f1df1bc7d41a6741876f3b193249265a89340566e7f6f8d205227298934fa5a6017bbf07fbf55ad5a7c7f0cdd550a757cedad11a79f4f3a64511d02b8ad9e73e968cb402050daddd37c9b6dae68dffe7daa0e4494b6a035e17c5483bf0a557c3182c91a60d0ec5e7019cb1c8de7a1a1239cc36a8a19a906413af5615442ea91735f4a7253b222a34b7f98706c4a2b33056023bd9c759fb10b7e08c769ecd14c805f612fe4ad30127da71af5fa99a2a42772271274967f680a5ac3196b925d2f07aecd965eaab396e5a86881c9f84a8666c531d7f882b192ab41017d0cf1e81ca8ebfa6816ae18705b8e13d9f50b5d5112e433d2f8cd4fe8872fda99062aa9e3336095583aead2b1903f14c90e7f83f1c15474322d85056fbf6560d51d2d24c166b63eb9673675ac27bb6ec26e7ef0bcadc3e882abd70e754f94bdc6028f224de106f3a98e4c237974d5e372c914e60826b49583c8610545b65e7d6eecaa672aac087ea3ad97d3227fa573f00af7bf85aa9733114a5c122a08ef6bdd8e1244d5c47d593f3827e227e8059f943c60f84040534b668ae0246faecb1ddba6f5aaccc4382a3be8d5248383192292c60a59b33b2ff2570b8004a82b435d63a2580d55f4a5d53af290c3f03c630871d7056097ac5a8490bd7c4459171aa11303a28c049fcc4e1c0029078f873637a8104af593c741e5b9ec6638f04241437e457866b3526ee06f3578be44d30653fef39f6f3dcc99fb71ed9c640aef6ae9355897ef728a5ad92d363cd7ef056d9970df807ee1c754577b963f22761108018d6e40b54f56ca3751e5a6cb02f514ad80a64ec5374ab744ecf43e3ee0066cb1438b85f74943c0ea3204c60607be59d60fa7d6e6dcaa8ac1cf29236b2eac5ce5e5c0978dfc52f22e0edc25b9fdaaccca89998c95b63188cf11b736276c2b2fe185294b56f38ec5ca7d16170bb53ef2d7cd0fb7aef571a011118d0bd9744c29b758fd063c8b47da0276fae09fbf513f0dd6c5b034eaebbde5385f80d66cce45be46ad53a960814f44b0b77575dd15beb5bc92b40f4d359ebf4809b4ff899bb55a6a8007198431e876449b7ebf56ca5806ff2b86552894788568d9fa435cdfe1a7f9df399d8b0f1ec9451b871c19fd7f3a67189efff0eda6c4eddacb7496699eb5aa69afc7c5005712fd9c905cfc9bca70a042d4d2d93baa092c084277183826d47713c510c67e7fe20c72d6e7da137e070df137824747dbaa798934341f35d0c653f9f0c263cb855df36317cf0ab60a3cce6bf5bafaa2c5dc9d8d529659c1c574d347f951912c27b69fede8ea49de3a3fa7c85eed55b0235ac6591d9b4b5fe66016bff10ce7ec04010729808f19e7d14d163d08c94d0c97735fb64becea75a901a36cdb4efdd7eedb4211348377a034ddf512c88eaec1a728693442695cde98cafbeb62569c3fe26c1b692740b33b620f47e8019b3cd6d86ab7794e739900f41c6ce5964d3f56103ff447ec8d942e2a3ce5436974fd1ec64e3fefdcc49cf78f3f62e851848b284baf05e7e42070a78062333295a452d038ce1a1a6dbab0f9eba13795a2b5f39c4b72b91dac884af7cc7620e6c86c2a68cca185fcdbbb6acafe34f170929c3f24bef4a32450215fb06a91856c4f2bd70608724c63b6e88bac9ee66c0dbff41cd4c45177fffea89b075a1e62aa84451990bb3955e7a129134e5124dfc0771569a18c8778ec2735adf620645187f7f92904268dd1654e22b2d8bedf823df6ab6c493545bb81c6650753cdebd319c9e19ba3b40d5eb96aa251e93a913f7d9859b47cf186bb47936b9a80fe3d7456bf9e1506e1a93ab677fd48b1c20d1e0dcbc51db7d48f1292a2f37df699ee5ff23e4d3835f2e0f31a035576b39f5e12a7b92fed075c61d95b8ea8a36c0f33d92f9b38b3f51f3e5108b71c55ef232b001785d9cca040e51332274599d80a1540ad77d29432daaf50aab726b77633ccceb342a2085067aec19917a51fde6c6ea2a09eeb986b7027d1d976a42761ce4e4735257dea91fe32d116d1334b23603278a690eff33d9cb21a89f32808e5155cc24c87a6b4047e95e14e51c55b43ccde4da3e30187676df9b09bac94a18ecad5fd78cdfb3aab6d0a6b6bda8b0efda1ce9364cbedf16cb6a1b1a68df08c29a7e3a57818a783b90d35e807ca638a13272903fe2b3bf06f7c8e9a9c205d9d24f3ef88e1dac7eaba5953db99f638c24e156cd636f39624b284e2818f3724fbe94c2fd366c21678345eaf5b9f747b9f5ed504aff895a45bf36f706ba41c29e4245bd5286ad52ce7acd0cc8a201c860ef8addcace951bbac35dd3aa9326f1be7d73dc7f4b3d6e64dc0d9ebe99108d362f63fb4911168055e8456fb2d9569d4a86463b675693e2e51e4e01dba90ad224b5b615ca67b344618e1fb477b95185843724aeed1fe8ae0c9a9c329b6365d3c03f42a8e1b36883b254f67a342a21730ff12cfe28fb7cfd71d573a9e8f680f3101b4b34b0ad0f8d4101c66d4841f8757e8ac508a682c449c64f83f64d0a06e8f63bccb31aa38f9a6f683edd96f405bb8b6fdaa784133e4092fd9e4fd116e88f8b596e81e7cce94edbfb98c111c4f22938cce4a2312281cae07298739e0623e3ce349ae6be4077ac4d4e808a2662acbdc1343c478eb37dc431f6111b629ead0d0b0acc99bcc307a042331856961c218ddfd6269da2b9e266b8504eca30271914151f9d6f057317cd959784649df568e799996f682f0d9f35a806fac14c7020975e620359c7e6329aada9f67a0737c3f08668c69def220749e6aed4444f6efa2ad11681cdaab95f570b57514cf7a520ceaa1380987ef6e543c6100fc19bf3ee8d3d9750c255faf6f0990208619aa8389281321525ada18f0a8076bb238fddffa7f2ee628e75de8cd4d921080720ee8d3795313cdc6f269d3f0ac4946523b481ca7c53221ae4a2b12b892c4cfdb594e9177413d28e0130d7bc83de70ffd5ce113793792a3f1a04ded60608c2d21673620d4935dbe2c5d7c06ac6149773e85e60cb9d56ee37a29b20f67f6e242d83abeefc6a37778abe43a882d276829d904107f34a0bc507ed9971fabd6764201c6627e212901f9c6d0d6d2b2422aa1cbe56e1e9931a1b4f4afdcea66584c3603290c7c7b9b526d86fa9191ea12a42f5fc65b68bd0c7134a596e686214d340a4dad4573676e0a5ae2c44f69f76013f8f62b37e9bf67883f5552d2b370e335aad385f7b8573a0f54c53eb783a2e2fa0a0065947db69c3648e4ecb5d754a4b008de8a70a6ae8ac3ff2ace5e103077c249c9941aa4e4d4883fe70aad7d9682611151eecf30b47ac823399119ccd7fabb24f8eb38452dba01c42275a530ff1f3e24deee6995af014392fa0f3816a0478e8fc9b677a6f8ac4dc50755b90a688b2401f06a779ce8a76ef43815f1d0a263a6136643c24c6955fc6210aab85aae710226aceae3d59ba08f536a3935908e57cfe4f3f4925120ebe3c533968d5ba959a9c5cf72d0d289b30a711d7397a4b4933e7ecc60955cf48e1ff6835bd72452b9a55d540009fb273f7931d18725e38cb51cd102598cac05baab882af2c55ab4d832862c68424790dd2644d1aa139b8b59f0034fa39225a933d33c410f5c73085215ca1e442afaa8c4da8a8c85522fd546a42e1fdf752a8638e202cc982bb3331017ed8536fdd0da0d0bee60b7845dad5225bca761d3c9c23124efe7aefa248dec420612633d9d9910e07b6e796402c57b3f4ff09336962222c7553cc9bf75bce6bdb3dfbe2e3ac7b34297040c1c89f45161e3fb73cda7355b90f6a31a167129c9d70e463a72c7253e1b3ee8776d3fedb80b8f01a413cfb958f7f250e86be71b4b9faeb1c98bb935f8a8f423dbeb10678d31ea73ac7cb9ed37b509b0d0f52959edbd436d677faf74ddd4266eb55981b2c9a6b28c0c26335a0ede83624ed7ee29758b16023837cbf18dd3833e2231f44a589f644994a0e86f3bb098f01d52f025ed0a51abdc761cf01b2fd376b3f10505fee9ce2253816fb78aee2bef198053baf352e78165145670ff16d31e861184fdb8b11d8cb38df7b2bf24274e0aff4ddc706bda0addfc2bd14e38e11d671138b5626077f0ead612d803de590b9ed51e38ac3d760e7ff2461500ac33b1e3610ae29d77370af1eb557e588a0e66fcbf8bf8ca9f9756a2dbdd30c7cf6c9fa3b8a75acedc0c6183f99dc3b43a83f3c0f39b7c9924ab442a0244a77247057919f40405ca1ef71a252adec57c2c7e861a824e65bba673a2a906b7a870d676e1d541932d954c776be7a5ecfc0c130e30949e6f9ffc8cfe1070d49c5ca947ea7b9f79bda58e146e74d2e4a6226d825dd65c7dcf19fe57d176d67f7d6106b60a30275d91cac54493a661fac1366a9bdb498763e9f3f7088c0499b4347e6829270a7d938081d6ba350235a19ce6ae21f1293cce3d5c428978944cc41a98604c7185bda88a5f2e1e760eeeb5aa6b3f8414a62bcc61a6baaeea3f3d4828ce0b11d5a2107516c63cbf2323954fa7125a","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"2b16f9e9479bcd8e2eed943fd9984c29"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
