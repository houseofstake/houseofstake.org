<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"cf80e08d4535692e9ff0f522c6f85f345b9c89bf9059dcade63383073111f15c0edbd0a3314bc7b62cda3aa6556f121b8985b87766be0bf64cfc6822addda5798f8c4c3e5966101704deb11e47349606227f6822d94d2cfd3e355423dff9ee71becd4ce651d1a857fa88f01440c126c83eeafc251555d684a1a34c699662ae580004df4e848e4fcc2760ca2fd2f85aa4edaaf1da7709d29758cd739f87b5e751598dba22d2eb246cec96fd9eff5e788d206e280d5ac4b3c29708739ccf6cec12fbd87aacc6e73d7bf51056e9f7e22ee08a0bcc2dcb3c2f7e2a9445b0745b5a43f75ad75826377756689d058dd72ef659a1d25e7f05f5ac9f150ff86bbf3ef6a4bd2dfb992b40f86c2dc9e172fad47b69cefce1a419bbf2442fd8d17217250fddd0dcdcc74dc80c39534795bd9abad3dd7598799086e3dd637b19e740b804b35e707660277bca1cbf497898f9f95b90afe432a233bdb15120078c473b232ce2b827b23c59373874c93a52805330241f3e8a441dc65cff1ab84ee0d6c263c93135754f5227440a1557b0cd0dcbdb777d92c09eecbe9cdf3ad7b3ad539243768350d6fbbc870adcd4ec719b828b98309ce51692d795611173c4cd3e7f7996317e81479fa23ebb3f9e82c63006970c5775cdc1e68ff4702781187ae810348b13476b4e56ed074730a71d533c4111914f4d0857757fc1091d0d2e642d8a6fbf4c01d047e4dd04e36a5b6e2dd21509bf75ed553abb480aa7c1dac26f70c434867ae2c9ecc8347c121b7aa652768c400d5f09c4732d1db5cfc5c90aed3032e4361b48a9c038c15051d124d68d3d4ceccd2a105634a143c211552479c1d67ac31e98d8c204d9bca52ca0fc008bfc2eba166d47dbd0da5470bf07919935c893688d58b906cf84c44612e96b5da13956a4a90393275bbc4232f5259e50666760c6f49632138959bbe416c7a7ece290a7fe002ceeff0c34bbfc50f912aeed9da0b026783ba650fe18c8f0cf5def2624ffb236142108e6905750b6d2737cecbed053b8c39ef1150914e0c6a960638598c9b653c6bd7decf040130707ad7d874d10618dd6fa0cc8d9ff9609e20dd577d07335232674555b0765802e4945ab0a0b3175b9df9a9fd98eea96a0613b244048a257113ee64955e5a6023c98cb6cea28aa7413b277a1691cb9eabee5d3099afcb9f848e063e3e0f22614e0afb64856a06c690b5e245b34da009b0483b55e4e972bc0382ab87a83f182b4a6bb87ffdb9b32fa22da0e6b69a5bb1fe6590de43e503c248c11232643650495a8b6b9e67a57ddf39bb32c77b58238ff34a6fe84e4c005aa2b3fd03df25bfedd365c5c7359d5ab882633d7fb4acb1a677cd831ad2ed34baae8972ce8fdcff3ef18ad187ccda76e9f322c650f61699df3a1837b8747c975fd54bcbf7b513f85a39eeef4f72f42cb991652f98ce7cfda2229aefcbceb7a2efcefc6e88e15d9795e2a73018ee31f4e7d58607fca5c93b2606924b35721cda75dff179ab8f90d784fc10c073eb6de8c2e615f9906070f37df9295629e30ac79c93b608463a75e95928ea0fd8406351759e3c477fd03dc026714c713ca5255fe706ef249d95f762420122464908c9c518af05ed3750defcfa6bb09de052da69605be7f3bbb2e345168398ed4f386f877b54c725b4dca42844e27f85542f1996903741b6268b1b7f2050dec687313e2eded09760b6f77a4994bde91f5f813361f9643bba5324c44ddb1a301d88a4d9b4a46ee9273cdbf6075da0a5a8d85f219dbcf6cd4f9485b431898146fd7fe8d081e10c40556b525813cc4e66a56a075873bee98be71dcc03e94dad0a90cfb9344dc7ba178302ab18954c12eb5d8ec6bc63601c5c77bf781e32fa68ebbbd0a9b14cf2e5e82ce0dba55f9d58f5c1997739f6544f0b5face6c071085ae5b9d195e3f7854c7091b96f1d912424e892e514c8e128e39ca31d866532834467e463e5bc188b4a5a4f5999f1804f9f0f6eb4816181d1cff518a38e553937ff6817e81026f24dd0f8df83179cbcd82274ed15fb3e6faabe2ec3e480a1ad178e30b1162417c0ac604c1671e9d5476138e4474738e37a439e25f9e45c604e63766503b40e27d2a1e7ac38b33f2cdd1764c064dd9e41cca4dbbd37c41e876db7753e0e09b6a7f06305b0ceed7fd97d6778b121d2d5585d726ca083f5cdbcdc4f5d4dcede00debe358a456d1ccf406f236ef52f9d1e0bec1902c147fbd3d2759ee64b2a932a4c247a23160bb95d8b4d9faf732ffe12838bb29a2585b17c9a289b1b7aaed05119b166d9ae367b25e5ecdd1b8e4f19123372d779c6c92f6d87c58f58da06db7242ca5bd2ff301db4100dd810651d7158b1c4cc849e6c87e28b3bbcf49283fcff261e4f06d7c788578c5af496c5c1b9251574aec5252a2748e99695e133b62af80d4e9b416045f8efe964603dc7620eb0c63ca46f5505c79f62ecea8bab9d17743f5fcd4f0d5671de89730b77c194eae0b76e926f3e114e951a877c925c7408620e70cf3eb5c9334b58864db82f6d56f58c360dd1efffdee2c0a12bca693f22ee4bc0b7e25c1acd4497560382d0311bae62748969601d4af5ed628edd5fdc89e45d74a1462145f7ce60a9cf4cd099a5b9948c99d2dcd98256fd462160e6420d6ff42682088d03d9433321035d8e3b2491e7da70574a6c9cf810e13a7d6d74ba1dbe6f1d49a1730905aa76bb6026551633aeb4d2f4b8d53ea9da721320433ba21ebec725a941a87094e92afc18642a2f9bb377dea39c9882ba875fce48f31e5cf382fa14a1810941cc44501437c70fdb7178f475c6ab22ccb6245cb027860b6cd24263380fa18c34c5ba7d058d8d5de72435119caab1da8fa4568d2cbbd4b04315e7f5ec55dbca0f123333b185707d657a3e51120ddcba983ee45be19edd6c13fca7b6cf1d64a8d105c4c33f35d07a81891dc51b6a1e0c605591e6ebccb6e5acb8320c231b59d1d3f60d36c07f9381015a5b94ff1522fd583d27d4e01eb5c84f2d983f869379ce99e83212f214ac4130f47570560b75e96408f7fd3b43670734f3f3cf45f71dc861665467f42f2810870302084eacacdcc0dbd11302a31d2ea8618629ed7e1fdd684756c64eda3e77f47b9ece08089b219b2f885846cd2d7dd45cfe334dcc81c99d90a28d7ba8b6f96fe9ac26679ace4e0370e5c0dfddabadc4408a830c61d4abf87426e1502a4f6b33df2ace2d1593d749e5b4b09c4527c647d3331e53d8336d0511a9a3581cb1d38932bd8e32837af6d0cdbbbf1b7010a64c4839266a2c8e29cf682a3f9ca8618caa61760eabb71370a739611e036dec292f7a4a985b5d4f718dca389c76de773fefe0577371bee41a9435010c0dedabf54446599ce6ddd6282397d3616a840db48c79bfecf43090ca3aac07e145d44e5da267b90b940e21d811f3559b3b01e71f25f342b3db464c23905fd9862892f6943ccefef7bda32d5e3c1c7f54ce8bfc949baef4e52e00e3ae160d9de704c381341e505d29481d54d4abd999b9b70efb2f118688a1fcf335b7acd2a197230e77bae0b5f5d94d23678fd4e2ba6824ee11b838c2259bbe34f1345d9f4c3c7a546280560cb13a92252f843478bb774fc534d7ede5bb5eb47040f820d5216b48dab138a7558ab2e1d35afabda3165aedaa50b8a3a7639dab930173c8004644feae1b2e9fc7b6aae4c95f7b8bb5d912c2329929383421b6d31fcc05772d3d604dd12b9df44b0e2591958aad745c604aeab090d419f738a046c35c1ba812bc9abb3f34a7a41b4d3b92c0ad927b8e1fc184cf192361368a41c951174370479686147179e6ab31b815d2a1d0b42bf0d7796aae54f112601818900985b167478e2b026ed56148a709f84cd11e6ac6e7d5b04d998008fda85a8745a67f484a7df0ca0e07b2c79691d0671d5ddc835f102df28f4048086d6a00f1fbb4d2d5f60aee18886ec00fc88e117214de0b44a24880c19ed98fb05dd1e092334308cee1a19bc0d9544431d3b196763256afbe4dd655f0b79a11dfee7863680dc91c3cf2c3538a6e63d4b7879504c0edf53b011b3a0149c56224bc63f80368adb9d52645aad50d421ff1408928a44083d3bd35e09b7dbccf686656570235519dee227285385bcad65a49f774614e6fe065afda4a3f6e2453134415c756aef7ec71717936480a1c06b221ac6ff35bbcaa27ccb2345b92a46d20c00c7231ad21b9321f9d68a0c5e53f346bc4fda862310b782fcf42cb29e0e1d3719d69e80ad315231e2eda4ea3bb24c7b61c5b7b0bbb1d2a8b896a9e95f0f4ee6106aff6ac9b020cd2ca257f392b35d7169c53de5db0c26c9367c5d60ab18dd24c76885b62a15971e5c908ed5d3061e8a9a9744faf2e7e08f05e45de5e665c3aee66d47537e494132c6e74d7a97b0f3cee9fdec1f2eb86dc954fdf01582a9407bb5f27602a50a912d7c218250f5eb2e714c3d5816653fb4f392f34fbf6d636139c80b0a256e149a335e4ad6a17bb482e419f292f6cf3a9524e0b0e00d8a85e8d29f8946cfc7594cc0882086b6ca8dedd985e2055885effe19f481b253de0939d173b8b0c5ea45480bc3445a68a93f729169fec39aecd9b04d7c407de20cbadda884aa24e16a13f977f37237185fede027a60419362613702a7008a90b5bd81ee81f6262ec613d60b767e67232c1d3d68ef0e52c51080936d2eed263e5040211ece6d188b4a9ba45d85549529a8ca43c40a4281213fc75b7ac3acbd760e231e365a0654e12d8ed326b86338a1408324605b3604038a19d3665fb185a0191b5d0b2dfc5f4d6843665094f7ebca3620d523fc72a5f500ae6661df9d59aa3ae068c23328a2b702a80b0dbe6a5d177f5acc0aaf436702f73de5181a7bd10228478df239a22e376bb86fde6599250532433176e7254531fc52b1eb3ed63874cbfd0bad67fe31f34be2d9958cb3c59c6e966329002e799675812584f293e9be173fcad0d73423ed7356b0cf9e58020cbe457cb8e3e1e3369442d187a8652b3a9aa57bcfc82bb1315848fdf4f62e44731b7cd44d1412a718eca1b542f44569c001fb03ff647e0093fdd61adb93786651577f42a76a61dfa9029b32795bcfeede3bb79962af725dc06dd8998b1788273e940761a006d05352cb5dabf59c842407e9eccf9628a24e7058bde1c0a75f532fc005deebdb1a87e7db29041748630b3fdb9ae068f1cbf24c763970376913560ed7b525bc4f3745a0aeece1a5ef62e7f7fa40f557c687692ff2789a488d61f914822b508f29e6109ac0bbcd4323b3a84cab0681d1b4b8be27e6edee40fa28b50692bb8d7228590fa7a69a471488273a073a7f9450b7cdb6592820605bf253cff06c916f40b35b3048aff23d3d28bf43604b16f4a962c6d9205f21df21adb0dc535d46cddeaec279c35fb96fefd2686cb2dc9aaafd83c21d6cb2d42cb294f6639dfbc328a906ca9b467ecd9cf370643e33c5b8b0ae4a8c9d3a367699d65b13a352aec8ff0d5f30d6871ca2c0301001e3b0ebb61c90f24ec393ee27f59bae2358d34cd45482b654846d200ccb721a00003daef411120bae98eadfeb8d949ae09a34f0a23a98eb442f35ca0715350b7572bc4bf0ed764a0b0b042687fe617c8559095f331f3375f34f12e88773fdbff64cacb18210b2fb758c234662eb1f26978039df2f6e2e5b2f02565b3e9a130b711fe44ca97d3dff0c3b985427519bbe4f25a03c5cfd5b6228c1077637936dc2f94158be3835fcfcc636d0cab9d252c467ecafd4d7a8982599e0215108401b15355781c2327257edcc8603870ada938ecd938d2b5ac27eec6d9e2138f3fddf0b723f990a88f6eba31fdc11a4c269c2918f02a48a9750e7e76e6c6b544343f7e2c5a06c595b07de605d9af1a747fc790d1341fbd4b3dba7c8f488135b14e87b152fd215fbf545a2eb1042aabfe67c3d583b40aebcb774daec492a2f181686b0b2f508e86a733fe22723a0ad45c5ff039ee2a29c04f38afe54092bb869bd87dc691e1e04def5d2990512b6890d4ab14e813d942ab5a97e76c5668f4f17756c18171bf00ef0717c971b9dd4608e589a222db0615375237f9ebcc95531695a5a88ccb91caeea2c34662bb209341075f152c9e37c8f4ec4e06f049d4264d3b748db00e5a6a4ce2ca3dc2b5796babda4aac3f8b3fd755dcac83523781ec19167c133477b856d4821d4127f756f52501c182712c1c61b824238e93cff4d6bd77bc16fc6d205ff1fc95a6b9e385c1631a8de585f1539978684c450ecdb139fbd0f41de5d1beb85cfdbcce09c24a9a7ebd9cd6cfe2645e353e2a206096e74acd42f21ddd0bf86ce035e65657982a9f3212c2eb70a18b16dda7d653a735efa1ac44a53bc72b41fe312f17f343c0681728717d98c636840b27e1b6e1f6dfa02a209823b4504ad6a878bee056faed706b5f6cde375d16729040c76a238f86175cbecef413fdd9c7ade13c42dba9e384877af871cbe6249618bbcbae6307cc7951faddf5119547ce2dcb7b28dfda6c47d3e5274fe0cb2c262fc95327872368401f7f268351e4de9836504240d652f75ba39ef31bf2d35a7470187105b5827d2fcb0df5c8a23d07cec2deecbd539b9ba86068020b359612b7e5b660a5bb98e5d12711fece26f958a6e8efe70569653953ad2f2818a39cf2a9cc195e2858c908e2931c897d940d81e07ab2dc6e4b8cde204a80bd28a64cb88884938b2b29f0fa560a770a37cd7e13b228843e9f021f3145abf61ffe8fea88e89cba7d8e6181fe716f2d4c6f45051d9c01f21def86099c40eec7c014e6d18866e5c5c0281aa1132843da08ef5e2e16735a0658bdb23c396bd3c3a962190f696b699738e8099c9b071a810ff70c508355e402c20b1574f11eb0fcd3274bc1679ddb5fd6b25bad1a98e6f65045169952f193367c53a33bb9d0969536bf72dad445a260abbb88f5ad13fd1538c756525d2a01ae087947641cb6e8de7cd6645d5a5cc0499e1b63c483f7119d75294488143f1ea62a8245ca6791bdee0df12d21061ab59aabfde238e323d52f6435f2e3c872cfa1b2504e04efa73dbde2d54b89802b82c0d45dfe3bff790ed4387792859f48ceca904b20b731479bb110a1e8beeb5e37f0e2508a7ebf43c1edb0bd8da575ac0eb8970d143da5e54ed4a5dc96616d6c6c8ebe5e89bf01185e372ac2450982630b852ca7d6ad4e317b5e437ef844108b158902b640dcc4b3b60a95fc35545a2358e272d21c07ece91b58ff45bd8ff4d4df8c424cd0f793d237fe98e70d188a9b914e5441ca71886445f0c58cfd40722211f9554e4a02950ff798750f2145ddde4d436a8c76134d581e8c0b0f8cdea8e3503d7c98ba05d5196b0df6eac68f64484147920a4927dbd611ad4e4f916fffb99863c17851f880aaf578160fe892dc291858e37cd85c0e27e09f55aff0390a856f5ce692ec6a58da348385f13782e09ddff5fbc70748347aa6ce094c8019f081658e4ce1759a57491dd8d94c61b08afe133132129383ffa987839a1af95e4f3dda7ef84bd3b51b9d811506bf1ffa758916099d71cc394dcf61f0f3f00d7487c23583c3a331297570bf7af43ee44fe2b6f20a793b4d65f72a4c034b4df9864b5136f9fc39c635f6ded7ce8071db9315fe5954c93170ff26a25ad3422478d493fe0752139ec02a8b5765e6b618a740845e206c7e1257dde5886ad46ef20b17a34b81c114a7f68b797d4822885c69c7f5174416e22e4ebfbf7fc7a5896ffae89069639cf34ed451a7833fba905835b6857c496398b7d7d7251100da9f666ef334d9265e0b71690020ff291b89757d4c4177e1e148540259a5cec3d71710e2f71297bc2cd01c68a9e2e3aed59e428b84720cffe14aed0ce272e3a0d789803e3627f1efa2d4f8c367875cfe01c28b326d99f3ee0e461e7a391cd27e52d26f29940581784e043219dc1efed365f55b81e829d19535f01963652f82f9541f4132df8b5c047de7f266f110e4d83033db7bb49bec9c56ef843f118f4679b1c4660ed7e39234965cb7864182078b89d70194de33fd005cfa1c9e378d32eecd310e62ea68a2923da7bb2d1f190934d0068513c70fcba7056e4af13a57082a62f8871e7a76575403ebfd30eb0ed82a1eda17c06ca349569f0800812b228f445163e917808ef696d1780102cee93cdd148c754669739d8269fcc2dd9d11fa9a964deb6fd0fd71ed2800691b2d7ee9e8f2d1f6228d67e034f2762d239aa620619780c90dbcde2e85e05ed06bc53f8b002c4ed48bca7e562d31fd027f570315ee71e77f53217914d2a99288519e0d6a5c53fc2583688605c03c258863151c2afeb45bbc2343fafdf7ae07e77be17bbefc36b4a100fc7581702d2e86bac58485489913815af390da5b518ec4b7b66e71cd0955a5be7f78386bcacb82e90b9ba8ce00b9f24653823d93541f99381e46cfe86610ed21c3706fa3a252b7da1cbb979bc5cbdb461826a760f7ab0a2da56e16305932eece82e9d32ab759b351ad2d1ffa0b1ae77b8b9e59618ef1400615eeaed0a919e795969199140887e814dcb9f5be9a4ba4989d2524f6d540cdaf4fe329dc99d0eebf2c1f9a5c57a09c694d0817eecb09f13b8ac1eff2d911063443b0fb67e964d3578659c29b23799cb2f04f02525314217a4d4ed1e5d80d965326d2e9b6c4528f9a93a90c91e097d85676c592a6c76dbd0e0687cc6318d3ff20ff2d621c2420b2af4b753b7a48dca5a98745eeb7f9fd10453ef68fd8f275c3d6e3e74260267b31572032190abc25c2781eed29e3d89ed996e369cd4e6e55076b56c8bf6496fba9d1aaa6ee25f7fb4adc7e72f8a7e7ce0ec04ae5ab634b47102b9120cfd1eb2ae47a20ef102983b1314637e6a004a0be58d57075ca30dd7c7e3dc77ad9155f52746c05fd95ef66b91b4cdb1f4904cf0d2f53cd602325c334111eaed3313ccf81db25361da3f7737de35c2b0e1fce9d3dc34530d853b479909a55672e56f167b23abe273aa258dcb532db34b2edda54961345a61df106246d34a62e5c90b81512a4bd44d20190de32ef2f37d3923850158ecf4fa12eb98dec0475060b5d64a250e7bd11a65e6d301099a4573d784417e32dca81696668199b96d141790fed370626c6b7f6ff00fb803637cf3c0b4b9e27fff3cf56f10036877fc6c32c7c2e57f500b65681d56117f830dea7ba12c9ba929446090ea7c012e9a7be4ee78dbd626c48a5ac65f724224a61a498b3fecb2eac08110064ad02649c29e89ed4c31866ab690f9f566f61994ecc368fce4d0b0f582208f74305751364f2abe22bc16e3701490a21c0b90e833eb01f33bb8f9f74d0fc9fea5482d1c0b601ffc6852366700c22bdb33cd96a3f5c8e7005933c7ebeabbfe8affdbe90099c5802af9b339aec3f28da857fe846f20e6fce98423777fde7c130c2549cf517b1e75d3d70f9201a28f0aeb02bdad2708f8dc5d5fe8067b507659e227acbe2222cb64dde27eac20eca837db2a9b800a62f283acf1176d7006623847601a38468047002b26976210ad32128a3ea7b898c27c510664cf690e909a39754aac0873607cd2864f4536fb62d62051f0d17c378c2fce6515b19f69f6024841fe4d2411ecd5525c604bbd11dc860178619e67872d5d15af59814311252d16cd2c335529d39106650de9883657674e340a6d59eb35799787a2455636355677ac3fdccd98af54f5050bae7da6a1f32da6a10557d977a3f942fb6c69e56724af8f05fae4d051b0842dd748165966c4053baf7892edb3dcd67abd7761769f98ce6e0097e8a1ea19cc4de80d42ea9c403ff1f0af1496d482bdc976846de8a2d5be205d26117fe229d89e468e389c32f0893d595d854bf0f0f66a354a29ddd9559d281f5b095bdfa147c91ab5e6d011ae9a1bfef9e5399d9f3f4ea8c230e8bae130342132500dcb49b7452611a7132f8d3befc0c3f2735d3c41a9558395b00fe75125ad17282c49ce7839bb5c474390f50b15ec94214e6ae8a67cf4b07166a3c97107415a5c00e4713a9a50f2393f3e674e7d0864b547a468959ee9d59370d8ac8b41f94481ca43a9da012fc04467c20d22410bf26cffa41beef90e6111bd71d425bb766e551965ed18cd150cd46c8ee27bda1a79d906b0ab348a4bc4493b6595526a082183e39ffd6625e933a732a655a8f8616a9360ef11a10a3d99643524c276e14bef6c67084a382d1048f6648c07aec54307bd2b04b975aea511ee169d9a7525518c4ff351e310c6d1e11cbb37447647e65aff43e5cb43be114b010a50f23b91b6302023199fd00b8629fb85fda2c2c516370a466efbcf03d76b941e3439cd4c137c357357d8c66ba8dfa8c9aa9d27d37fbc1d7366f0125066f380ea63c8d50a236ecd9f8fb86deb9f101bc6b9d9828bce3c37d3d1cf0e9efcc75b959c473ce64ed41f4bf657e772d099648ae280f2a4fad44ebcbf1944f04bc7b2c0c04cff699e16ff97081dfbb031eb7bbfe7fd3d417b88bec1d3774e6b3fca67c70d915eebd9880678f1658a5e42b87903b6d890e51673ead5fa4412d507e138877cad9dd8edc732273861c181a7af377a83f97d94ee0cf1f24025828063ecbc151d031440bf9ac5dfe6f88c1e9503189d73df5c5d9d1cc3cf00c8ffd82618f7fec3668ef94197ffb34ebe6b3173de5fcfcb8568d55ba02ff37bf3693c616c6b9605dd380c452e1f20ef1d72de59d51b52e83e1ed9740e0b5346e6ed5d489d5d197a0c6a16e201927ac43557fcc553a397dd5a0c19663ea2c6155765d4edcb85ed6a80a17fb7f152036ed06fdb717dda5f420bb809b05cd2714eef1695b1583a3966aa9b6a6752ba1ec1b4f90b51acae9977374b337449bb8ce3200618e5a3de1a58e5e993ce3b388b78c67816e60afc83db3b0ba72fc94371e25077ec60f47495e0ad136b4c1ab6597252d15131a3a88a98ddbb579ce2f95eb3f3d52830ae8d6161d33fb37651d9bde8b75e1c09bf2112a27b177036787f0d1411bbf1a116f13b8d04cc97c3175150c1daebf4fb3274aa4c599a7865b3b9f3cb91fa4b343a3ee1e1b5880f4093d6c9292c9ea7f24e537671ad25abe6ec91de0136c47801080e6a7f584a81469dc38ae9024cbd3dfaa3d940db5b51041bf03a483b8b2dd5f2487bb0c89a5d56e16e7d98fd38da947dd72d80138a6106339124289eb58a5e7ed00153aba1ff959db6d010cf0b1d693129e0a97670d464e30f7bad5a1603bc20976ed4cceb1df8eeb372c843d3ec58e871d7a556186e4d06942f6dde585ff18d8d5b0fd6f692f7672afa8ec17ebe812ab5b37f2b4d53b678824afc0100f9f6fc9c535254e4d1738c036935d47f9370102ad421525272ad366cf39b12b8a699f09574e4bba3040c448a8cd6bf9c5ac93d91d6d3251029dac37b2307545da8b6262c8b97f983c2dc623d8b6fa468970b1e80f6154580a16bca002ceb18fb8a61623b241e40df4246d1f87b88c4a585dbfba586a4137da6cba12f86103bef059ccaf9bf0600b09081ccc57555b533b5701d838d385c3b14a78fdb3670fbc59faa4a16fdc232322aa21042475496259f466805c8cf7e4e9393d80b922702b1d820b30c49418fe153191e58f9ddf6a55b23f2d75b77753a3bcbff19f5ac3cd9ed8125a09d987e524f8b249d780eccdbf3622450b312d49454abc86f44d7a30edb9efaf6e3a84c19d30ab4cc6aa0f4b946e1690d9e9cb243de368d4df3cae2eed92e99c8b01cab32c6969b6aebbd6aead48621a85715d0fbb3629fe9272e252b463718c0b1a21776c2b0f1c49d216221407e13267d1cdaef86ad940ed5c00ae456570b25c1c84aa960360a257b45b917e76467848bfb122a090a8d93c3a9d0beab1983ca5305a20409d206d9b33e96043a864061b36e14e28f1718d6053e56c77c3563e75e1f41b5ab88abe03ac14bdaf4b6d043b2e8e162ead70452c6b6ec971183e3fa17c68704bbddcc1166ec040f2d5b4a806ffb039c5a5b075723ba75fa46ce308ce5e31676198d23d63ef41e661e3a90bd2cf9caebc978abac8a0632eae1571947da47d3790341bbef0761a47fc8babc2ed580944090452edda1dea00deb3733a76b72774c2abd59e321546543877a09e17c8ecfd87a194b9be5e28ce7d416623793c4acce141578a579a72bb8f99503f0aaad9f3c9f37cd7652414c7715ba91df74a795d636091d37767c33dee87a8dbcbeb49fae3da97292d89d9e098fa81d6a3d1c36470355e243ca51a19b161fc5b670eb8c89042ea8b4d2f718eea650c8cb5720836956f539974ea1614bab6ac2d89ea24e1dd0455456316c025e68593cba0cb1d46c5f51d9aeb55d59e1cee14c7bc197686e2a101db11ba42a999e817aac17dcebc6112c5ae34604c3be938e58923450b680b348f9c9e244306a61ba8dcf5ec5cd78c1650619e4e1161e47e2c52f6940c002ce8e6efb707d16832b38ade00b971a69df13014adb5588c80c16afef91fea2a83342f25fa7a30245e7ce899b3db6bc44ca68cefc6f2bb38dee0336bf7591ca389e6c7793b073bfcc9b5705d7ad6221f1dc943f5882516791ddcde577a44d687c771007fbcd747628d3f335787ab9676f9fa04a2d8e8ef63eddd08bcd24a8f45e4c688278812dcad1219816d6bdfc84aa49986b5fc994ea8c10d9c1383fd521150f86be632fd29587902192002407ef87b61af96d42146a08d7a0eed86751728dfc3cfb6bda734183861a3ed57b6bad7aa160e8584900152fd4d346d2f01d0fd3c4a7c82f6d4e874b476ed6914863e8576f5b682bf6fd2c8aae4fbfa82461a485f36111e47465ac8138bf8b0f73af94d5b2cc5f00f2b80d60e8e6e215e205e6e9442bc284a13e7910df5b9ae83d34da775519df156f0659c0ae13e249c3ac8fd335d84e53038968c0869242e679dc644f47c5c0058bcedd6f01386008652d161ccb7cfe9d52a1e10093110ba8da07136c12d8ba275bcb0191d0d2d9789868cc47889892db31ad9622eca7f6d096fb9c15852ad10e2cd756c15f43d5b103e3706d2d04dcba82cf510d7b4b167ed4c3adc9ce3f97fbaba381e5f6e67871ef4f122f3a96ffd2256f69bca923a08593def39249d0e6b5da3ba9f56b8d7d54dcc7c23639e60fe6f7fda0fd7f69ff9289c13fd012beac8ffeba5a00506be2cda968ce05b1d90aea0b9f475dee290a90b0636a3ef9a4cbd7950503fdcd0410ff6dd1c94f8b41f28bb9d9fe0c9eda22e19bae0fc39f4c56a3671d2cdb1638eb94b2b8cf598bbf8d5c42e87da987ea9ce058e09ff2af5559645c696a76a7dff427944fadff8aaf68aa2fa1ae44a58ad5cef708aa6ff1954cd3ba0761e2f2a354004b17d00ab664574188542fb1095bfdb2d9d9098caefc1fa12b1b30db29386506f59030ca5078f450b4a928790989274b0bf6351b73f1e514f0ce912307d9bbd3d0cd16773804bf1c9a2a1f86edea11bbd922b6fcfa5822ff6c65250423a710f56b98ded0f12502eef6623eec8fd0915045b3ad77fe8e209514c35ecd6ac835daa6c0e671cec33ee163f30f900297293c7e80185a9fe8e302e0c9c7947d983fcc7955611c6b7f317176752aa61c79fbe8d3953c1829a8cc3b8ecaca5f3e69ecf4b02cd1af967e4472f0877bf0519b97005d318db47e60349e8bb07849bf586533bfe111b42953f03bee12574265a9f4a9b5b4e90484889016b1f53002796967c1580f44cda03e529fc983b8266ba481f2e979df015606af4390b1ae3c748134df92d5df0dc7b321a0961e354945053dd0a6312716f986243ad332939b8bc4502b742bc99faeb5cb562b9e07d0b8e552632f94b80fb9f445d451afb2a3279f4dfeee55f3ef652acaa9143dfa28ae382f92b387831fdf93d9242b255db509e48ca94d0d1f6e1da152b0d4d18b7ac00de1dbf407b5f1c14b139f20bfaeffe383a623ac25c59637162e7b22abe0835ed019e1aa2e1f331c2a714758f9d9ebc2b026a84e03d95e847cb931fcbad476adca066b54dd1e8437b56afb9540da71283d18013f5fe5ee189d191b1a38e02f796afe16f8c5f5ffa9fc4a3c0fb4669f3498d09b9b03d38415df0166062d9de6d8e53a6ba834dc37201029237556e6eb1c9ec8d19894644b560b66ebec449062a7e8e0e4c388425f85b6d4b9afef3c10870f08aac3f779b3611c1b2999ddc0a097063b55ce9c358633d2dd717c66f9062d92854c552be0d94516043abb7dfdb09822969c529da64b9eb11976ae043b1b702568a2b275e7a7971d0762137839b7196424786cae2d348937470399e60cf18446415c51ff7d8d27e675d3b8fa733beb22179eb60acec13d2b0d0f4c618ecaaa20e93cb37aa821d5820789bb3dec2cd4964100272302dd86a12c157dfc7145cf3240264155e28ec72374c21ae803bc5a3f1315abc8c0e2dcf4d54411ef0df6927c4e3d24157104003992fa445a1a4b56c35dd9ad50d521d038080e4a5605c308c9b99759cdb3adb2ccd41a92dec77336f576637403b18af3b258a4bb5fb8cc9854d03fad2933e15401a7825df2643f4e9a9e8c383c426112fe61db3d279dff84c8dcf08f9cb5ae62795bf58fbe9b5e508300254a3edfe4877cd7cf1639ff7a7ab916f8e40213a11cd9a58666aa2bc8e6aac063f7729035044437cf3d788bd006ddd3f3412b276fd3b0001b13994dd986979177b63527882bd93354b3af58c4f4a4cefc18e9bafccc2dcb446648f7299b0af518f335d95e7aaf901da1c55faa1e5c5890b0a79d30915228159d94f2237a10d4e6b7e88bff2bbc8505254e2a6f6b9d1456d404a3d010cfed1f2917f540954fc4b7d50cfb171b98cb5f6d07fe3220e8255da380ce76819b06cb8a07235fa05f40794baed4b3283c9d69530b0551919e25c4bd430f286b32198eb99abb4bc763d172d72e05c9cf664eda5970539240ae6ad7e3e693b258a30e84be2a6abdd612b81e33756f3fafcdd7f7dc17f199b4adb8267d174a77923d7e6a4c9629a46000fe602727fbe3e50b96adadade77fcdfe3ec455683a038fabe9587665ef15e7f4807844c89e619fb1cb90573a470173ede970534ece6fd4423c3c6e34bb16e0be0997d87d9ab232ddd30e7914b7fa8188dce19940838934ecd197276be6dfafcb8f363c963cbc3a165eab61a7cad96b81c0e469c9a060bfac390d2a08e325062daa8cab0075cf5723802aea34403670780bd6c30831294c54df6af4846fb08229535e3bc42054da46a35a1ff63a532d0b2ee267185aa4bb8e528e1689883b27c0bcc9b05e5482a15f9169e910eed300a99988851abf7e55f43b25967ce1ed302e2d8e79e34a722b411a4844606b721dcaec427b0127459cae7544aaa999afc70f263ffb25a5c94f82970d688fb249b77903bd2b3a1fcf3dbd39040f28337faf841b05bf04e5254dafee6d73c2d4f0abfcfd2b9ce6d741b0a42197f3898766e82d30361542c0af02cd61bea4398f27c479f290e6bbf6ada555781b26279fe045974adbd77dcbd82f47a9c56d4dda0fb3f689cb7dc0991bd12a7fba2126434844017293638e82048e9e0ccb4f44bd8e8ff0b0e864bb48f45f6fa7d5d4133c1a72c132c9fe272bee0286410b63ddd2c85d8973729c40d698410158b69851ec20c4d25f14973ef5407df6b0a851b34a63ca4d746ba99496ce26d23dbb853efa903126c784488a6820bd8156ee03972fc3f8c0f772d92574f933c149fa11b9d8e80935bfa3c6cb122449f4bcbf956a536dab1f174984b6c436088c2ac88183a8f9d77aac53e01b834451b68c87dd02e1b1b2879a11862b99456ec3a266c717ffa0471ac91cb4796f3ddda7f99e6ccc37abbfdfb9cc6ee63b9fb121f56f9db6f1a9b39a01b110de63d1d54489562fb4fc0c8bcab93310c5e9afd5caae7bd6cc037a653c25a87c159423d15d30a2d9ddc24755891d12c80a8b837e7481b90f093658289f4006692b2bbf1b8fabb87930d6676c5cf4cf05482517f7e8f6f43672384984c9e5a44d8c2c81f0b7e1922e3bbc553c93c0047e12375187fb95ae0e26ee7754ba6e931d0c438a2a847dd9310513c0c9a7da901a10f50e0e78803364e22a15bd30f17ab536621a861feb2451bc413a53bf05f3a7ba9d67d88ea4ae7af9a41bb8cd8cccbd27ee4fabd92a23c82a8c73c15144b4dabafba2c539a63cf16e532034a933ca80c3cb85b63a13ed8597a164eb033e1c4dc3aced33b745f4f37921c9f241a45d340011e1fbf960dc436799a3cbfa4a137312116246e129fc68aac923858ea273f62cc5d1001fb9b8f6f7f35b055fc9a5b9344c0790568511d67a3bb9f2e36b8763cd95a167aa71ab5e89985d31f9fe8ea9973730c9afe299b7a5f67089aaf85a302f42e4f3ad8444e1bfb7aec74b50dd620877d61029cd9e3a0599e44f09c9b62c1ac5d46b832d6d4a721c7eca1ed89b941b94c926b8800fb6df41366efe6d30b2d81d331b0f77b13ff683e9458765a275a94c3cea7217ca983277c307480b1b6bde085e0de2b7595f506b367c5ca1fe73faa2f52e4050a0d281633ab2566a89cc753a8abcd6905678ddf13fcc68f1bf39537dabb3607da1dbbdd75904e0b798a6e0b664b2494b3bcccc80418a870fb14db643470136fc0d28ea478198367dfcaa1b501a1ca100fb30d09b7d976be746c9e95cdc819f2123d709105e6db9a1cfe7cf0c1f5e9323b7dfb2e7eabc7a431224e2170aea3b5882fa99e473e87c55a6fe93a7f06a25d861b365d16c994f19d82d198efa76c537c6cc0927ae0d64002f944c75f1fc1f8195524c859a061802523be77cc75488ec479a764027be9d2ecfd88f2b3b02098e522a60539cd9b0765b93446ad3cff74345bd8a302755f96ee4db877affac1f5578c674c19f1d6ef0dbfec64707626df0349ed9eb9ba323b3b6977a455474ba04a461bf72612c31443a17f495c414e4d6b4caf47d9aad6c8ec721d0ffad1051262752b8a70426b3c84a4d53a526c87eb3862f4ffe92f154357d48f06c82a2e0c8126cc61a76a1d88b15759e641a4df8d5f8895d1f7d5075ebb66397a6051b8c6c0c0c6882e92f06a5292a132dde3be5155b27ce36cc5ba3efb6f3922961b3085515a98555effa0c30ce9b111d2b3b226ea6e0910b6dff81531f17998c56c3586f2239d49e4efd6870d1ca289bbdfa532bff2aba373de4c13a42de373d0bf81097d3a9e6dee77d12c57de4be7a396e6dbcfa91259adfb88826a20d124ba3f2844993e0d753a6ad1730610e13f5ad4d4fddee2c5576b52f217d3a16d6047bb12a678789b496fd2bfec5170900ad556bd9f0c6ecf075eefccaf34456bb18b1d565331ecf076f92a372f0c59d606d3e846c3d94ea46b2010b427926a6b59eb5d334b6de757a74108bc6224af7c7c395534855c9f554936909222550646eb07052ccb1c5949ad969fe01ec049ac967001b161d9f6332f3fd8747336058678163843930242b219ab1d43a1369c4868bdefcf35f46f697dbd219abf87521c1b292c0a9965fb0413f68ccc979ee922db623a387c2d24d39a00fe07186bd0b55cee7403634311920334afab19d1ecc41f8d380d2182c9640808e2de97771e7f0564030533becea8fc2cd9c29e1c145be67ab71aade65bc23bcb01c7a8c3930aad47af949a510029e1029f495fa8a161dfcef0ddc9f5e1674cff10a7d650d0075bed921dcf298d32833c800f62291342b6ad99f5a5e956087bdb790a0ee59bd1c37bd02718e10031a03ceb24bd0891bd2bd590e60c8eb4491c0a00c0d0b568b7433f3f8e369771d5ab75d58bc8c973dd2b5b0df483085039854b9fc68d535b7203d4b188c9c326e1887b3514df16f09dde916efb5b2e02882e631b2cfb375d4c87faa7b9e39022e8261b78319b927cbcaf4408462c429f8c5e763d8b3750cf00ecc4f0124f360e809559ad7a4952b9b94ee225650b0b47a06f28c86fb182e393dc0106be428be805853ee4eea03d79da8949c88d17ae34df157901b3b010c1e03fbb9ce5bd7e23c701a11f6ccb95beaf5b03cb738d0f837b3119a3a743493e228b74106089d3ea242b1744d536fede8ccc124a99cd207b31ff6f01b72e6e4b701afbb8c308a0760b838c5926b32f2209eb9ed89bbbe62c0bf45e3ad875cf903e0292c429c431bc5edf001286a2b9c56a1820192026e6d1d86aa4ea3d87de13f8c06b1644c3552fd696cd3947813a8b360c216bfca7c4ad880b18619bf433c3d4027002a8b8fc0433d58e100ecd36b0a1cb02ab53a21cdfdf4668d8a976e2c4a0184dd777f763c159380c13badf10b59c890d729e239afc1ddaf2eb7de3fcc756fe54546534199e3ca500cb0707ed2ef043929440d6933969fa757d1ee8c2b3ad8d66b9d51cf58bcffe9ee8f64b14eff85e6a62a8f63ca6c84c20102b1b23e592140a82040ea66009b0f77c77b68363159205232fd0965b4d62ee620d46a4c1da315b667e6bc3611a9b9be64f7d1f4b877d5d96ad15aac8fd5437de37478ce61e91cb79708b77f2c19a2efbc0fabef211589bc32d52557da904788f6916e4e591a64c8dca830d05a55d2914313a0141ba60b006a2c2f703e86591080aea80d8ae06535eb90ac595dc9d4d7f59c9bbe4a833619084cba8b2f75a7c08505f98ff0a9eccd4b6f574cdc525f736eb45b958fd64f80400e724932af175780922c0ac58fcffa64291c40c671bfe3a40066989c16d67608880628606f2e85605d72ce5501f70f956ecb4d287658be6c26f9984befe32baf67757b7eabd94df39bfd543ce99b909eba83143833551a032b8aa5465a40a6567c736a6d774b6a805e7b98c86b462c5f981555fec543b15f181dea41c58f78772af1f648a3e03a9ac5488e78627a101bdadb7396ea42490ab1c4afed75159d1f5f3a6fff83c0824d44ffe48f542fcf8b484373934c8bf3efb3b2582858199830d2ec3b6cadfd42391a285bc4e57833f30b5fa6c0f81f143b60216fcb7a592765c80eb0fdcd24437675b546ff72991200ac0b470b8ab6cd06778fd6b98ceb0c55bcfb83dad0edc338985426ccfe4c933677ea82489d01d240fc4b20f670de64eae251fc5c5b1188aa4f008f1a2b57a02af72df22278468f14de9d462d92138f9c36a9f9930ea747dae6d8fd9d507759a0860afae1871a8edff0169252cff67814d1b1afb4317a95e25fe7652e80fdd11634998cc0479cf39cc1459519a4b091b98bffd049365dc83daad2d62224a7884321790df11ad769499f2f9148c49b0a4dc82ae628db4a136bbe1cf2d4a92aff56654330aa3ef447014b69a11a933243f3a0eead12fe986abdbcc0d8fc1923085c89e3a82fe2bdca4e7df2578097bba342dbd3210fe38fd1bdc10143517283eb946909aa0379cdd3184f7a7ebe02ed162c3ca437e67baba93f5e2064a46ee02b497059c50fb66b95c0ba6f408547c5bb566160f57759aa30ca29a98fcbd7effe0e1c2f4396b0e022ef938a3a85c09a5699b637d24ccf08f7fd812c5b471aab5f1438f25eb30af4737dbcfbeb47bdd4639e40406ba982fcbc8d884c67c4ab06f9965d6f7f85aa0138ab9862f3c3543bf5686df0eb0a9ebf76007872bed132885f7f77e881820554a171a75ca253d16c5a84ac8cfe69d0eaff55d4c743d92f2368e6596e8a8c5bc1f65d17939736f7b7f7ee4af66100195f2c68030e92751e0506766891d7bfa460f312e29cd5c4b4328f197fe9c88f0dac161d82bde78f6e35b09166390f3e0a72374c377f0109624a1eebe283f9fafa74b56c2c3f78813748b124766a9a7786d55827a78770b40537896a20caaa79a147b2c2977013c59f45bd4db09fafdefe86923c4a8201a1cf013d4aa07504453ef6d57b184455f00aff1b52333016be31da0e667f3c3887d770c35d26d9eaa71124fbd946a59bd74461dde830fe7127b0264079923b7118d5c13415ffdae24455489de033272c0a37396857162dcf4e105d1c61ee37eeec511ecd89aa6d057853bb0973240b4b879d335c22f8fa30aa6528649813d71a33361f8441b918b278773a3df3967383d95bd132fadc48457d1b679a9b6f57a82d84eeefa45df871e1766bb661af18b8d83adf4c5d72c2388a4d7854d775cbe8a08d1ef13103181ea8d583f5450e29d2e6d59265ee728acfeb9ff66eca3f8ccd2ed620f1e8c62db3666f96871b8e5b875f931f3c58c340706","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"2b16f9e9479bcd8e2eed943fd9984c29"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
