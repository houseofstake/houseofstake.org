<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>House of Stake</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #000000;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #000000;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #ffffff;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">House of Stake</p>
                        <p>This content is protected. Please enter the password to continue.</p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Enter password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember for this session
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="Access Site" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Incorrect password. Please try again.",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f5b2f9b8be67382691cbc0c5a16079043d11dd62fcee60ab0df81642e28efbe6418a85827b8884d4b03de50d33ee5919bf4fad4971ce011bef0fe1e3688bfcc1a4120651744612c1f6fb882ec0265f1de73de675d0b08e9d034e352c94232cc581d42df2c808a81e6ef7c9eef54aa340101409ad1fda0b9957e06a9f29a8957cf73f978d1591273e075f2fabbeb123dc65ae90f57358ab322572d2f28278aeb559341eb27af5107e4ad1ad074e4f93cd411a391f9bc6db86913c9ce00c07b4131045aed5017653186eba1ed2e3bafe8465a05eddd51bff6e553a813e457455ff9b1f1adf3a7fc405c4985b0561a1eb0032c12346f6985a71c19fa95d382975dd592756230351bd1f9efd76a5a4ba02558a86a0bc77e4dbe29f9026819bcbeac6e93f003e77449436e875356ab87d9c5af436a7ce1023be5a7680f6b3abf3487702a53997d7b1e920476219394f56c443eb44efa8cfe973e57c8d3bb25aafab45b273a5a4cc1b6a14396ab5c8f23677a06d9b91c22e996362f4d2abc51201b6142152e4935648c1b56575bb91aedc1862df3a4c30cf391055ed0d7fe3f1a2bc4914018628af9723687bc05846f284dc2af2e8a89fb507037bc72283882a95f62b11837a3cc2de9d7c12bcf6c40d2178bd7df820bd6faf3db4fc4bc8e607983827e14facf94cf4fed7c2ab97fda9c22a4c897aed26a047b4e106d4eb3436ea63aa0baf9bac85aac46fe6b1bfe1ebf76b46dd15769eef44d83a3824f06506396cb4cb7691ce37d542a651e0db12dc57fa471c19d37456938cffab38d3fcb190b5fcce11e8b8e83919dcbbd0248b8696746d2c7e5180e0b7e29867820bff615dfba829e0d314652ee89340e5c1152a3892834a6625946e0138c1143ea948b68d113ecd596602577a537a653d37de3b223921c7f4dc6ce17edb8282350b695d89fb0a19118637a5b8f2e3c3fd388e927808d02102cb53370edebe02d927d8716cdf853156320180954f0b73fa76cec437db1d4636cc1dee8c5e6407f4c648e4b830d8ccca286d232314444cbd343012e6c0947d2dee37ff10a6f0d5e5b9ceb6b8d588a2959fe801d1b954711d4c26157dc47fbed1caa7e8a84ef6594f0d46abdd1ea8777f49f6f42a52d38327bc648ecdd5f07cb452a2dad527b6bab1cb48396daf277448ae0035ab68dfa31894696e1c828ea02e4cd343d87397f0448c37631633700d788a10354e7d5ea5a6be37f08b21f3cfb53f77adf72b38cd592ce3ca7463851f0b13ed29d9fa528cfaa2db2ab52e67680abf0389f5d828b65fd2f8529860a2b3a5ad76dd6857b8063bf0caeb675b0898c248ab6bec65d28370dee2fd8681975b238b98166f9ae155b24978f996219f1126602e06fbc64b60a617a2bcf430d19b31dc4af7726766467e7b27bf21e8ad30e48874f6f41a951d39e19ed14514f1d946f4f36242c4de1d49750e86a019d474ef567405ae7ca194314cdea45240a309cd418cbb626658a9e479e0e77dda771460d828ab94e82ae93b6cfa4413e6e36aa3430379fdc10da3c2c4b30f763b9c16e216d52301f40115679d27b127effcccfe14f3b9e1698c0b52c63266be01c98cb24d9a17be4fc9d687b8d77557ccdc243ae1f604e0042d2a38703146137a6ba8e56d6f36352d262fcde168c62866f1289e494703ac5ce5235fe160d3d6ae83bb3538aca44d56cc97d160236b6e84d2dffefa88f53a0cec88e9bbb0574fedce852aef77be0f374fb752150926abf389c3ee648aff3fcbc70e938854743bace1eadd66768122e71ab0b3b5cc50a2ef5ed831345a6310b1d495992d09aad9a410507fb8f14d68b008205b063b8c1e4bfe2c050a2bb5712330df5e55ff4416ccf46878caadbc7810a53bf9ca089c4ff1404cbc80233422d833bec8166a7fd0b201171c9dc8e62f7e8ad6e127ac3b634908483379eff1b2e924e389b82a8e892cb36eda97de40169c0adfc86afebdbdfc99a99441b63e0c53895fec09d2eaf73dfbfb22938a19c3c3e5d1c6dd75338d6c0dc5cee8a1055a09a798687b407c2b1640784ee1cc99dd88779f6439e0554cdd26617909f74ef7053854dcb116fec747225021679c16bae6afff228449b860ac2be636b820fbe945caaa38e78a22fa6183f6d6578748e9565f01474d50c3dfafbde2db0caddc5c2680134ce83dab4b79885935020498325efb16d785cb31a7c00c0cf9cf11567e78aceb217b5f5bc1eb5a29402b5fd836880beb7586720a2b43fcbc436411a567421316905fbe07cf79e0eb99f3420ae18a322f4eca367aac97cebf6b6407404aafac3abcae7af8d0de8d78823ff0c0a7e26b77c7cb65a499158d2a27a75ff7a92c3a58318291985a46d0dc27b7de13e3974059b558afc0dfe6d6a8344731225c2e971ebc9ad4274fc4f3faa76c77a7f7210fcae39c14683ae91502d1637bb122c88dca8bab6076802658c3f2c9f847058525e904356e4739e1c8735dfa3739eab886899bdba7fef4696b5cfea7b82797e5dc619b1c95cd7c076fc0b38d6c4157d41939f9884c30b43ab0765b2aaad594c2953715d038aff7e5677ae25daae29dfa73ffeec5e03372f69ddd5c8e9fa6ff135b955b827bcf7bbb2d36133aa9c45a393438a2fb875b05efcc66e60e2f583f85b3d9b296fa428a23a6d31cb888044f81743d47b7b44ee8e0ba0ac2625c0664d0a3006453c327477fe0f8d22993b3d4684bb2195a1ee22fd22cb1d817bd214b2d5e51e485b28dd2792d69f7b0c534faa3ba53c553da5991625f5de3d073c19ee4250772c513030269d9f511ff8e490d792632b2a74d172b84688f26132e97b2dd6a215b7f23c5f96fc09f4aa635dcd3e6b2933e1fce2d0613d3e37810f10bad9afe214777f1e521f5b617dc60cc491cd569a11169ed47dd81c2a8ff2e765d198c7ffed9e2aa5ea20f9484247b7f41dea5ea645ad5eb989153023876451d11188a166ee9fc1344a6eccfadd0ca89586a88cb96038ae84ae044df18b230fead57864376f8a0a09b642dec37f8d6cb31fa6d06ccfe0d51f1c0209a8b6b4606898223957dff98182c0a6bb975366cb26d25545565aacbcd6655147f39a9c7940a556b4577d2db465b08e2e2de570e265803f24c6d1d5a9e119c4a3bb854bde6f1235fd539495ab7b4a86692f09847d546ae6141893fbc8356f349b632b4424f2b416d22b23540d61c195e93210332fb93950f15cdba8b97e7d2c4b0cb125b5430d9e94e2cc528dd0dc4271bee67622a6a74a30c191ff5b44f56fbf4ab4df15b401167248c7744f4b1165cc0fc1e930b5a0bd3971bd2a9818394b4e10c7798cf428781a875274c711cabb5f3e0ee2baceb3691e6e6fb0d133f4a0749eb1593e5dd58fb3e9787459b2f05b25f9afe8f2f67d975f2aef22899080d6dcb90227d5d4458ab6876b447e69cf210972b17df1f0f6f3886ce2f66ed5dc2c4488a5c7f00f18fd7114c6100eaa1a84eb17d0c72d4854098de355875f6ef4c86b7a2074f5461de080e21ddf5003c5b1520b0fd1dcb55289d766b5f9c3c0f56a0248633ae089d1ef4e8be3fb52bc24c82b553c00fab4479bb0fef781a81ceabe9dd1f264501612bf385374950cf3e313fea7a0673df7376ef7c527623aa34817ea27cd9e6f3058fde98a80594d0437e5d928ee3a695d7577e1dc6d67021a0349f785f33511de480affff4b69858412ed7909c94d293d745f04b679d651cbf002cc82d50efe78ceadb8b97e5c67fd49af177377e13f565c6cb2746e77b61b92bb0d89f99644047cb09ff6836c287ff9d26f6e505082603a71d88f0031393ee92258df165901015938e26b21596371934b7be497c0d644daeb461244b84ceecd1a9467025094980aed7c4a3a532405987a6887976d4591fc2bbf733d3c8fa0a2d83f04ee211be8bd998b2f94f3e91f44c87a7ff1b5032ce9f25d8bb76cde626f207eae57f5c131bd85d73325a5c7aae74204aaa7cff93085faff24c8f0ebb2b6807017fc18ee6427c68c5a714b3c2fa1d0280b8c5b01af7b95e6ae4133bd208b1d56a4daae350e54881feb37329620977c5c5d49369366d23754e146a363585189c1bb2d1022058b0c72d985baaec0b98f372ad6cccc841c2fc587852d64aae1896b2920b0b587e6b8e95d415631c504cb922ec6b71f8e1e5756c6b6f6b78acaf06f1bf7343a3e9cd2fca7a643ba37cbe937197c8b9b4cdc997e5229fa82b469ec1fbac09974b974fea9d7de71ca49c7ab9d97e5ffbcef877064148c3b096180f2063be029a715ab90b0877fc356863ef7c17958e184512985f83348cfe953691185ca84784fc88c0d33b4348f6cf17acb88142db1cec2fcfb31f9c7ff90c7527e6bcd48deffaa355a3f386c94a37c99e08b5e059971304404322ab3b21d6b59f474033ca0e5436f70adab8de217426cbd8f9178a5031b42ce658abaddd6f34e0989fb5f14d8fab25468dbcaf46c84bc246e9a5eba425260135bcc5e73f698d9020ca2b25dbbaee0f7d3819e57c174ed8082109039af2d0c34ebce3c58c6aac688f7e8297b20fad5790887d0b0c12d5883f96cb0bf18c0d80bdc402d3bc1399d26f320f5ff7c6616f18ca5ac7185a0953631609eb3779fe36ed03bf332d5777f92c4805c5cc651b7bdf0d6adf448c1ac042ec973a27038314bad0b495efb7eb0f578b9c5ffbb0139c5afebf457ded1f536c31722ecc78f3799d9c1ac9172fa85c230dfaf43b11bd4c0f0701e148aad5a68f97f0a38ccfe55c8339cd857427bd1635459e0b5944c8488beaba7194c7172067c0df2bf506b8d54aab06fd683a890f179417afa8b23ac4164a3bf8362b503d5e4e8de5b05c45d754df797d1a1d997e6860c206d27efc177562df54380fe2cdad4e4730730513ba2253a174c61aad433b362c73f49abafe7877f496f239eeddf543cd77664a97a46e82baa6332164818208cf814a31f4bb39f6165d1c0dffe1853e3f6baa70ead80f1dbcae8e07441de9fd8276dd18454ab8f9cd93899961f6fe5d01b7b0d9440e587e1c07d9fe46b1db7ae02161abada147470fdb458ddf78076acff5445b593034e117a5d0ae103bbff387497550690d9e09b8e0d00752a70ebb17e9d3a903b78e5bb3846e9d5c34fb9a654d92cead826072307dd1777654f61c1ce0509a22f2f26e85c55dbcac5bdaaf2cc7f944611a1dc237a15c763caad942e145aa5934aa845824769258f5b2791b0507684cf773ec8a162aeb523b76eaa5291abce38940d262dfcb755a63c0044e350c1ee9646c9fb71c51a9fd5302fcccfa13bfabbf5f3e8da46b3d873d324ba667ddaff21c7bf45219e54dfb63294ec6d5c3e7c6187220e74f5b8abfe61225a6bce4be87ddf6d82adb49193a236c043bdf7400868ba044a11bb3891541290eccf8d1ab49ecfdd033645161f6618986c72912dfc194bf987a5b5092a873153b99109406734f8b3b696b40c1ddf223aa99a3fa85ef9b4f6fa63083bbfaf2b9a33a3581bd4172733aa934942b78cfb26ae669a7ee7ad9a4ad40b4a34399136be9f3551b8bf419b6327b9a8eb1fde04fe8be119cc183c155f19e5b25601fd1458435bc405ede75ee8cf7e6da4a66c2e14488bbda4e7cc41c5b455c665e843a47de184505f4f43e372347e55cc13a25744c069b447438366524ac7cfe35cfc85214e2b5bc30ca5fa5bb547e9f54a5213ddb9d459ff4a883aabc2e3c045b008a9e0fea2014e49f4f83dbd7dd5c109bd28ae4842979fbe418c88e011d86e2a74a82b57ac6b37c39079b9228e3ffad750d28549138c74a4b94bc24e3938fd214d7e4704db3a37fa3ed3419be2419e63b4c58f057ded811baebb75303176896b391ad1f5e9465e0dcb93541101b25707019dfd9aa23640bad5b0ada0f8d86f38af3206d987e8f3b91eabd15d848e64936f25fa43cff2396246ac49367b176cfa8cab4104a3404e45efd0264e2f2f16f82ea4f4aaf1741def0ce66f4316c2cd5f7d0620a890e1187eeba5de439772c859da935f479114aafc3fbfbf38e28c61a6719ba9ea736f3d63c336494df34c2800e9df1fda86abf346956559300a35e0e6af4ed9d235baf5c6e617dc7e39d7f5997e2a3ed36f685d1c6595292e6868fecec0c8362c6e1b7e50113b839ae0d9f65c4838d5b1901867c995f1ffa5b95879a33703c0de15cfe5f1bb4bac25c20975d334842659f5d86e7db7214c3957ac0902c7ab8ffc0c93753e531676779b1f92923b658b8826a83c3e1647789cbc97a89d4345068a34411dc4413dc4750017ad3046064df3a35e4a23f39bfebc34baa37aaec0a29b528e8747cde548d31720bf01ee1ff2bd3084a76ae26ecf5f4511dee5223f1f7a97cdc81f83f9ebb14a63cbe93edbdb31876fbc259b749b036082b8fc3dd6cfeba69e8ac1b62171828c4476ad299a8c1bb66c5e33ce896cbc54e932b75ca6dd6b9239da5c422fdb9813d9b276c476d53225d58f0239f57065ae361c710b9e8d079ef75a143085c50d4beabc2a077bfb250cba9cd82142fbcf3d07593b450893a5f9e4621a9156e876f0706bcb0d0312a44f39e23738fc051e6cb63e8d711fe9defd4f855e0ffd30efc2d80a6935ac4f2bf5c0f118e15308843630616f0cd4852a86343768d3bd1f4b4754aab90f04d0151647acb30bf8b13f5fb23d3cd8772c84bae72ac47ad198bc10517ec87de4138518cd2bf139a46797e611f45f94679fbb49f8aaa6be2212710ab4ddcbfa27d8057510775621b2f8668318bd376212719998a286c35eb22ac4f16043e74c822da4b636f96ffe60418d81dd5a3f01f814b54f3c0d325a44d46cb9dccefbf536960d7e2ad5f12bbb97ad45c10d95b665af414009339fbc53b37cfb948281a51aaf00a81bd1baacdedef9591edc4d343cd07a374bfea5cf6b86b4405a6316b780adf182ef834b73b0fbc2ff0e3c8eabf148abac539e592188df1a585eaab940143c7637d0fbf4daf1222bbdb605133892802eb6287843c23ebed1f0e2649fcdb3e7a5b82cfed327de067cad8e8a3f0975f7fb770496504222352afce36531e692999794dbbabce91697f1c70d628fccdd94238e535baaa20cbb1de5d23e23197779761e85ca9249da5847790c21dd7706a1290a13b914e246e2d295e273e6c3e244421d6b805f1c3a5a541b9806447972bd77a45d99ec40968012f6e573b8876b0b0eb7b5be3a8fd8b4e4a6c545d5661738383df687ccc20eef4a4b9002540d4f0524ba5d61c2813ffbe46a0296b0a189fe4c576032ec6c918e16694d4d5a6c5d8b70c69f05c269f87086ec3325a45e5fb472aeb5549c424f28eb38f5b3e12fa7d001ebbe413e12b80b4012f0c7a3980f52e87b356a8278cff3b7deee72cf2bf1065f4aeee7483d1a919c67057ba37f251a20e40328b4c5ceb54b36b0252310352ed16d4fdcc93ae7231d2927dc2a4a35f420938562177a408a140b756a6b54fcecb3d1014aff38c5becf2f11d4cbf76478f96d9415dd97f28ba8a9d19f02978455e032323f7bed49997d541777e3def1e215ae219df845d32fa4796e64b268e98f9c818d07e0255163b260c40be67aed991dba6073520cdf636c1675a0762483ccc446d602046171e30c1ec5b42ad4b4cd97ae7abf0965a75764d517ae282dbeb379f9681f8b7f60114346bd1e2c2800a74ff6197399ddfa532643b4443f5bce89c5c4b99ae9a9ce112d8a7c5140dc82dde4cfce26213d94621ab801d872789eeb074812877092fa4e966d5694e9f8cc6392495da147d87a64cc11bccb75ff17b4928ba75939b4aeacf7b3e484906d2cef21e8e8b22f2c96ead3e36d6a0f85d6922a181ffca4061d57dd8a0faa14d219a244675d5197687c843268cc440932a7b4d6d2b2430a3742d9cc49c23df780994c941cfc37196d8c5502d0257b48d1bdfdb7a11d69345699cab6111adfa10c76101d3bf47195c2f43a6e10d182d80c98feef8b2c9de64a65f22a4bf2bc943987678560392531ee983b0dfb49ceafc38fc473c032a52184f313e19c1045ed514fd2909033b5704ea25cd90590f94ddeb9d9efc23ab488ecc9489b50ecd1a1b5c24bc3d7de6f0351a25ffd12146363ea0c80a35837ec5fea0a2ccff788ec1560197ffcf23e9a4045ad22397d829d8d4d5f36e0d881175a741a41ae6bfd635a16bd3dc902684b9d7ff9b1eb34aa5157ab2cb001363da423671ee20e9c102eadf77218b538ea52d9efc6284137b4e79ffee99dde4230dca30b0aa1d5dcbb801d85680e37d75d474aa5c05236d26c8c1ffa1380eed2c3de4fe66d4434700a6ac15bc9c5425bc1f2aefd781b46d740180afce2cdd7aa9ad1784a685ff2ac7cca55af449d635ffcf095e3ed3a4b44822804c00b2ff0aa68d5c57a23dbd022292aa2c68f754fab74f781dc7176b30ce000fb4501b50017552df12fae6fe06f4715f777d84fd8b44d8b50bd2abfc531b8f1bf074e333d4d1fb6dffa46d80faa7f6ad600116e1b952d140081dc5e887cc9056fbfdceab0e1f37476cecdad7fefa5e56805a0f39580f18e816996978f0fd51de2fa4808bc3f4238fd2d2c614bec379eef224dbcff5e97dc45850bed79f6465d5ec982360ba36e37dc3645344ee4c2fd8da0c2895d9676830d2beb6a3ad4288e1858b16ec003a637f1f6dd6608944cd5dd2856c8a4e3ecbaa7947cc21ce73adfadbcd434e4d7eecc51e07b10f1ff745ca927c72d312783296e78de3b7606a2740d92f060b140eb495ab40adf66b8bf2061924a8fa7498b285717c36fe305665555e724730dd573a2b4af40ef2d3d5e236bb100f943584d93b90c2205d3467739413c9ae908a5550f566dbb8aa5b2c9f293d58936d807268a752acc6e3e1d55fb995f6084a8733e87b09e0765a6e3e65c984a6f957a59f672df35ca8b74a47e87cf4764e8524fd500ceb657f746ff230e6376f272854107f5d56116a305fc67bb253742249f5ee6239c6fc594c3d8471b5f62779c8ec225c2d2f253a23e06a3b8cf9def52a07df4c5918ed3ec8a25979f54ac60035c5a1f2bcedbbe88800231002b2c9947b8fadd1c68b0c7d5dfdc85848583b6e00f885b27c7975b6942797d2effc5aa922cb4c74f16b1ce53d3d5773ee5b404285e5233666aa1c1aa7078b0f403452df476056acc33952cd1e96fc0d85fab7e4c1fc8d3ecd61e90661012da24b1c40346a8de1c7f26022f644fd571df8fd856256cbf623126d1ce5f60008c0d5fb10e576862144879b55bea4f576d37f235b7d775580fc73b7a9b5aeda1ea49b336f1f7fb7798f48e7f54b4d13ebbddc78d2e85cfae4effd6206fc8db224677d50498733fd71e8922657a108ca96e90441caa32436d7cb5f4887d6bcf20747056de328b7ae22354a1e743a1b75dca4ea054c7ea7d9ae7c2b39a059f0a36f09c98bdf723c66fdbd96099ebfb1c1a33088ab58c56ed2fd7b415ba54f6f5731c43316c9b72df8115f494e16500edcb14ea5a7047cf1149fad50e4d3e03b31dadac1b483b964d37275281853fff31af6aa54f8c97dce64bdcfc31175d8877b6707263b4b7c52d5fec08d69367d9cce92f835a45b205a50c53db841593cb3b21e6d984f0377542aac04c26f0966f8aae267ae8281a21fa0ded21f027de068d7ba69f793e57ea46c1e1be2502a2c0dd244fa80ce72a516db018dac425e8bba36a76b6a5d93c7b65b0b0fe95561feb3da85edfab86cc231b1df357666fe1e2c309af6b82e57946c593a1e46fd24d34f56536689b3b1b8e379fc098058a378633bb02863239cbfa63d74e87cea836af516226fb953c0789355b1371566a69b22204a2107ab02820e152d2f4078f9202a0d88c646d580dd58981826a22dd4c6d638e5743b751d516c1a875be0a593fd823be94cea4f46f7ec4d9d3a01443c07895bc7c422901c9c4de91e7b508fcd0465341d984c79ca13321e64fe2c31bf249929aad4a005c62a6be5ae2f38ee3875a3598e3d898cc0f17e6f9b8a11012df8cf20a6b2b2344822b616b93221c8f4e0c94fd88f94111031b53bd3ee8df9d6c20c0ccd30e6275f000de3c98b1bae131124b4898f78d76c537643efbb0be881780cfaa2831cb207002d0b6953801246ed4022212ea07ede8fa430b6baceeea4c8718236e23d69f5ee83d2ff01f30400ef9552844c7c19a92861ae364a0ce4924b48cf52ffc6ed6f3a6a41b0d2642ae941bc04167b1eab7ec73c679dca47472d93a102bd7155ded227d42551aa3cdc3de4912cf27510060e2381f5a1a341de55a4b98dfaddf9fcecbcce5ef0ba852edd928433d6c9fadc468a1eb63d586824ef0cd8c20aea6843eb4f33f6457a5787e5e24e1281c820c54cc6d93bed61e137a09559336bbc305ec7bf809662be948f8ccc0367bc53f1c356cf46f3457753f0c5c27701bb948f6a933d8dd8b4f5933b24e4e2730217deca985b4fa45bcd33c3113ae0dbbed5574667a18272f8702b286467047737a25158c1233a04c6c8d2fb1c709ff3b76a555f9434f57f9e50c5a532a7a5242ba399bfbfa1fb854df83be4f51908ae6a33c4a27bc858f67871a60cc2067196e1ecfc6e6d54c3a84e99ee158cc72ae8030824ea171900bb3069a1b385ac44347bbffe1586fab6cf81f0ea98d2d65ba62bf42a0767936dd77b78b5a509af76ba91c0b62fe0c9e5df5fdf5acabf29a732b523b82a850a926556c0c364421e333be84886f835375b80015773004abf0f8e9a7d27532f6e71c7a9d95601684f9e1cda6c6c3aebe5f05f7f57b2aef274b89fa415e09760a7db9ec21dc495b219782c81cbfd43330b23c2f3ea0acff5182e5a5820f130a9e1a1ef36b9049921841ef7916ae1455d994c53ee5082d2808575de718f8b1e05bc4a58cb452fdabf4afd221a9f7865ade5d2038a3c75bdc9b0331bb3bbf9ca01220f12d7e12c06bacaf9ebc8de084ff2607677ced466c9b243ccb25e5e9bf5399a2a4036360917bf259be748f06a4f543bf8cd931cdfefa13201e1f007482b48e41da25187d73966289419ba5743339096ac65043376c2066f2ed711b2ab8ff0e05d13507a76cca926afc8d012da7e337462ef98deffafcec13c5736668e0b0d4744f34f0c43aab68e5deb19914f67c88f020bc36a475d07ca7c132647ee48168fb195fa4ea65df74e9d410ffb441594b4718c3c1c362109aefdaf073aee7884fa69b1fe7fc5242c969e8afcef96c2e79c37bcca8c8f78686aff11452d99c3918e06fbcbb2d3dd3c051d95860ab7e8485cfcd72628fd1b4d879d9aeb8a5f0a82400d067f3deeee9ad953f249f23a9dc66990198c967a46afd65a93c26ef132fca56fc5cab574d449e658d05452d2c59524ecbdc6e60c5f8abc16be4da5fab06d217c15a0a598d61778fbd3d425d199da38bccf8549b9e5a4fade9d96aecbf28020ab61f69bc93c0c08757ad04b8c6c67ec911efdb2fecce1911faffbc2fa7792e2edd5717d9334ba1fad582ba8bd2fddfc8ee0791a79673c61fe504a1a3a519dc962e1cabde2fd8ae851f2711f4036bf7586e7283292e8b3ef7f2492e3db87d3b6cf1fb7c4ef8df801a65eefaca41391f6b93817a6fa119520b27c609c2e7ea5b8b0f8c8aa47b9e0f9409ef96f3d53fdb2c84ea8cb6fb91eab659426c00026189204f1f52c397750b1066f6bdc89bd598908ec79713361db25442fdbad397942050f71d8153e31ce71986ff0d984acbdbc86ca715d4e685ee05084e1a3abd6a8a69f89e3cdfb87c36a81eaf787994466d0d97896689b746f1c19440857ec6754a28f8af03b4a541cb97bf929c1776f871a6a30fe6efe83fdce96045731de94710223e93ad399495389d31d8b6bd11f2fcc43d1b5f475ef164027b92c5ea44038b5decf0b6a15698b90c32547794b262751f8840521720e3e22d629ced08ed62ead3f6bcf2e72c92892233b8f78993b740b6a992b960dea9aed5786cc3f788d62f966f80c68f5b1ef29fb8b94e1b7dc91d50636ca74910ec06d78cfbc172c28498fc3024d1d41a96c79c0a171cb52b4c6c6fac226b7e7e8e7b64db4fb43333749ac45f4697ebb0af5cd4c8cbca1df9638e2d0d59d52e6e363a116915a2b34ff4c63e983eb55ee81ea3e4abe0f6fc491abff9dab29905e663d6d3d844cc284c5aa45001325a4644f074519c67100ba191257890bde82ddab80c7af096496ec202e576e0aacae87d6d0f5f58dfa236b347cedd49790ccdcef73e5c9881f99606aa2ec5c6e0553b75baa88fa6640fb44257718469ad8f1390baa5672867c7a2a7e96abd04a25a1901bf785b1ac69ec15220f13934a961f2e7f57fdc280bd53d4cbf39a1669c643a26c020e0092f8d1f401181777f42a45d1d0edf5b91208b8d56357695a107b56566d31ccf542c16749d02713277b4320ed7a42fac67c52dfa98de727cec700c15725193f51ece96e022492f81349180743ebcc569ce3b96fc24e393e70ad6dfec23eac4cbc9d46e8d96bc691bd16efa3188d1ba3cdfd578152fa846cb06ab09fb92fc4aeb8750a88a8e4b54ac26e49165b53df05511c3997217f0f1cf4640bec2c9113e20f5cdf73b74a734df160448638261950e1fb9f5410362dfedd0a2d68c98272d958977b69f8ce6725fd63c15cdb175d5479788aba9eae54c0b6efa6f1eded4de86f64c39dba653a3355e7da9aaadd12071e0b0bc3045e01b41bc24dfed396ffe619e00d27c5205b2693d0caa2ce2a03bedfab65a44d716f6e2bb1d5625dab66533a5324aa8e3edebf1d7abcfd1c5750956c3a9a92c742d4c53d7b9468742e5787ef7c3f7cc6f55afaa689b435a6bd4892c3636818b1174270739e1c5fe5d93ba0b1bd358a4c1555fc50d0321b966cd3c458a1d3a190199dc21be88003495980e32ff8ccc3bbe89e6277e8cfa8b52ec3cf96ed50ecc5e0bae0e4cb058821a601eec2da9f7becac8cacbd1b0483536475eff3707659dac3d541354fa76c6cb464bbbb0124514bfb5083cec82771dc042ff06cc284fa8d6493bdc39d18d5ac981050ef7454d021f947198714f1bf10b6721bc77836346a28c5dd2929cb8f6f0179ad704fa61eea72e6216d766d59668a29b9ab5869cfa5e4982155bb0235a322ad0e2fdd4b07bf9278c1a26760deb022c845f0f6c6d966e7aa5ac016fb8fdcf1ba0835bd61d085b93eed7f63b48bd1f43c903bda34cd8a095bded84965041d7db6dc974df4ba4291d84736a848130b79c28aa7bec5221a5f4b7550cfb20df6c96ef98b404025c6d5170dc2e19a4a982041949ca7ffe7b6c4bb1de516dc58abf72e1465606b34cf35267fd7f30131cccbbdcc20006c2e5615c3115b5d492b163d6fc42e7e8c23c1a365541897316e41b9ab5c721b55d8238a4767e7146a07a89f434444e22405f2f737072eee9e834bc8d19b3bdf23b449fd730fd34c5f88102e44e7778e70f60fd19602f2ba99a91ebf6db56a77f774763aa46c4d5bcc5fe449c601d5ee75be84bc6741ca359f7349d1f25490f69e2a67d5c18dc743acaf98f58fc3d09a5c611681a64c4b96784fd120cdac3c2646786552580a22b3b189abb0e9db2df463e59d60d4900b96c5a1cc16eaabcfec7491b1d01496dec2bdae4f9f26de1d0c29654ab6193454e68303d8b65ea533191e48d014f643a8aa5520b9d5c042f90bebb5c9a0ca4c93308fcd92e679d3b28349e0e8d65abb2f9e91dff89aace1915750b779d05f2435fd6bf6382363a912706a337f119c4cf0808063f42854406d760ed0b4299fa231bc60908609549e0b4ca1422ee361c24133af25cb581f7cada090ce5ac1513fd296e519d8b4892766c92a8b7cb7076bedde5cac003b382685540ae2f1524f65c896aafa45378386401340c3ce5423a51b3f1066c7ac0bc3a5df8ca64967fe0bf6cc00fae922971e60fd33969d4bdbc288898d3540427a5b48048d6337626f844f28484d9fc86dc4eb5c5ed7a570f8de16810fa855f780611800dfb4106a93d35a7512a6d0de8d900d4806ec213334bbdaead5d67ebc1ae061720c160169f6226d93fde1f0c8cb3c3036653ced468ea1d2218110d367dee8edbe0551ed0620dea12e2f722a9bb96b22a53619813395983d072a69f1f5df97ef60461d3cb51fa815dbb542bdfdcde07da4ca16c1b7bcc320ef6d9a86e3fb625a91c842b9c4875f5f0f8c04d0153c8405d01a2eac0229c0f8f4e6fdbf25b94c1a8aaca1c881c464f91631daa4b64606df27c8ed7740bb3e60260fb117e88d091c2a7850f95f1c44a3338a5b515d50e26e03db8e99041c154addf7a9dd1c7e4aa8d1a971af0196d1fa8dd1055a4e4e6e0abe643f180e1c903a2aa58db3ce782aedbdb185e923016c037c90aac0d4ffdbf8756e1a2ee72d4ac28ea9c1fc540364e1e42be42e19b6ae00c3b42c26822b3839cf2a96f2d1411367031dc4ab44fe64a36b432dda4361783f5f8c76002abd536fa6dd476ecd4c31b1d2762a8148ddcabf6c68ae085cb35ccb497c32b45dcae35aa764bf7bd3e824e5a6e31dc2641a0c0178c9153e21ef4709d97b068166909e5ed196960e49fb35e7d3edeebd6ea67ea50144980d5b7f105d66a7b666143c81a99c9a2817a67eb0ad5b72fd961bf500226fe19df919443568e9d14a61c56b5d5a4623e86313b95f5732b5188a993d5d21ef75ce6ff47d56f553e183200ef3d36248243befb1e632621e432a2b038f5d1ef6c00f8049df2d0525b39c1f1240f863c891c50b2eaf2db054e28856439738aa7fcec127baa0c1a3bf7d9708ff534b588c4b2075859a8f61475e6977ad5055d62a77bbdf8603ed883fef4f78a6714953e0c0f54e157040d4c1979d74ace5343fbc48fd119d8285bb81eb4df74b619dbb1f0e521a21cf56a381f651038451ea965e9c222e4172c37798a43628745fefc2e50be638436ea23b603fc4db5a1776fd7c27eb14b22df868ebb07ee017d491519f10a0128823fc45ce8f96ebad6ddd833032278b1471e8e32288c1ef2cfd7175710551bc408735c4df0a6b7db684b138fdd7ed7258b77c8fb84704032f2b57777ec1ac9e49b7cff1ddbeca2d1460ed265845d4b022fe56ae174f3944aaa78cfb71b1669f20ff2849edd6bf79c007fb479c5aa6fcdf0f6a8f576e501040f5b896ededa0efaf85f192c41221c098dc377efa8931f1138b4558f389b12a4f10395b1f4a6030ab8522d42b816f9482f7099ae49079088444309005e775f5d46c3878b5f29e55737445eff431df73f69b084ceb5338a023baef771d0bcb5160fb33741e108536c26dfa99f178a7d408c6705f064d443a9f9948ad76c13f86f69af21c10481f100f724ba0cdadb9bef6d600bddd3aa1c2afd9a0ba867f99f8afe2769c03a50ef163f7c0a90d59cb093d78724b58158bcc47e78de588fffaa54c449874762a8f783b3270807fb587f26bc7b4a6158968319ef5bb95bcfcbe2d4401cc2737053d3bcfac9814232090bb8829733a841b2506d312152c39fb2b5cd88755c3ae9473fbc6fc93d6dbd628fd7d647996689d3f35347a81aa2555c8fb3c7b6e32a4c0528715fb31bc884befc0016e219509249c00a6147a0685c53ab24e05b461a813231d01586cde627d273a7bc47c3aef0b21dddf3402049adde0e291be1a25a3ee1f28260b6768b91f02c0da5b00de52cbe11529d669276ea149fb54652728292c51966ed8d938c5791fe9a8d214b2b65931fc983852cab334d5d5733086f231062982af4388e6465045c6b7feb2bbc5dd0ce62ca75b65a2af96a8bead5124a76e7d02eb8747454e29fea1067e96210f5d541ea9f9839ece32c09e4274a123b7b07c92c357d73bfe6acaf3831881c1c8d6b8dd220090609bd1f7036ad043b50bda95f335f78fdbd238cc5ceb0075fd253d5a79e2c446e5ee04d77fd4c0d08a37a743dd1e978de7fd0951a5f918b6b8672af70455119dd8da6f47524b0c7f96b204f6829f20f7d67364ad8c7c57f35863aa81e9a64208448941c70e4f3172354c10bab5a39fb5a33a6df3f1027aced67c46e0c24c5e8ed0949bbb520d01a28d85bacc67106c82f76f93ab5e6a281c9d1049a43dcc6405430ee9973b1b11d6dc25fc39e483653b8f73156887edca779a2a306e661fb4d986e303a22f73bf91431c816e660e6f1cdb4f1a673cefec9f79d56773650b900d8e1b8d4ef3b652cf980a1971e6b785b741cb0bd780b5f0d2f7165a9827b1d48140d078b13282e7b419a56680b3a2920176964c9e1cebbd8421b3a7823d4ba3016aa132241a14567f11d5a9e49d22cc660d02ad25770cb2f43892ded9c581dc8f58e70f879b3f0ee1a393d7840802f7ee88f04044b7fc0f4ca8387d3c0d3c49c6b31e0df2312c7f21887be5e671d79363563220314f4eea113cf191dfc456e431023ab1e4385d7da4b1c6d6ec4d7ea694365c713c0c3d6b6e06e04eb7fe6cc124516349525849e417238c918818ac8135260048b65ecd078ff35f6b920273b9143c6d64e6011996002811b2d03d67f8eb50721463337bd5ed51bb4e566d3ae1953c2b217817c0a4831f6862c93752c7829a7294f94b0440f2cc4c1b5fe51f21d15c3f55ae7a00abd7e204b2d714f6bf5c405a9a6e920f80fbfde1d906fabb2f187872a56c317467664a246df34e1ce637a72a0020a5372fe272541da0c26d6b178c7319cb916c57c8e7c3bbb8e48a34085805d6bf341d5b68ff5b18d34aa8edfa0f9db30e6e33800a2f73fc41e2833402a93033af50903064abad0d78532e6694f697d33cd8157715155796150142d2f8e45f4851d66106514481b136629636ad3bb70d097d1e8ea59b95844679e235c4ab211881e7106b0d052f0dc6e5898445f6bcd1b3d8b4f5a12a6f0abc0a0063af642a9b8ca1c1f755301452dae74b28302f76f8089c29d8b790fec5cbd8bee744ba6b0093f6c974b4fe82611d8b2e1206edd8b6d78a380fc2650870eb22d03d2fb73fd18a9df71244665560c75dfe1f5630b2ac3f6e247d538a28cb02e9dce129a50fb5b23aae44acb27016ad32de210f7e84e5bdb166b7c639ac934bf0cfbb78404975852372fe0614eb48a89aff3f4902819f0322b4f5411a5585962ec2373dcb798f730984741cbd07be13475b363888473f5b5f14f847a6e275aefccb5d0a242dcee5c0a8d8c4916ded63b3eeccfebf2e8671d99995e8639a70058834573f2c48911b0266964497502893ad34184f2f7a6e999c2390bf2d909c30f8ed429845995960800eefece01ab38305c5fb4a08e5affbc48517b43f09593044cbf1a5c5b8dd78a17d07fab18d71d99bc7e24eca993849b59685fe29986a1562e60ecb634d589e928194395f569806dacb86acd76dc403ba1f50107c5f1a7fc33961f0453708ffd23b02b8bf281be7ed3dd2a423da97585c8b2836ce4bc29880a5679e8fb067ae7f1e26589d7897f03c058d86ce4a1823be9516a797e7587866b95d81be4880a3e6426b274c2369b30322cc7c7d3385f5dc257aea3f0261e57181000a0d7c6864d77c19294b1cc6c11e1de481b5e4e8f7bc027a1ea8d615252c63c4322c5e1adc7a2717682b212a7aeb753b09f007e743d990fd7d2d72d1d7e0daf12d57eb298832ad1ebed5a83702f5f127fb0814941b9f901cec747b151ca5a391392d2101b17cb9200808561805aa847febc4b06cf6a206c488fd17c68e63d5ec87ffd0002f186e4693609d1673f8e43b8a67d0ab96556079552f7577962154454226ba7cf361c60f7b2c025baa3d2c34c9b3510383c6c87ac7bab393a8d41d4e3a4ddf4c132117ebac94a4341d0db4cf19bfc89492c74c0c8ea0d46dd937ec6d839db93ce64cbf821ee8df44ea4e3aae00d6d9f2ec6f5fa3ab87c5c0094e2210b056c486876cd07ee03942db3273592202cd3c6c9654990f6d0fc7947f1054116cb7242cb03bb306d9e7fe06c509f8efb69264fb27c48db04dc8ed943cbae1b8f0e75513df7f8b77afaefd44d0369d6d792c2112f8d24439ef238f4889bd9cc2a7b81687e1a121914b2f23df8d6b6e471171c79e41551e9846a2b75bcdf86d7a7f990dc035adb42683c29a9aa0c3b95f5d08413ffaf6ab0e3e1f54d9ed1db7bfdb9d86aabc7dbfa653fc84359ec6ef383b1c4d3e0be07cad3809ebde95d0a36379052c7042fe83d924a3eb87d1f52d68d10090283bbe3e5a06dbd2881b1f2d0a3ff5e4d4b850757213851df5960217eb3052da36de2d1bdf9956e17ff52a3c090d9fe128ef622b9ace86a63534ee613f615085953471c5a6048c5aa2065d416e5f3a0cef3d3190f8e109b4c6f86cd9d87e6e3a4bc72f3c6d5c4875d1b0375d94fa4991aed5df27ce680a8954373be77539c8a6e620d42c84baa19203f7b20933b4615dde8f91dfee98e9b5b4e22d418c86c804e90068d8ca8d1ec71dae768976f326484a35ddbb52f29efeb218ef4efad93c564863f7a574a981f53a393b78d594cf89e592f80328f4a2ad000752591c27b2f92062029e0ae925ddf8794725165334adbb607295ae7e32a3ccd6ad791f774570cb621563182bd3cd1226bacbf3fcb739d95686c19197659abc0997b3fe4ba59b2fc8c8c5c60965f76f14f5e066f23c45e663816cbdd6ea36a0c6ee9070a3b5ecca7c931eaa3c53976f4b561d940cfab18e52d41dd8e145efb7e5c1a46af8a06cdda3d4cdaf4292e204c3db71e3eebbc249bb799472007cfbd601476a382a00c93d47b21536fc71922ff4d7d6252ce7c3f01f285d72edf2f625ae48d78184203f8187791e7e23066cc540aa9b2289e0b38fb8c1a234465169619081b8acc59ba5520e46fc6ff800485d96d5bacd74519711d1aced0dd626703c5ae04aa255bbb2d3b2f105224e9a580a3b78a7e830a30ef8651e9442743e2e13e6ea1f6b70f85252e0570034095f46317c6aefb99b16be2d98247ebc46e12891e408b604ed29b5af994c224ce1b71cf48229f905c193acb82fcf4686d9ad7bd7521d25e1a9db74e90d66de5b66b9e34bea760af911f5924bc8e36a5160100a06e72898f4f9d7af150a0b0a993f70f340c7037f79a5092ec29085f15b36739ae2499853e56d0fad2bc87c47fcf76e7a7337c4655c5ef4e16e5f3ddb1c9c0331f6c329134df1c8f9ba83e322c6339616ba164124f966ea5b5438eade5c8641b334ccfa1933b9ed65ec2c3a0f597dc8bee5d41dbfd2114e0ce783964bfa139b487a1265eca63655f907823d585dfbae664a57d58b6eb5204d6ffa610d734d94873181ddff509918fd3cfe199147f969d8cdcb6e4d43737d127ccbfe0f4027178914737ef1f5b0eb3601a2ca6110b6a8d3a4b915b6a91254fe743f3342ff046754fb1de0884d44d254108a16ccdc1ada208d90b73a347fd9b59cf2951cb46cd2f7b6c133c83c59dc1e9985118c3211856dff0067b47ba6b4e60ba227790c096879b0173e7650f3b70c0fc2531610ae6591ddf29a8b2cd8daff8b34bc31d56fa46c6f25c0fa0378108dfa8a0c5519fbe34aecd1f9aa7b96bb36a683f52838e926174c2a81d89976b7ebaed0728b136d0f3a59c78ca3d34a22e22549851d3367fdd9ebe662268042d639fb5504da36b5c93ca7733c544bb7fba10c0b785397e296ecb5d3bad62b768e53b6147cda3a796607ba3e2151dd7256e2da9c5ed110bc48113bcb97019636dbe05a2cf343dd5ecabf35841091a2d631fff03ea0cfaf27579f7dd358663d8185603177890f4dd48ef04788efacd9996c26af3a7f26d675d9389563d30c7242f850dc199abe546dfec9dedf9a69b6f75e3d97aabf729427337783f496754304278cc52354e365ffb658e0eee5fbe38afa7a7aade7da02e78d2e947cfe0b495ef37af42f56dd938ebbae287fc85dad692f8aaed93d1ac9c99b3a2676a247ff85b59ecfe9a05b61262f802c1268ed9c05c452eaf69735cd913532b5eabd741a6364dd159318104ebb767a56001815d9b8106156faa304657605a1857bc9d3d32aaf14b6266654ee23d5607f7dc251d3b53b4c3a4d9a86137a5126f26149e20a102f4903c3db08af33174adcc31ee06f3cfe17327f884a702f5c63a8e8d97096481f9f95e5a86aa4d90e6a9225eae949863ae5a578de751a831fe4bd8d740eef209627da0177080692860c8f07c3edcb2fc976444ed417a3ce152ea81095ae2f276d554b9ce4e159c73fad84210bb21e90a9419688834a8a3128bcfdd24bc00e51c131","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"126a08e53e36b703cc95578979034e86"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
